
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>API &#8212; Flask 0.12.2 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.12.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/flask-favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Flask 中的设计决策" href="design.html" />
    <link rel="prev" title="大型应用" href="becomingbig.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
    <link rel="apple-touch-icon" href="_static/touch-icon.png" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="api">
<span id="id1"></span><h1>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-flask"></span><p>This part of the documentation covers all the interfaces of Flask.  For
parts where Flask depends on external libraries, we document the most
important right here and provide links to the canonical documentation.</p>
<div class="section" id="id2">
<h2>应用对象<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="flask.Flask">
<em class="property">class </em><code class="descclassname">flask.</code><code class="descname">Flask</code><span class="sig-paren">(</span><em>import_name</em>, <em>static_path=None</em>, <em>static_url_path=None</em>, <em>static_folder='static'</em>, <em>template_folder='templates'</em>, <em>instance_path=None</em>, <em>instance_relative_config=False</em>, <em>root_path=None</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask" title="Permalink to this definition">¶</a></dt>
<dd><p>The flask object implements a WSGI application and acts as the central
object.  It is passed the name of the module or package of the
application.  Once it is created it will act as a central registry for
the view functions, the URL rules, template configuration and much more.</p>
<p>The name of the package is used to resolve resources from inside the
package or the folder the module is contained in depending on if the
package parameter resolves to an actual python package (a folder with
an <code class="file docutils literal"><span class="pre">__init__.py</span></code> file inside) or a standard module (just a <code class="docutils literal"><span class="pre">.py</span></code> file).</p>
<p>For more information about resource loading, see <a class="reference internal" href="#flask.Flask.open_resource" title="flask.Flask.open_resource"><code class="xref py py-func docutils literal"><span class="pre">open_resource()</span></code></a>.</p>
<p>Usually you create a <a class="reference internal" href="#flask.Flask" title="flask.Flask"><code class="xref py py-class docutils literal"><span class="pre">Flask</span></code></a> instance in your main module or
in the <code class="file docutils literal"><span class="pre">__init__.py</span></code> file of your package like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="k">import</span> <span class="n">Flask</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition-about-the-first-parameter admonition">
<p class="first admonition-title">About the First Parameter</p>
<p>The idea of the first parameter is to give Flask an idea of what
belongs to your application.  This name is used to find resources
on the filesystem, can be used by extensions to improve debugging
information and a lot more.</p>
<p>So it’s important what you provide there.  If you are using a single
module, <cite>__name__</cite> is always the correct value.  If you however are
using a package, it’s usually recommended to hardcode the name of
your package there.</p>
<p>For example if your application is defined in <code class="file docutils literal"><span class="pre">yourapplication/app.py</span></code>
you should create it with one of the two versions below:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="s1">&#39;yourapplication&#39;</span><span class="p">)</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
<p class="last">Why is that?  The application will work even with <cite>__name__</cite>, thanks
to how resources are looked up.  However it will make debugging more
painful.  Certain extensions can make assumptions based on the
import name of your application.  For example the Flask-SQLAlchemy
extension will look for the code in your application that triggered
an SQL query in debug mode.  If the import name is not properly set
up, that debugging information is lost.  (For example it would only
pick up SQL queries in <cite>yourapplication.app</cite> and not
<cite>yourapplication.views.frontend</cite>)</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.7: </span>The <cite>static_url_path</cite>, <cite>static_folder</cite>, and <cite>template_folder</cite>
parameters were added.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.8: </span>The <cite>instance_path</cite> and <cite>instance_relative_config</cite> parameters were
added.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.11: </span>The <cite>root_path</cite> parameter was added.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>import_name</strong> – the name of the application package</li>
<li><strong>static_url_path</strong> – can be used to specify a different path for the
static files on the web.  Defaults to the name
of the <cite>static_folder</cite> folder.</li>
<li><strong>static_folder</strong> – the folder with static files that should be served
at <cite>static_url_path</cite>.  Defaults to the <code class="docutils literal"><span class="pre">'static'</span></code>
folder in the root path of the application.</li>
<li><strong>template_folder</strong> – the folder that contains the templates that should
be used by the application.  Defaults to
<code class="docutils literal"><span class="pre">'templates'</span></code> folder in the root path of the
application.</li>
<li><strong>instance_path</strong> – An alternative instance path for the application.
By default the folder <code class="docutils literal"><span class="pre">'instance'</span></code> next to the
package or module is assumed to be the instance
path.</li>
<li><strong>instance_relative_config</strong> – if set to <code class="docutils literal"><span class="pre">True</span></code> relative filenames
for loading the config are assumed to
be relative to the instance path instead
of the application root.</li>
<li><strong>root_path</strong> – Flask by default will automatically calculate the path
to the root of the application.  In certain situations
this cannot be achieved (for instance if the package
is a Python 3 namespace package) and needs to be
manually defined.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="flask.Flask.add_template_filter">
<code class="descname">add_template_filter</code><span class="sig-paren">(</span><em>f</em>, <em>name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.add_template_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a custom template filter.  Works exactly like the
<a class="reference internal" href="#flask.Flask.template_filter" title="flask.Flask.template_filter"><code class="xref py py-meth docutils literal"><span class="pre">template_filter()</span></code></a> decorator.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> – the optional name of the filter, otherwise the
function name will be used.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.add_template_global">
<code class="descname">add_template_global</code><span class="sig-paren">(</span><em>f</em>, <em>name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.add_template_global" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a custom template global function. Works exactly like the
<a class="reference internal" href="#flask.Flask.template_global" title="flask.Flask.template_global"><code class="xref py py-meth docutils literal"><span class="pre">template_global()</span></code></a> decorator.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.10.</span></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> – the optional name of the global function, otherwise the
function name will be used.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.add_template_test">
<code class="descname">add_template_test</code><span class="sig-paren">(</span><em>f</em>, <em>name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.add_template_test" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a custom template test.  Works exactly like the
<a class="reference internal" href="#flask.Flask.template_test" title="flask.Flask.template_test"><code class="xref py py-meth docutils literal"><span class="pre">template_test()</span></code></a> decorator.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.10.</span></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> – the optional name of the test, otherwise the
function name will be used.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.add_url_rule">
<code class="descname">add_url_rule</code><span class="sig-paren">(</span><em>rule</em>, <em>endpoint=None</em>, <em>view_func=None</em>, <em>**options</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.add_url_rule" title="Permalink to this definition">¶</a></dt>
<dd><p>Connects a URL rule.  Works exactly like the <a class="reference internal" href="#flask.Flask.route" title="flask.Flask.route"><code class="xref py py-meth docutils literal"><span class="pre">route()</span></code></a>
decorator.  If a view_func is provided it will be registered with the
endpoint.</p>
<p>Basically this example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>Is equivalent to the following:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">pass</span>
<span class="n">app</span><span class="o">.</span><span class="n">add_url_rule</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span>
</pre></div>
</div>
<p>If the view_func is not provided you will need to connect the endpoint
to a view function like so:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">app</span><span class="o">.</span><span class="n">view_functions</span><span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">index</span>
</pre></div>
</div>
<p>Internally <a class="reference internal" href="#flask.Flask.route" title="flask.Flask.route"><code class="xref py py-meth docutils literal"><span class="pre">route()</span></code></a> invokes <a class="reference internal" href="#flask.Flask.add_url_rule" title="flask.Flask.add_url_rule"><code class="xref py py-meth docutils literal"><span class="pre">add_url_rule()</span></code></a> so if you want
to customize the behavior via subclassing you only need to change
this method.</p>
<p>For more information refer to <a class="reference internal" href="#url-route-registrations"><span class="std std-ref">URL 路由注册</span></a>.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.2: </span><cite>view_func</cite> parameter added.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.6: </span><code class="docutils literal"><span class="pre">OPTIONS</span></code> is added automatically as method.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>rule</strong> – the URL rule as string</li>
<li><strong>endpoint</strong> – the endpoint for the registered URL rule.  Flask
itself assumes the name of the view function as
endpoint</li>
<li><strong>view_func</strong> – the function to call when serving a request to the
provided endpoint</li>
<li><strong>options</strong> – the options to be forwarded to the underlying
<a class="reference external" href="http://werkzeug.pocoo.org/docs/routing/#werkzeug.routing.Rule" title="(in Werkzeug v0.14-dev)"><code class="xref py py-class docutils literal"><span class="pre">Rule</span></code></a> object.  A change
to Werkzeug is handling of method options.  methods
is a list of methods this rule should be limited
to (<code class="docutils literal"><span class="pre">GET</span></code>, <code class="docutils literal"><span class="pre">POST</span></code> etc.).  By default a rule
just listens for <code class="docutils literal"><span class="pre">GET</span></code> (and implicitly <code class="docutils literal"><span class="pre">HEAD</span></code>).
Starting with Flask 0.6, <code class="docutils literal"><span class="pre">OPTIONS</span></code> is implicitly
added and handled by the standard request handling.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.after_request">
<code class="descname">after_request</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.after_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a function to be run after each request.</p>
<p>Your function must take one parameter, an instance of
<a class="reference internal" href="#flask.Flask.response_class" title="flask.Flask.response_class"><code class="xref py py-attr docutils literal"><span class="pre">response_class</span></code></a> and return a new response object or the
same (see <a class="reference internal" href="#flask.Flask.process_response" title="flask.Flask.process_response"><code class="xref py py-meth docutils literal"><span class="pre">process_response()</span></code></a>).</p>
<p>As of Flask 0.7 this function might not be executed at the end of the
request in case an unhandled exception occurred.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.after_request_funcs">
<code class="descname">after_request_funcs</code><em class="property"> = None</em><a class="headerlink" href="#flask.Flask.after_request_funcs" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary with lists of functions that should be called after
each request.  The key of the dictionary is the name of the blueprint
this function is active for, <code class="docutils literal"><span class="pre">None</span></code> for all requests.  This can for
example be used to close database connections. To register a function
here, use the <a class="reference internal" href="#flask.Flask.after_request" title="flask.Flask.after_request"><code class="xref py py-meth docutils literal"><span class="pre">after_request()</span></code></a> decorator.</p>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.app_context">
<code class="descname">app_context</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.app_context" title="Permalink to this definition">¶</a></dt>
<dd><p>Binds the application only.  For as long as the application is bound
to the current context the <a class="reference internal" href="#flask.current_app" title="flask.current_app"><code class="xref py py-data docutils literal"><span class="pre">flask.current_app</span></code></a> points to that
application.  An application context is automatically created when a
request context is pushed if necessary.</p>
<p>Example usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
    <span class="o">...</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.9.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.app_ctx_globals_class">
<code class="descname">app_ctx_globals_class</code><a class="headerlink" href="#flask.Flask.app_ctx_globals_class" title="Permalink to this definition">¶</a></dt>
<dd><p>The class that is used for the <a class="reference internal" href="#flask.g" title="flask.g"><code class="xref py py-data docutils literal"><span class="pre">g</span></code></a> instance.</p>
<p>Example use cases for a custom class:</p>
<ol class="arabic simple">
<li>Store arbitrary attributes on flask.g.</li>
<li>Add a property for lazy per-request database connectors.</li>
<li>Return None instead of AttributeError on unexpected attributes.</li>
<li>Raise exception if an unexpected attr is set, a “controlled” flask.g.</li>
</ol>
<p>In Flask 0.9 this property was called <cite>request_globals_class</cite> but it
was changed in 0.10 to <a class="reference internal" href="#flask.Flask.app_ctx_globals_class" title="flask.Flask.app_ctx_globals_class"><code class="xref py py-attr docutils literal"><span class="pre">app_ctx_globals_class</span></code></a> because the
flask.g object is now application context scoped.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.10.</span></p>
</div>
<p>alias of <code class="xref py py-class docutils literal"><span class="pre">_AppCtxGlobals</span></code></p>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.auto_find_instance_path">
<code class="descname">auto_find_instance_path</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.auto_find_instance_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Tries to locate the instance path if it was not provided to the
constructor of the application class.  It will basically calculate
the path to a folder named <code class="docutils literal"><span class="pre">instance</span></code> next to your main file or
the package.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.8.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.before_first_request">
<code class="descname">before_first_request</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.before_first_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers a function to be run before the first request to this
instance of the application.</p>
<p>The function will be called without any arguments and its return
value is ignored.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.8.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.before_first_request_funcs">
<code class="descname">before_first_request_funcs</code><em class="property"> = None</em><a class="headerlink" href="#flask.Flask.before_first_request_funcs" title="Permalink to this definition">¶</a></dt>
<dd><p>A lists of functions that should be called at the beginning of the
first request to this instance.  To register a function here, use
the <a class="reference internal" href="#flask.Flask.before_first_request" title="flask.Flask.before_first_request"><code class="xref py py-meth docutils literal"><span class="pre">before_first_request()</span></code></a> decorator.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.8.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.before_request">
<code class="descname">before_request</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.before_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers a function to run before each request.</p>
<p>The function will be called without any arguments.
If the function returns a non-None value, it’s handled as
if it was the return value from the view and further
request handling is stopped.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.before_request_funcs">
<code class="descname">before_request_funcs</code><em class="property"> = None</em><a class="headerlink" href="#flask.Flask.before_request_funcs" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary with lists of functions that should be called at the
beginning of the request.  The key of the dictionary is the name of
the blueprint this function is active for, <code class="docutils literal"><span class="pre">None</span></code> for all requests.
This can for example be used to open database connections or
getting hold of the currently logged in user.  To register a
function here, use the <a class="reference internal" href="#flask.Flask.before_request" title="flask.Flask.before_request"><code class="xref py py-meth docutils literal"><span class="pre">before_request()</span></code></a> decorator.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.blueprints">
<code class="descname">blueprints</code><em class="property"> = None</em><a class="headerlink" href="#flask.Flask.blueprints" title="Permalink to this definition">¶</a></dt>
<dd><p>all the attached blueprints in a dictionary by name.  Blueprints
can be attached multiple times so this dictionary does not tell
you how often they got attached.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.7.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.cli">
<code class="descname">cli</code><em class="property"> = None</em><a class="headerlink" href="#flask.Flask.cli" title="Permalink to this definition">¶</a></dt>
<dd><p>The click command line context for this application.  Commands
registered here show up in the <strong class="command">flask</strong> command once the
application has been discovered.  The default commands are
provided by Flask itself and can be overridden.</p>
<p>This is an instance of a <a class="reference external" href="http://click.pocoo.org/api/#click.Group" title="(in Click v7.0-dev)"><code class="xref py py-class docutils literal"><span class="pre">click.Group</span></code></a> object.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.config">
<code class="descname">config</code><em class="property"> = None</em><a class="headerlink" href="#flask.Flask.config" title="Permalink to this definition">¶</a></dt>
<dd><p>The configuration dictionary as <a class="reference internal" href="#flask.Config" title="flask.Config"><code class="xref py py-class docutils literal"><span class="pre">Config</span></code></a>.  This behaves
exactly like a regular dictionary but supports additional methods
to load a config from files.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.config_class">
<code class="descname">config_class</code><a class="headerlink" href="#flask.Flask.config_class" title="Permalink to this definition">¶</a></dt>
<dd><p>The class that is used for the <code class="docutils literal"><span class="pre">config</span></code> attribute of this app.
Defaults to <a class="reference internal" href="#flask.Config" title="flask.Config"><code class="xref py py-class docutils literal"><span class="pre">Config</span></code></a>.</p>
<p>Example use cases for a custom class:</p>
<ol class="arabic simple">
<li>Default values for certain config options.</li>
<li>Access to config values through attributes in addition to keys.</li>
</ol>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.11.</span></p>
</div>
<p>alias of <a class="reference internal" href="#flask.Config" title="flask.Config"><code class="xref py py-class docutils literal"><span class="pre">Config</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.context_processor">
<code class="descname">context_processor</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.context_processor" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers a template context processor function.</p>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.create_global_jinja_loader">
<code class="descname">create_global_jinja_loader</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.create_global_jinja_loader" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the loader for the Jinja2 environment.  Can be used to
override just the loader and keeping the rest unchanged.  It’s
discouraged to override this function.  Instead one should override
the <a class="reference internal" href="#flask.Flask.jinja_loader" title="flask.Flask.jinja_loader"><code class="xref py py-meth docutils literal"><span class="pre">jinja_loader()</span></code></a> function instead.</p>
<p>The global loader dispatches between the loaders of the application
and the individual blueprints.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.7.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.create_jinja_environment">
<code class="descname">create_jinja_environment</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.create_jinja_environment" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the Jinja2 environment based on <a class="reference internal" href="#flask.Flask.jinja_options" title="flask.Flask.jinja_options"><code class="xref py py-attr docutils literal"><span class="pre">jinja_options</span></code></a>
and <a class="reference internal" href="#flask.Flask.select_jinja_autoescape" title="flask.Flask.select_jinja_autoescape"><code class="xref py py-meth docutils literal"><span class="pre">select_jinja_autoescape()</span></code></a>.  Since 0.7 this also adds
the Jinja2 globals and filters after initialization.  Override
this function to customize the behavior.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.5.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.11: </span><code class="docutils literal"><span class="pre">Environment.auto_reload</span></code> set in accordance with
<code class="docutils literal"><span class="pre">TEMPLATES_AUTO_RELOAD</span></code> configuration option.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.create_url_adapter">
<code class="descname">create_url_adapter</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.create_url_adapter" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a URL adapter for the given request.  The URL adapter
is created at a point where the request context is not yet set up
so the request is passed explicitly.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.6.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.9: </span>This can now also be called without a request object when the
URL adapter is created for the application context.</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.debug">
<code class="descname">debug</code><a class="headerlink" href="#flask.Flask.debug" title="Permalink to this definition">¶</a></dt>
<dd><p>The debug flag.  Set this to <code class="docutils literal"><span class="pre">True</span></code> to enable debugging of the
application.  In debug mode the debugger will kick in when an unhandled
exception occurs and the integrated server will automatically reload
the application if changes in the code are detected.</p>
<p>This attribute can also be configured from the config with the <code class="docutils literal"><span class="pre">DEBUG</span></code>
configuration key.  Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.default_config">
<code class="descname">default_config</code><em class="property"> = ImmutableDict({'DEBUG': False, 'TESTING': False, 'PROPAGATE_EXCEPTIONS': None, 'PRESERVE_CONTEXT_ON_EXCEPTION': None, 'SECRET_KEY': None, 'PERMANENT_SESSION_LIFETIME': datetime.timedelta(31), 'USE_X_SENDFILE': False, 'LOGGER_NAME': None, 'LOGGER_HANDLER_POLICY': 'always', 'SERVER_NAME': None, 'APPLICATION_ROOT': None, 'SESSION_COOKIE_NAME': 'session', 'SESSION_COOKIE_DOMAIN': None, 'SESSION_COOKIE_PATH': None, 'SESSION_COOKIE_HTTPONLY': True, 'SESSION_COOKIE_SECURE': False, 'SESSION_REFRESH_EACH_REQUEST': True, 'MAX_CONTENT_LENGTH': None, 'SEND_FILE_MAX_AGE_DEFAULT': datetime.timedelta(0, 43200), 'TRAP_BAD_REQUEST_ERRORS': False, 'TRAP_HTTP_EXCEPTIONS': False, 'EXPLAIN_TEMPLATE_LOADING': False, 'PREFERRED_URL_SCHEME': 'http', 'JSON_AS_ASCII': True, 'JSON_SORT_KEYS': True, 'JSONIFY_PRETTYPRINT_REGULAR': True, 'JSONIFY_MIMETYPE': 'application/json', 'TEMPLATES_AUTO_RELOAD': None})</em><a class="headerlink" href="#flask.Flask.default_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Default configuration parameters.</p>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.dispatch_request">
<code class="descname">dispatch_request</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.dispatch_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Does the request dispatching.  Matches the URL and returns the
return value of the view or error handler.  This does not have to
be a response object.  In order to convert the return value to a
proper response object, call <a class="reference internal" href="#flask.make_response" title="flask.make_response"><code class="xref py py-func docutils literal"><span class="pre">make_response()</span></code></a>.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.7: </span>This no longer does the exception handling, this code was
moved to the new <a class="reference internal" href="#flask.Flask.full_dispatch_request" title="flask.Flask.full_dispatch_request"><code class="xref py py-meth docutils literal"><span class="pre">full_dispatch_request()</span></code></a>.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.do_teardown_appcontext">
<code class="descname">do_teardown_appcontext</code><span class="sig-paren">(</span><em>exc=&lt;object object&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.do_teardown_appcontext" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when an application context is popped.  This works pretty
much the same as <a class="reference internal" href="#flask.Flask.do_teardown_request" title="flask.Flask.do_teardown_request"><code class="xref py py-meth docutils literal"><span class="pre">do_teardown_request()</span></code></a> but for the application
context.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.9.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.do_teardown_request">
<code class="descname">do_teardown_request</code><span class="sig-paren">(</span><em>exc=&lt;object object&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.do_teardown_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Called after the actual request dispatching and will
call every as <a class="reference internal" href="#flask.Flask.teardown_request" title="flask.Flask.teardown_request"><code class="xref py py-meth docutils literal"><span class="pre">teardown_request()</span></code></a> decorated function.  This is
not actually called by the <a class="reference internal" href="#flask.Flask" title="flask.Flask"><code class="xref py py-class docutils literal"><span class="pre">Flask</span></code></a> object itself but is always
triggered when the request context is popped.  That way we have a
tighter control over certain resources under testing environments.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.9: </span>Added the <cite>exc</cite> argument.  Previously this was always using the
current exception information.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.endpoint">
<code class="descname">endpoint</code><span class="sig-paren">(</span><em>endpoint</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.endpoint" title="Permalink to this definition">¶</a></dt>
<dd><p>A decorator to register a function as an endpoint.
Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">endpoint</span><span class="p">(</span><span class="s1">&#39;example.endpoint&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;example&quot;</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>endpoint</strong> – the name of the endpoint</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.error_handler_spec">
<code class="descname">error_handler_spec</code><em class="property"> = None</em><a class="headerlink" href="#flask.Flask.error_handler_spec" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary of all registered error handlers.  The key is <code class="docutils literal"><span class="pre">None</span></code>
for error handlers active on the application, otherwise the key is
the name of the blueprint.  Each key points to another dictionary
where the key is the status code of the http exception.  The
special key <code class="docutils literal"><span class="pre">None</span></code> points to a list of tuples where the first item
is the class for the instance check and the second the error handler
function.</p>
<p>To register a error handler, use the <a class="reference internal" href="#flask.Flask.errorhandler" title="flask.Flask.errorhandler"><code class="xref py py-meth docutils literal"><span class="pre">errorhandler()</span></code></a>
decorator.</p>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.errorhandler">
<code class="descname">errorhandler</code><span class="sig-paren">(</span><em>code_or_exception</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.errorhandler" title="Permalink to this definition">¶</a></dt>
<dd><p>A decorator that is used to register a function given an
error code.  Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">errorhandler</span><span class="p">(</span><span class="mi">404</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">page_not_found</span><span class="p">(</span><span class="n">error</span><span class="p">):</span>
    <span class="k">return</span> <span class="s1">&#39;This page does not exist&#39;</span><span class="p">,</span> <span class="mi">404</span>
</pre></div>
</div>
<p>You can also register handlers for arbitrary exceptions:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">errorhandler</span><span class="p">(</span><span class="n">DatabaseError</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">special_exception_handler</span><span class="p">(</span><span class="n">error</span><span class="p">):</span>
    <span class="k">return</span> <span class="s1">&#39;Database connection failed&#39;</span><span class="p">,</span> <span class="mi">500</span>
</pre></div>
</div>
<p>You can also register a function as error handler without using
the <a class="reference internal" href="#flask.Flask.errorhandler" title="flask.Flask.errorhandler"><code class="xref py py-meth docutils literal"><span class="pre">errorhandler()</span></code></a> decorator.  The following example is
equivalent to the one above:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">page_not_found</span><span class="p">(</span><span class="n">error</span><span class="p">):</span>
    <span class="k">return</span> <span class="s1">&#39;This page does not exist&#39;</span><span class="p">,</span> <span class="mi">404</span>
<span class="n">app</span><span class="o">.</span><span class="n">error_handler_spec</span><span class="p">[</span><span class="kc">None</span><span class="p">][</span><span class="mi">404</span><span class="p">]</span> <span class="o">=</span> <span class="n">page_not_found</span>
</pre></div>
</div>
<p>Setting error handlers via assignments to <a class="reference internal" href="#flask.Flask.error_handler_spec" title="flask.Flask.error_handler_spec"><code class="xref py py-attr docutils literal"><span class="pre">error_handler_spec</span></code></a>
however is discouraged as it requires fiddling with nested dictionaries
and the special case for arbitrary exception types.</p>
<p>The first <code class="docutils literal"><span class="pre">None</span></code> refers to the active blueprint.  If the error
handler should be application wide <code class="docutils literal"><span class="pre">None</span></code> shall be used.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.7: </span>Use <a class="reference internal" href="#flask.Flask.register_error_handler" title="flask.Flask.register_error_handler"><code class="xref py py-meth docutils literal"><span class="pre">register_error_handler()</span></code></a> instead of modifying
<a class="reference internal" href="#flask.Flask.error_handler_spec" title="flask.Flask.error_handler_spec"><code class="xref py py-attr docutils literal"><span class="pre">error_handler_spec</span></code></a> directly, for application wide error
handlers.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.7: </span>One can now additionally also register custom exception types
that do not necessarily have to be a subclass of the
<a class="reference external" href="http://werkzeug.pocoo.org/docs/exceptions/#werkzeug.exceptions.HTTPException" title="(in Werkzeug v0.14-dev)"><code class="xref py py-class docutils literal"><span class="pre">HTTPException</span></code></a> class.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>code_or_exception</strong> – the code as integer for the handler, or
an arbitrary exception</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.extensions">
<code class="descname">extensions</code><em class="property"> = None</em><a class="headerlink" href="#flask.Flask.extensions" title="Permalink to this definition">¶</a></dt>
<dd><p>a place where extensions can store application specific state.  For
example this is where an extension could store database engines and
similar things.  For backwards compatibility extensions should register
themselves like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="s1">&#39;extensions&#39;</span><span class="p">):</span>
    <span class="n">app</span><span class="o">.</span><span class="n">extensions</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">app</span><span class="o">.</span><span class="n">extensions</span><span class="p">[</span><span class="s1">&#39;extensionname&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">SomeObject</span><span class="p">()</span>
</pre></div>
</div>
<p>The key must match the name of the extension module. For example in
case of a “Flask-Foo” extension in <cite>flask_foo</cite>, the key would be
<code class="docutils literal"><span class="pre">'foo'</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.7.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.full_dispatch_request">
<code class="descname">full_dispatch_request</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.full_dispatch_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Dispatches the request and on top of that performs request
pre and postprocessing as well as HTTP exception catching and
error handling.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.7.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.get_send_file_max_age">
<code class="descname">get_send_file_max_age</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.get_send_file_max_age" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides default cache_timeout for the <a class="reference internal" href="#flask.send_file" title="flask.send_file"><code class="xref py py-func docutils literal"><span class="pre">send_file()</span></code></a> functions.</p>
<p>By default, this function returns <code class="docutils literal"><span class="pre">SEND_FILE_MAX_AGE_DEFAULT</span></code> from
the configuration of <a class="reference internal" href="#flask.current_app" title="flask.current_app"><code class="xref py py-data docutils literal"><span class="pre">current_app</span></code></a>.</p>
<p>Static file functions such as <a class="reference internal" href="#flask.send_from_directory" title="flask.send_from_directory"><code class="xref py py-func docutils literal"><span class="pre">send_from_directory()</span></code></a> use this
function, and <a class="reference internal" href="#flask.send_file" title="flask.send_file"><code class="xref py py-func docutils literal"><span class="pre">send_file()</span></code></a> calls this function on
<a class="reference internal" href="#flask.current_app" title="flask.current_app"><code class="xref py py-data docutils literal"><span class="pre">current_app</span></code></a> when the given cache_timeout is <code class="docutils literal"><span class="pre">None</span></code>. If a
cache_timeout is given in <a class="reference internal" href="#flask.send_file" title="flask.send_file"><code class="xref py py-func docutils literal"><span class="pre">send_file()</span></code></a>, that timeout is used;
otherwise, this method is called.</p>
<p>This allows subclasses to change the behavior when sending files based
on the filename.  For example, to set the cache timeout for .js files
to 60 seconds:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyFlask</span><span class="p">(</span><span class="n">flask</span><span class="o">.</span><span class="n">Flask</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get_send_file_max_age</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;.js&#39;</span><span class="p">):</span>
            <span class="k">return</span> <span class="mi">60</span>
        <span class="k">return</span> <span class="n">flask</span><span class="o">.</span><span class="n">Flask</span><span class="o">.</span><span class="n">get_send_file_max_age</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.9.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.got_first_request">
<code class="descname">got_first_request</code><a class="headerlink" href="#flask.Flask.got_first_request" title="Permalink to this definition">¶</a></dt>
<dd><p>This attribute is set to <code class="docutils literal"><span class="pre">True</span></code> if the application started
handling the first request.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.8.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.handle_exception">
<code class="descname">handle_exception</code><span class="sig-paren">(</span><em>e</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.handle_exception" title="Permalink to this definition">¶</a></dt>
<dd><p>Default exception handling that kicks in when an exception
occurs that is not caught.  In debug mode the exception will
be re-raised immediately, otherwise it is logged and the handler
for a 500 internal server error is used.  If no such handler
exists, a default 500 internal server error message is displayed.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.3.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.handle_http_exception">
<code class="descname">handle_http_exception</code><span class="sig-paren">(</span><em>e</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.handle_http_exception" title="Permalink to this definition">¶</a></dt>
<dd><p>Handles an HTTP exception.  By default this will invoke the
registered error handlers and fall back to returning the
exception as response.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.3.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.handle_url_build_error">
<code class="descname">handle_url_build_error</code><span class="sig-paren">(</span><em>error</em>, <em>endpoint</em>, <em>values</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.handle_url_build_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle <code class="xref py py-class docutils literal"><span class="pre">BuildError</span></code> on <a class="reference internal" href="#flask.url_for" title="flask.url_for"><code class="xref py py-meth docutils literal"><span class="pre">url_for()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.handle_user_exception">
<code class="descname">handle_user_exception</code><span class="sig-paren">(</span><em>e</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.handle_user_exception" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called whenever an exception occurs that should be
handled.  A special case are
<code class="xref py py-class docutils literal"><span class="pre">HTTPException</span></code>s which are forwarded by
this function to the <a class="reference internal" href="#flask.Flask.handle_http_exception" title="flask.Flask.handle_http_exception"><code class="xref py py-meth docutils literal"><span class="pre">handle_http_exception()</span></code></a> method.  This
function will either return a response value or reraise the
exception with the same traceback.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.7.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.has_static_folder">
<code class="descname">has_static_folder</code><a class="headerlink" href="#flask.Flask.has_static_folder" title="Permalink to this definition">¶</a></dt>
<dd><p>This is <code class="docutils literal"><span class="pre">True</span></code> if the package bound object’s container has a
folder for static files.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.5.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.init_jinja_globals">
<code class="descname">init_jinja_globals</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.init_jinja_globals" title="Permalink to this definition">¶</a></dt>
<dd><p>Deprecated.  Used to initialize the Jinja2 globals.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.5.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.7: </span>This method is deprecated with 0.7.  Override
<a class="reference internal" href="#flask.Flask.create_jinja_environment" title="flask.Flask.create_jinja_environment"><code class="xref py py-meth docutils literal"><span class="pre">create_jinja_environment()</span></code></a> instead.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.inject_url_defaults">
<code class="descname">inject_url_defaults</code><span class="sig-paren">(</span><em>endpoint</em>, <em>values</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.inject_url_defaults" title="Permalink to this definition">¶</a></dt>
<dd><p>Injects the URL defaults for the given endpoint directly into
the values dictionary passed.  This is used internally and
automatically called on URL building.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.7.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.instance_path">
<code class="descname">instance_path</code><em class="property"> = None</em><a class="headerlink" href="#flask.Flask.instance_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Holds the path to the instance folder.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.8.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.iter_blueprints">
<code class="descname">iter_blueprints</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.iter_blueprints" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterates over all blueprints by the order they were registered.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.11.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.jinja_env">
<code class="descname">jinja_env</code><a class="headerlink" href="#flask.Flask.jinja_env" title="Permalink to this definition">¶</a></dt>
<dd><p>The Jinja2 environment used to load templates.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.jinja_environment">
<code class="descname">jinja_environment</code><a class="headerlink" href="#flask.Flask.jinja_environment" title="Permalink to this definition">¶</a></dt>
<dd><p>The class that is used for the Jinja environment.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.11.</span></p>
</div>
<p>alias of <code class="xref py py-class docutils literal"><span class="pre">Environment</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.jinja_loader">
<code class="descname">jinja_loader</code><a class="headerlink" href="#flask.Flask.jinja_loader" title="Permalink to this definition">¶</a></dt>
<dd><p>The Jinja loader for this package bound object.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.5.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.jinja_options">
<code class="descname">jinja_options</code><em class="property"> = ImmutableDict({'extensions': ['jinja2.ext.autoescape', 'jinja2.ext.with_']})</em><a class="headerlink" href="#flask.Flask.jinja_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Options that are passed directly to the Jinja2 environment.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.json_decoder">
<code class="descname">json_decoder</code><a class="headerlink" href="#flask.Flask.json_decoder" title="Permalink to this definition">¶</a></dt>
<dd><p>The JSON decoder class to use.  Defaults to <a class="reference internal" href="#flask.json.JSONDecoder" title="flask.json.JSONDecoder"><code class="xref py py-class docutils literal"><span class="pre">JSONDecoder</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.10.</span></p>
</div>
<p>alias of <code class="xref py py-class docutils literal"><span class="pre">JSONDecoder</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.json_encoder">
<code class="descname">json_encoder</code><a class="headerlink" href="#flask.Flask.json_encoder" title="Permalink to this definition">¶</a></dt>
<dd><p>The JSON encoder class to use.  Defaults to <a class="reference internal" href="#flask.json.JSONEncoder" title="flask.json.JSONEncoder"><code class="xref py py-class docutils literal"><span class="pre">JSONEncoder</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.10.</span></p>
</div>
<p>alias of <code class="xref py py-class docutils literal"><span class="pre">JSONEncoder</span></code></p>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.log_exception">
<code class="descname">log_exception</code><span class="sig-paren">(</span><em>exc_info</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.log_exception" title="Permalink to this definition">¶</a></dt>
<dd><p>Logs an exception.  This is called by <a class="reference internal" href="#flask.Flask.handle_exception" title="flask.Flask.handle_exception"><code class="xref py py-meth docutils literal"><span class="pre">handle_exception()</span></code></a>
if debugging is disabled and right before the handler is called.
The default implementation logs the exception as error on the
<a class="reference internal" href="#flask.Flask.logger" title="flask.Flask.logger"><code class="xref py py-attr docutils literal"><span class="pre">logger</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.8.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.logger">
<code class="descname">logger</code><a class="headerlink" href="#flask.Flask.logger" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">logging.Logger</span></code></a> object for this application.  The
default configuration is to log to stderr if the application is
in debug mode.  This logger can be used to (surprise) log messages.
Here some examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">app</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;A value for debugging&#39;</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;A warning occurred (</span><span class="si">%d</span><span class="s1"> apples)&#39;</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;An error occurred&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.3.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.logger_name">
<code class="descname">logger_name</code><a class="headerlink" href="#flask.Flask.logger_name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the logger to use.  By default the logger name is the
package name passed to the constructor.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.4.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.make_config">
<code class="descname">make_config</code><span class="sig-paren">(</span><em>instance_relative=False</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.make_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Used to create the config attribute by the Flask constructor.
The <cite>instance_relative</cite> parameter is passed in from the constructor
of Flask (there named <cite>instance_relative_config</cite>) and indicates if
the config should be relative to the instance path or the root path
of the application.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.8.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.make_default_options_response">
<code class="descname">make_default_options_response</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.make_default_options_response" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called to create the default <code class="docutils literal"><span class="pre">OPTIONS</span></code> response.
This can be changed through subclassing to change the default
behavior of <code class="docutils literal"><span class="pre">OPTIONS</span></code> responses.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.7.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.make_null_session">
<code class="descname">make_null_session</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.make_null_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a new instance of a missing session.  Instead of overriding
this method we recommend replacing the <a class="reference internal" href="#flask.Flask.session_interface" title="flask.Flask.session_interface"><code class="xref py py-class docutils literal"><span class="pre">session_interface</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.7.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.make_response">
<code class="descname">make_response</code><span class="sig-paren">(</span><em>rv</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.make_response" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts the return value from a view function to a real
response object that is an instance of <a class="reference internal" href="#flask.Flask.response_class" title="flask.Flask.response_class"><code class="xref py py-attr docutils literal"><span class="pre">response_class</span></code></a>.</p>
<p>The following types are allowed for <cite>rv</cite>:</p>
<table border="1" class="docutils">
<colgroup>
<col width="35%" />
<col width="65%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#flask.Flask.response_class" title="flask.Flask.response_class"><code class="xref py py-attr docutils literal"><span class="pre">response_class</span></code></a></td>
<td>the object is returned unchanged</td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">str</span></code></a></td>
<td>a response object is created with the
string as body</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-class docutils literal"><span class="pre">unicode</span></code></td>
<td>a response object is created with the
string encoded to utf-8 as body</td>
</tr>
<tr class="row-even"><td>a WSGI function</td>
<td>the function is called as WSGI application
and buffered as response object</td>
</tr>
<tr class="row-odd"><td><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">tuple</span></code></a></td>
<td>A tuple in the form <code class="docutils literal"><span class="pre">(response,</span> <span class="pre">status,</span>
<span class="pre">headers)</span></code> or <code class="docutils literal"><span class="pre">(response,</span> <span class="pre">headers)</span></code>
where <cite>response</cite> is any of the
types defined here, <cite>status</cite> is a string
or an integer and <cite>headers</cite> is a list or
a dictionary with header values.</td>
</tr>
</tbody>
</table>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>rv</strong> – the return value from the view function</td>
</tr>
</tbody>
</table>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.9: </span>Previously a tuple was interpreted as the arguments for the
response object.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.make_shell_context">
<code class="descname">make_shell_context</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.make_shell_context" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the shell context for an interactive shell for this
application.  This runs all the registered shell context
processors.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.11.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.name">
<code class="descname">name</code><a class="headerlink" href="#flask.Flask.name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the application.  This is usually the import name
with the difference that it’s guessed from the run file if the
import name is main.  This name is used as a display name when
Flask needs the name of the application.  It can be set and overridden
to change the value.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.8.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.open_instance_resource">
<code class="descname">open_instance_resource</code><span class="sig-paren">(</span><em>resource</em>, <em>mode='rb'</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.open_instance_resource" title="Permalink to this definition">¶</a></dt>
<dd><p>Opens a resource from the application’s instance folder
(<a class="reference internal" href="#flask.Flask.instance_path" title="flask.Flask.instance_path"><code class="xref py py-attr docutils literal"><span class="pre">instance_path</span></code></a>).  Otherwise works like
<a class="reference internal" href="#flask.Flask.open_resource" title="flask.Flask.open_resource"><code class="xref py py-meth docutils literal"><span class="pre">open_resource()</span></code></a>.  Instance resources can also be opened for
writing.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>resource</strong> – the name of the resource.  To access resources within
subfolders use forward slashes as separator.</li>
<li><strong>mode</strong> – resource file opening mode, default is ‘rb’.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.open_resource">
<code class="descname">open_resource</code><span class="sig-paren">(</span><em>resource</em>, <em>mode='rb'</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.open_resource" title="Permalink to this definition">¶</a></dt>
<dd><p>Opens a resource from the application’s resource folder.  To see
how this works, consider the following folder structure:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">myapplication</span><span class="o">.</span><span class="n">py</span>
<span class="o">/</span><span class="n">schema</span><span class="o">.</span><span class="n">sql</span>
<span class="o">/</span><span class="n">static</span>
    <span class="o">/</span><span class="n">style</span><span class="o">.</span><span class="n">css</span>
<span class="o">/</span><span class="n">templates</span>
    <span class="o">/</span><span class="n">layout</span><span class="o">.</span><span class="n">html</span>
    <span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">html</span>
</pre></div>
</div>
<p>If you want to open the <code class="file docutils literal"><span class="pre">schema.sql</span></code> file you would do the
following:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">open_resource</span><span class="p">(</span><span class="s1">&#39;schema.sql&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">contents</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="n">do_something_with</span><span class="p">(</span><span class="n">contents</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>resource</strong> – the name of the resource.  To access resources within
subfolders use forward slashes as separator.</li>
<li><strong>mode</strong> – resource file opening mode, default is ‘rb’.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.open_session">
<code class="descname">open_session</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.open_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates or opens a new session.  Default implementation stores all
session data in a signed cookie.  This requires that the
<a class="reference internal" href="#flask.Flask.secret_key" title="flask.Flask.secret_key"><code class="xref py py-attr docutils literal"><span class="pre">secret_key</span></code></a> is set.  Instead of overriding this method
we recommend replacing the <a class="reference internal" href="#flask.Flask.session_interface" title="flask.Flask.session_interface"><code class="xref py py-class docutils literal"><span class="pre">session_interface</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>request</strong> – an instance of <a class="reference internal" href="#flask.Flask.request_class" title="flask.Flask.request_class"><code class="xref py py-attr docutils literal"><span class="pre">request_class</span></code></a>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.permanent_session_lifetime">
<code class="descname">permanent_session_lifetime</code><a class="headerlink" href="#flask.Flask.permanent_session_lifetime" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">timedelta</span></code></a> which is used to set the expiration
date of a permanent session.  The default is 31 days which makes a
permanent session survive for roughly one month.</p>
<p>This attribute can also be configured from the config with the
<code class="docutils literal"><span class="pre">PERMANENT_SESSION_LIFETIME</span></code> configuration key.  Defaults to
<code class="docutils literal"><span class="pre">timedelta(days=31)</span></code></p>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.preprocess_request">
<code class="descname">preprocess_request</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.preprocess_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Called before the actual request dispatching and will
call each <a class="reference internal" href="#flask.Flask.before_request" title="flask.Flask.before_request"><code class="xref py py-meth docutils literal"><span class="pre">before_request()</span></code></a> decorated function, passing no
arguments.
If any of these functions returns a value, it’s handled as
if it was the return value from the view and further
request handling is stopped.</p>
<p>This also triggers the <a class="reference internal" href="#flask.Flask.url_value_preprocessor" title="flask.Flask.url_value_preprocessor"><code class="xref py py-meth docutils literal"><span class="pre">url_value_preprocessor()</span></code></a> functions before
the actual <a class="reference internal" href="#flask.Flask.before_request" title="flask.Flask.before_request"><code class="xref py py-meth docutils literal"><span class="pre">before_request()</span></code></a> functions are called.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.preserve_context_on_exception">
<code class="descname">preserve_context_on_exception</code><a class="headerlink" href="#flask.Flask.preserve_context_on_exception" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the value of the <code class="docutils literal"><span class="pre">PRESERVE_CONTEXT_ON_EXCEPTION</span></code>
configuration value in case it’s set, otherwise a sensible default
is returned.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.7.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.process_response">
<code class="descname">process_response</code><span class="sig-paren">(</span><em>response</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.process_response" title="Permalink to this definition">¶</a></dt>
<dd><p>Can be overridden in order to modify the response object
before it’s sent to the WSGI server.  By default this will
call all the <a class="reference internal" href="#flask.Flask.after_request" title="flask.Flask.after_request"><code class="xref py py-meth docutils literal"><span class="pre">after_request()</span></code></a> decorated functions.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.5: </span>As of Flask 0.5 the functions registered for after request
execution are called in reverse order of registration.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>response</strong> – a <a class="reference internal" href="#flask.Flask.response_class" title="flask.Flask.response_class"><code class="xref py py-attr docutils literal"><span class="pre">response_class</span></code></a> object.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">a new response object or the same, has to be an
instance of <a class="reference internal" href="#flask.Flask.response_class" title="flask.Flask.response_class"><code class="xref py py-attr docutils literal"><span class="pre">response_class</span></code></a>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.propagate_exceptions">
<code class="descname">propagate_exceptions</code><a class="headerlink" href="#flask.Flask.propagate_exceptions" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the value of the <code class="docutils literal"><span class="pre">PROPAGATE_EXCEPTIONS</span></code> configuration
value in case it’s set, otherwise a sensible default is returned.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.7.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.register_blueprint">
<code class="descname">register_blueprint</code><span class="sig-paren">(</span><em>blueprint</em>, <em>**options</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.register_blueprint" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers a blueprint on the application.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.7.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.register_error_handler">
<code class="descname">register_error_handler</code><span class="sig-paren">(</span><em>code_or_exception</em>, <em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.register_error_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>Alternative error attach function to the <a class="reference internal" href="#flask.Flask.errorhandler" title="flask.Flask.errorhandler"><code class="xref py py-meth docutils literal"><span class="pre">errorhandler()</span></code></a>
decorator that is more straightforward to use for non decorator
usage.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.7.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.request_class">
<code class="descname">request_class</code><a class="headerlink" href="#flask.Flask.request_class" title="Permalink to this definition">¶</a></dt>
<dd><p>The class that is used for request objects.  See <a class="reference internal" href="#flask.Request" title="flask.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a>
for more information.</p>
<p>alias of <a class="reference internal" href="#flask.Request" title="flask.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.request_context">
<code class="descname">request_context</code><span class="sig-paren">(</span><em>environ</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.request_context" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a <a class="reference internal" href="#flask.ctx.RequestContext" title="flask.ctx.RequestContext"><code class="xref py py-class docutils literal"><span class="pre">RequestContext</span></code></a> from the given
environment and binds it to the current context.  This must be used in
combination with the <code class="docutils literal"><span class="pre">with</span></code> statement because the request is only bound
to the current context for the duration of the <code class="docutils literal"><span class="pre">with</span></code> block.</p>
<p>Example usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">request_context</span><span class="p">(</span><span class="n">environ</span><span class="p">):</span>
    <span class="n">do_something_with</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
</pre></div>
</div>
<p>The object returned can also be used without the <code class="docutils literal"><span class="pre">with</span></code> statement
which is useful for working in the shell.  The example above is
doing exactly the same as this code:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ctx</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">request_context</span><span class="p">(</span><span class="n">environ</span><span class="p">)</span>
<span class="n">ctx</span><span class="o">.</span><span class="n">push</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">do_something_with</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.3: </span>Added support for non-with statement usage and <code class="docutils literal"><span class="pre">with</span></code> statement
is now passed the ctx object.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>environ</strong> – a WSGI environment</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.response_class">
<code class="descname">response_class</code><a class="headerlink" href="#flask.Flask.response_class" title="Permalink to this definition">¶</a></dt>
<dd><p>The class that is used for response objects.  See
<a class="reference internal" href="#flask.Response" title="flask.Response"><code class="xref py py-class docutils literal"><span class="pre">Response</span></code></a> for more information.</p>
<p>alias of <a class="reference internal" href="#flask.Response" title="flask.Response"><code class="xref py py-class docutils literal"><span class="pre">Response</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.route">
<code class="descname">route</code><span class="sig-paren">(</span><em>rule</em>, <em>**options</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.route" title="Permalink to this definition">¶</a></dt>
<dd><p>A decorator that is used to register a view function for a
given URL rule.  This does the same thing as <a class="reference internal" href="#flask.Flask.add_url_rule" title="flask.Flask.add_url_rule"><code class="xref py py-meth docutils literal"><span class="pre">add_url_rule()</span></code></a>
but is intended for decorator usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="s1">&#39;Hello World&#39;</span>
</pre></div>
</div>
<p>For more information refer to <a class="reference internal" href="#url-route-registrations"><span class="std std-ref">URL 路由注册</span></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>rule</strong> – the URL rule as string</li>
<li><strong>endpoint</strong> – the endpoint for the registered URL rule.  Flask
itself assumes the name of the view function as
endpoint</li>
<li><strong>options</strong> – the options to be forwarded to the underlying
<a class="reference external" href="http://werkzeug.pocoo.org/docs/routing/#werkzeug.routing.Rule" title="(in Werkzeug v0.14-dev)"><code class="xref py py-class docutils literal"><span class="pre">Rule</span></code></a> object.  A change
to Werkzeug is handling of method options.  methods
is a list of methods this rule should be limited
to (<code class="docutils literal"><span class="pre">GET</span></code>, <code class="docutils literal"><span class="pre">POST</span></code> etc.).  By default a rule
just listens for <code class="docutils literal"><span class="pre">GET</span></code> (and implicitly <code class="docutils literal"><span class="pre">HEAD</span></code>).
Starting with Flask 0.6, <code class="docutils literal"><span class="pre">OPTIONS</span></code> is implicitly
added and handled by the standard request handling.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>host=None</em>, <em>port=None</em>, <em>debug=None</em>, <em>**options</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs the application on a local development server.</p>
<p>Do not use <code class="docutils literal"><span class="pre">run()</span></code> in a production setting. It is not intended to
meet security and performance requirements for a production server.
Instead, see <a class="reference internal" href="deploying/index.html#deployment"><span class="std std-ref">部署方式</span></a> for WSGI server recommendations.</p>
<p>If the <a class="reference internal" href="#flask.Flask.debug" title="flask.Flask.debug"><code class="xref py py-attr docutils literal"><span class="pre">debug</span></code></a> flag is set the server will automatically reload
for code changes and show a debugger in case an exception happened.</p>
<p>If you want to run the application in debug mode, but disable the
code execution on the interactive debugger, you can pass
<code class="docutils literal"><span class="pre">use_evalex=False</span></code> as parameter.  This will keep the debugger’s
traceback screen active, but disable code execution.</p>
<p>It is not recommended to use this function for development with
automatic reloading as this is badly supported.  Instead you should
be using the <strong class="command">flask</strong> command line script’s <code class="docutils literal"><span class="pre">run</span></code> support.</p>
<div class="admonition-keep-in-mind admonition">
<p class="first admonition-title">Keep in Mind</p>
<p class="last">Flask will suppress any server error with a generic error page
unless it is in debug mode.  As such to enable just the
interactive debugger without the code reloading, you have to
invoke <a class="reference internal" href="#flask.Flask.run" title="flask.Flask.run"><code class="xref py py-meth docutils literal"><span class="pre">run()</span></code></a> with <code class="docutils literal"><span class="pre">debug=True</span></code> and <code class="docutils literal"><span class="pre">use_reloader=False</span></code>.
Setting <code class="docutils literal"><span class="pre">use_debugger</span></code> to <code class="docutils literal"><span class="pre">True</span></code> without being in debug mode
won’t catch any exceptions because there won’t be any to
catch.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.10: </span>The default port is now picked from the <code class="docutils literal"><span class="pre">SERVER_NAME</span></code> variable.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>host</strong> – the hostname to listen on. Set this to <code class="docutils literal"><span class="pre">'0.0.0.0'</span></code> to
have the server available externally as well. Defaults to
<code class="docutils literal"><span class="pre">'127.0.0.1'</span></code>.</li>
<li><strong>port</strong> – the port of the webserver. Defaults to <code class="docutils literal"><span class="pre">5000</span></code> or the
port defined in the <code class="docutils literal"><span class="pre">SERVER_NAME</span></code> config variable if
present.</li>
<li><strong>debug</strong> – if given, enable or disable debug mode.
See <a class="reference internal" href="#flask.Flask.debug" title="flask.Flask.debug"><code class="xref py py-attr docutils literal"><span class="pre">debug</span></code></a>.</li>
<li><strong>options</strong> – the options to be forwarded to the underlying
Werkzeug server.  See
<a class="reference external" href="http://werkzeug.pocoo.org/docs/serving/#werkzeug.serving.run_simple" title="(in Werkzeug v0.14-dev)"><code class="xref py py-func docutils literal"><span class="pre">werkzeug.serving.run_simple()</span></code></a> for more
information.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.save_session">
<code class="descname">save_session</code><span class="sig-paren">(</span><em>session</em>, <em>response</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.save_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves the session if it needs updates.  For the default
implementation, check <a class="reference internal" href="#flask.Flask.open_session" title="flask.Flask.open_session"><code class="xref py py-meth docutils literal"><span class="pre">open_session()</span></code></a>.  Instead of overriding this
method we recommend replacing the <a class="reference internal" href="#flask.Flask.session_interface" title="flask.Flask.session_interface"><code class="xref py py-class docutils literal"><span class="pre">session_interface</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>session</strong> – the session to be saved (a
<a class="reference external" href="http://werkzeug.pocoo.org/docs/contrib/securecookie/#werkzeug.contrib.securecookie.SecureCookie" title="(in Werkzeug v0.14-dev)"><code class="xref py py-class docutils literal"><span class="pre">SecureCookie</span></code></a>
object)</li>
<li><strong>response</strong> – an instance of <a class="reference internal" href="#flask.Flask.response_class" title="flask.Flask.response_class"><code class="xref py py-attr docutils literal"><span class="pre">response_class</span></code></a></li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.secret_key">
<code class="descname">secret_key</code><a class="headerlink" href="#flask.Flask.secret_key" title="Permalink to this definition">¶</a></dt>
<dd><p>If a secret key is set, cryptographic components can use this to
sign cookies and other things.  Set this to a complex random value
when you want to use the secure cookie for instance.</p>
<p>This attribute can also be configured from the config with the
<code class="docutils literal"><span class="pre">SECRET_KEY</span></code> configuration key.  Defaults to <code class="docutils literal"><span class="pre">None</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.select_jinja_autoescape">
<code class="descname">select_jinja_autoescape</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.select_jinja_autoescape" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <code class="docutils literal"><span class="pre">True</span></code> if autoescaping should be active for the given
template name. If no template name is given, returns <cite>True</cite>.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.5.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.send_file_max_age_default">
<code class="descname">send_file_max_age_default</code><a class="headerlink" href="#flask.Flask.send_file_max_age_default" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">timedelta</span></code></a> which is used as default cache_timeout
for the <a class="reference internal" href="#flask.send_file" title="flask.send_file"><code class="xref py py-func docutils literal"><span class="pre">send_file()</span></code></a> functions. The default is 12 hours.</p>
<p>This attribute can also be configured from the config with the
<code class="docutils literal"><span class="pre">SEND_FILE_MAX_AGE_DEFAULT</span></code> configuration key. This configuration
variable can also be set with an integer value used as seconds.
Defaults to <code class="docutils literal"><span class="pre">timedelta(hours=12)</span></code></p>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.send_static_file">
<code class="descname">send_static_file</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.send_static_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Function used internally to send static files from the static
folder to the browser.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.5.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.session_cookie_name">
<code class="descname">session_cookie_name</code><a class="headerlink" href="#flask.Flask.session_cookie_name" title="Permalink to this definition">¶</a></dt>
<dd><p>The secure cookie uses this for the name of the session cookie.</p>
<p>This attribute can also be configured from the config with the
<code class="docutils literal"><span class="pre">SESSION_COOKIE_NAME</span></code> configuration key.  Defaults to <code class="docutils literal"><span class="pre">'session'</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.session_interface">
<code class="descname">session_interface</code><em class="property"> = &lt;flask.sessions.SecureCookieSessionInterface object&gt;</em><a class="headerlink" href="#flask.Flask.session_interface" title="Permalink to this definition">¶</a></dt>
<dd><p>the session interface to use.  By default an instance of
<a class="reference internal" href="#flask.sessions.SecureCookieSessionInterface" title="flask.sessions.SecureCookieSessionInterface"><code class="xref py py-class docutils literal"><span class="pre">SecureCookieSessionInterface</span></code></a> is used here.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.8.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.shell_context_processor">
<code class="descname">shell_context_processor</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.shell_context_processor" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers a shell context processor function.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.11.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.shell_context_processors">
<code class="descname">shell_context_processors</code><em class="property"> = None</em><a class="headerlink" href="#flask.Flask.shell_context_processors" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of shell context processor functions that should be run
when a shell context is created.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.11.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.should_ignore_error">
<code class="descname">should_ignore_error</code><span class="sig-paren">(</span><em>error</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.should_ignore_error" title="Permalink to this definition">¶</a></dt>
<dd><p>This is called to figure out if an error should be ignored
or not as far as the teardown system is concerned.  If this
function returns <code class="docutils literal"><span class="pre">True</span></code> then the teardown handlers will not be
passed the error.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.10.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.static_folder">
<code class="descname">static_folder</code><a class="headerlink" href="#flask.Flask.static_folder" title="Permalink to this definition">¶</a></dt>
<dd><p>The absolute path to the configured static folder.</p>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.teardown_appcontext">
<code class="descname">teardown_appcontext</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.teardown_appcontext" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers a function to be called when the application context
ends.  These functions are typically also called when the request
context is popped.</p>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ctx</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">()</span>
<span class="n">ctx</span><span class="o">.</span><span class="n">push</span><span class="p">()</span>
<span class="o">...</span>
<span class="n">ctx</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</pre></div>
</div>
<p>When <code class="docutils literal"><span class="pre">ctx.pop()</span></code> is executed in the above example, the teardown
functions are called just before the app context moves from the
stack of active contexts.  This becomes relevant if you are using
such constructs in tests.</p>
<p>Since a request context typically also manages an application
context it would also be called when you pop a request context.</p>
<p>When a teardown function was called because of an exception it will
be passed an error object.</p>
<p>The return values of teardown functions are ignored.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.9.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.teardown_appcontext_funcs">
<code class="descname">teardown_appcontext_funcs</code><em class="property"> = None</em><a class="headerlink" href="#flask.Flask.teardown_appcontext_funcs" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of functions that are called when the application context
is destroyed.  Since the application context is also torn down
if the request ends this is the place to store code that disconnects
from databases.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.9.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.teardown_request">
<code class="descname">teardown_request</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.teardown_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a function to be run at the end of each request,
regardless of whether there was an exception or not.  These functions
are executed when the request context is popped, even if not an
actual request was performed.</p>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ctx</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">test_request_context</span><span class="p">()</span>
<span class="n">ctx</span><span class="o">.</span><span class="n">push</span><span class="p">()</span>
<span class="o">...</span>
<span class="n">ctx</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</pre></div>
</div>
<p>When <code class="docutils literal"><span class="pre">ctx.pop()</span></code> is executed in the above example, the teardown
functions are called just before the request context moves from the
stack of active contexts.  This becomes relevant if you are using
such constructs in tests.</p>
<p>Generally teardown functions must take every necessary step to avoid
that they will fail.  If they do execute code that might fail they
will have to surround the execution of these code by try/except
statements and log occurring errors.</p>
<p>When a teardown function was called because of a exception it will
be passed an error object.</p>
<p>The return values of teardown functions are ignored.</p>
<div class="admonition-debug-note admonition">
<p class="first admonition-title">Debug Note</p>
<p class="last">In debug mode Flask will not tear down a request on an exception
immediately.  Instead it will keep it alive so that the interactive
debugger can still access it.  This behavior can be controlled
by the <code class="docutils literal"><span class="pre">PRESERVE_CONTEXT_ON_EXCEPTION</span></code> configuration variable.</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.teardown_request_funcs">
<code class="descname">teardown_request_funcs</code><em class="property"> = None</em><a class="headerlink" href="#flask.Flask.teardown_request_funcs" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary with lists of functions that are called after
each request, even if an exception has occurred. The key of the
dictionary is the name of the blueprint this function is active for,
<code class="docutils literal"><span class="pre">None</span></code> for all requests. These functions are not allowed to modify
the request, and their return values are ignored. If an exception
occurred while processing the request, it gets passed to each
teardown_request function. To register a function here, use the
<a class="reference internal" href="#flask.Flask.teardown_request" title="flask.Flask.teardown_request"><code class="xref py py-meth docutils literal"><span class="pre">teardown_request()</span></code></a> decorator.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.7.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.template_context_processors">
<code class="descname">template_context_processors</code><em class="property"> = None</em><a class="headerlink" href="#flask.Flask.template_context_processors" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary with list of functions that are called without argument
to populate the template context.  The key of the dictionary is the
name of the blueprint this function is active for, <code class="docutils literal"><span class="pre">None</span></code> for all
requests.  Each returns a dictionary that the template context is
updated with.  To register a function here, use the
<a class="reference internal" href="#flask.Flask.context_processor" title="flask.Flask.context_processor"><code class="xref py py-meth docutils literal"><span class="pre">context_processor()</span></code></a> decorator.</p>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.template_filter">
<code class="descname">template_filter</code><span class="sig-paren">(</span><em>name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.template_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>A decorator that is used to register custom template filter.
You can specify a name for the filter, otherwise the function
name will be used. Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">template_filter</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">reverse</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">s</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> – the optional name of the filter, otherwise the
function name will be used.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.template_global">
<code class="descname">template_global</code><span class="sig-paren">(</span><em>name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.template_global" title="Permalink to this definition">¶</a></dt>
<dd><p>A decorator that is used to register a custom template global function.
You can specify a name for the global function, otherwise the function
name will be used. Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">template_global</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">double</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">return</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">n</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.10.</span></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> – the optional name of the global function, otherwise the
function name will be used.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.template_test">
<code class="descname">template_test</code><span class="sig-paren">(</span><em>name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.template_test" title="Permalink to this definition">¶</a></dt>
<dd><p>A decorator that is used to register custom template test.
You can specify a name for the test, otherwise the function
name will be used. Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">template_test</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">is_prime</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">n</span><span class="p">)))</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="kc">True</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.10.</span></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> – the optional name of the test, otherwise the
function name will be used.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.test_client">
<code class="descname">test_client</code><span class="sig-paren">(</span><em>use_cookies=True</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.test_client" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a test client for this application.  For information
about unit testing head over to <a class="reference internal" href="testing.html#testing"><span class="std std-ref">测试 Flask 应用</span></a>.</p>
<p>Note that if you are testing for assertions or exceptions in your
application code, you must set <code class="docutils literal"><span class="pre">app.testing</span> <span class="pre">=</span> <span class="pre">True</span></code> in order for the
exceptions to propagate to the test client.  Otherwise, the exception
will be handled by the application (not visible to the test client) and
the only indication of an AssertionError or other exception will be a
500 status code response to the test client.  See the <a class="reference internal" href="#flask.Flask.testing" title="flask.Flask.testing"><code class="xref py py-attr docutils literal"><span class="pre">testing</span></code></a>
attribute.  For example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">app</span><span class="o">.</span><span class="n">testing</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">test_client</span><span class="p">()</span>
</pre></div>
</div>
<p>The test client can be used in a <code class="docutils literal"><span class="pre">with</span></code> block to defer the closing down
of the context until the end of the <code class="docutils literal"><span class="pre">with</span></code> block.  This is useful if
you want to access the context locals for testing:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">test_client</span><span class="p">()</span> <span class="k">as</span> <span class="n">c</span><span class="p">:</span>
    <span class="n">rv</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/?vodka=42&#39;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">request</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="s1">&#39;vodka&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;42&#39;</span>
</pre></div>
</div>
<p>Additionally, you may pass optional keyword arguments that will then
be passed to the application’s <a class="reference internal" href="#flask.Flask.test_client_class" title="flask.Flask.test_client_class"><code class="xref py py-attr docutils literal"><span class="pre">test_client_class</span></code></a> constructor.
For example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask.testing</span> <span class="k">import</span> <span class="n">FlaskClient</span>

<span class="k">class</span> <span class="nc">CustomClient</span><span class="p">(</span><span class="n">FlaskClient</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_authentication</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;authentication&quot;</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">CustomClient</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">test_client_class</span> <span class="o">=</span> <span class="n">CustomClient</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">test_client</span><span class="p">(</span><span class="n">authentication</span><span class="o">=</span><span class="s1">&#39;Basic ....&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="#flask.testing.FlaskClient" title="flask.testing.FlaskClient"><code class="xref py py-class docutils literal"><span class="pre">FlaskClient</span></code></a> for more information.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.4: </span>added support for <code class="docutils literal"><span class="pre">with</span></code> block usage for the client.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.7: </span>The <cite>use_cookies</cite> parameter was added as well as the ability
to override the client to be used by setting the
<a class="reference internal" href="#flask.Flask.test_client_class" title="flask.Flask.test_client_class"><code class="xref py py-attr docutils literal"><span class="pre">test_client_class</span></code></a> attribute.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.11: </span>Added <cite>**kwargs</cite> to support passing additional keyword arguments to
the constructor of <a class="reference internal" href="#flask.Flask.test_client_class" title="flask.Flask.test_client_class"><code class="xref py py-attr docutils literal"><span class="pre">test_client_class</span></code></a>.</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.test_client_class">
<code class="descname">test_client_class</code><em class="property"> = None</em><a class="headerlink" href="#flask.Flask.test_client_class" title="Permalink to this definition">¶</a></dt>
<dd><p>the test client that is used with when <cite>test_client</cite> is used.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.7.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.test_request_context">
<code class="descname">test_request_context</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.test_request_context" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a WSGI environment from the given values (see
<a class="reference external" href="http://werkzeug.pocoo.org/docs/test/#werkzeug.test.EnvironBuilder" title="(in Werkzeug v0.14-dev)"><code class="xref py py-class docutils literal"><span class="pre">werkzeug.test.EnvironBuilder</span></code></a> for more information, this
function accepts the same arguments).</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.testing">
<code class="descname">testing</code><a class="headerlink" href="#flask.Flask.testing" title="Permalink to this definition">¶</a></dt>
<dd><p>The testing flag.  Set this to <code class="docutils literal"><span class="pre">True</span></code> to enable the test mode of
Flask extensions (and in the future probably also Flask itself).
For example this might activate unittest helpers that have an
additional runtime cost which should not be enabled by default.</p>
<p>If this is enabled and PROPAGATE_EXCEPTIONS is not changed from the
default it’s implicitly enabled.</p>
<p>This attribute can also be configured from the config with the
<code class="docutils literal"><span class="pre">TESTING</span></code> configuration key.  Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.trap_http_exception">
<code class="descname">trap_http_exception</code><span class="sig-paren">(</span><em>e</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.trap_http_exception" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if an HTTP exception should be trapped or not.  By default
this will return <code class="docutils literal"><span class="pre">False</span></code> for all exceptions except for a bad request
key error if <code class="docutils literal"><span class="pre">TRAP_BAD_REQUEST_ERRORS</span></code> is set to <code class="docutils literal"><span class="pre">True</span></code>.  It
also returns <code class="docutils literal"><span class="pre">True</span></code> if <code class="docutils literal"><span class="pre">TRAP_HTTP_EXCEPTIONS</span></code> is set to <code class="docutils literal"><span class="pre">True</span></code>.</p>
<p>This is called for all HTTP exceptions raised by a view function.
If it returns <code class="docutils literal"><span class="pre">True</span></code> for any exception the error handler for this
exception is not called and it shows up as regular exception in the
traceback.  This is helpful for debugging implicitly raised HTTP
exceptions.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.8.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.update_template_context">
<code class="descname">update_template_context</code><span class="sig-paren">(</span><em>context</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.update_template_context" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the template context with some commonly used variables.
This injects request, session, config and g into the template
context as well as everything template context processors want
to inject.  Note that the as of Flask 0.6, the original values
in the context will not be overridden if a context processor
decides to return a value with the same key.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>context</strong> – the context as a dictionary that is updated in place
to add extra variables.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.url_build_error_handlers">
<code class="descname">url_build_error_handlers</code><em class="property"> = None</em><a class="headerlink" href="#flask.Flask.url_build_error_handlers" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of functions that are called when <a class="reference internal" href="#flask.url_for" title="flask.url_for"><code class="xref py py-meth docutils literal"><span class="pre">url_for()</span></code></a> raises a
<code class="xref py py-exc docutils literal"><span class="pre">BuildError</span></code>.  Each function registered here
is called with <cite>error</cite>, <cite>endpoint</cite> and <cite>values</cite>.  If a function
returns <code class="docutils literal"><span class="pre">None</span></code> or raises a <code class="xref py py-exc docutils literal"><span class="pre">BuildError</span></code> the next function is
tried.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.9.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.url_default_functions">
<code class="descname">url_default_functions</code><em class="property"> = None</em><a class="headerlink" href="#flask.Flask.url_default_functions" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary with lists of functions that can be used as URL value
preprocessors.  The key <code class="docutils literal"><span class="pre">None</span></code> here is used for application wide
callbacks, otherwise the key is the name of the blueprint.
Each of these functions has the chance to modify the dictionary
of URL values before they are used as the keyword arguments of the
view function.  For each function registered this one should also
provide a <a class="reference internal" href="#flask.Flask.url_defaults" title="flask.Flask.url_defaults"><code class="xref py py-meth docutils literal"><span class="pre">url_defaults()</span></code></a> function that adds the parameters
automatically again that were removed that way.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.7.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.url_defaults">
<code class="descname">url_defaults</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.url_defaults" title="Permalink to this definition">¶</a></dt>
<dd><p>Callback function for URL defaults for all view functions of the
application.  It’s called with the endpoint and values and should
update the values passed in place.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.url_map">
<code class="descname">url_map</code><em class="property"> = None</em><a class="headerlink" href="#flask.Flask.url_map" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference external" href="http://werkzeug.pocoo.org/docs/routing/#werkzeug.routing.Map" title="(in Werkzeug v0.14-dev)"><code class="xref py py-class docutils literal"><span class="pre">Map</span></code></a> for this instance.  You can use
this to change the routing converters after the class was created
but before any routes are connected.  Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">werkzeug.routing</span> <span class="k">import</span> <span class="n">BaseConverter</span>

<span class="k">class</span> <span class="nc">ListConverter</span><span class="p">(</span><span class="n">BaseConverter</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">to_python</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">to_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">super</span><span class="p">(</span><span class="n">ListConverter</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">to_url</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">values</span><span class="p">)</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">url_map</span><span class="o">.</span><span class="n">converters</span><span class="p">[</span><span class="s1">&#39;list&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ListConverter</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.url_rule_class">
<code class="descname">url_rule_class</code><a class="headerlink" href="#flask.Flask.url_rule_class" title="Permalink to this definition">¶</a></dt>
<dd><p>The rule object to use for URL rules created.  This is used by
<a class="reference internal" href="#flask.Flask.add_url_rule" title="flask.Flask.add_url_rule"><code class="xref py py-meth docutils literal"><span class="pre">add_url_rule()</span></code></a>.  Defaults to <a class="reference external" href="http://werkzeug.pocoo.org/docs/routing/#werkzeug.routing.Rule" title="(in Werkzeug v0.14-dev)"><code class="xref py py-class docutils literal"><span class="pre">werkzeug.routing.Rule</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.7.</span></p>
</div>
<p>alias of <code class="xref py py-class docutils literal"><span class="pre">Rule</span></code></p>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.url_value_preprocessor">
<code class="descname">url_value_preprocessor</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.url_value_preprocessor" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers a function as URL value preprocessor for all view
functions of the application.  It’s called before the view functions
are called and can modify the url values provided.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.url_value_preprocessors">
<code class="descname">url_value_preprocessors</code><em class="property"> = None</em><a class="headerlink" href="#flask.Flask.url_value_preprocessors" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary with lists of functions that can be used as URL
value processor functions.  Whenever a URL is built these functions
are called to modify the dictionary of values in place.  The key
<code class="docutils literal"><span class="pre">None</span></code> here is used for application wide
callbacks, otherwise the key is the name of the blueprint.
Each of these functions has the chance to modify the dictionary</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.7.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.use_x_sendfile">
<code class="descname">use_x_sendfile</code><a class="headerlink" href="#flask.Flask.use_x_sendfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Enable this if you want to use the X-Sendfile feature.  Keep in
mind that the server has to support this.  This only affects files
sent with the <a class="reference internal" href="#flask.send_file" title="flask.send_file"><code class="xref py py-func docutils literal"><span class="pre">send_file()</span></code></a> method.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.2.</span></p>
</div>
<p>This attribute can also be configured from the config with the
<code class="docutils literal"><span class="pre">USE_X_SENDFILE</span></code> configuration key.  Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.Flask.view_functions">
<code class="descname">view_functions</code><em class="property"> = None</em><a class="headerlink" href="#flask.Flask.view_functions" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary of all view functions registered.  The keys will
be function names which are also used to generate URLs and
the values are the function objects themselves.
To register a view function, use the <a class="reference internal" href="#flask.Flask.route" title="flask.Flask.route"><code class="xref py py-meth docutils literal"><span class="pre">route()</span></code></a> decorator.</p>
</dd></dl>

<dl class="method">
<dt id="flask.Flask.wsgi_app">
<code class="descname">wsgi_app</code><span class="sig-paren">(</span><em>environ</em>, <em>start_response</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Flask.wsgi_app" title="Permalink to this definition">¶</a></dt>
<dd><p>The actual WSGI application.  This is not implemented in
<cite>__call__</cite> so that middlewares can be applied without losing a
reference to the class.  So instead of doing this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">app</span> <span class="o">=</span> <span class="n">MyMiddleware</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
</pre></div>
</div>
<p>It’s a better idea to do this instead:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">app</span><span class="o">.</span><span class="n">wsgi_app</span> <span class="o">=</span> <span class="n">MyMiddleware</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">wsgi_app</span><span class="p">)</span>
</pre></div>
</div>
<p>Then you still have the original application object around and
can continue to call methods on it.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.7: </span>The behavior of the before and after request callbacks was changed
under error conditions and a new callback was added that will
always execute at the end of the request, independent on if an
error occurred or not.  See <a class="reference internal" href="reqcontext.html#callbacks-and-errors"><span class="std std-ref">回调和错误</span></a>.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>environ</strong> – a WSGI environment</li>
<li><strong>start_response</strong> – a callable accepting a status code,
a list of headers and an optional
exception context to start the response</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id3">
<h2>蓝图对象<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="flask.Blueprint">
<em class="property">class </em><code class="descclassname">flask.</code><code class="descname">Blueprint</code><span class="sig-paren">(</span><em>name</em>, <em>import_name</em>, <em>static_folder=None</em>, <em>static_url_path=None</em>, <em>template_folder=None</em>, <em>url_prefix=None</em>, <em>subdomain=None</em>, <em>url_defaults=None</em>, <em>root_path=None</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Blueprint" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents a blueprint.  A blueprint is an object that records
functions that will be called with the
<a class="reference internal" href="#flask.blueprints.BlueprintSetupState" title="flask.blueprints.BlueprintSetupState"><code class="xref py py-class docutils literal"><span class="pre">BlueprintSetupState</span></code></a> later to register functions
or other things on the main application.  See <a class="reference internal" href="blueprints.html#blueprints"><span class="std std-ref">用蓝图实现模块化应用</span></a> for more
information.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.7.</span></p>
</div>
<dl class="method">
<dt id="flask.Blueprint.add_app_template_filter">
<code class="descname">add_app_template_filter</code><span class="sig-paren">(</span><em>f</em>, <em>name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Blueprint.add_app_template_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a custom template filter, available application wide.  Like
<a class="reference internal" href="#flask.Flask.add_template_filter" title="flask.Flask.add_template_filter"><code class="xref py py-meth docutils literal"><span class="pre">Flask.add_template_filter()</span></code></a> but for a blueprint.  Works exactly
like the <a class="reference internal" href="#flask.Blueprint.app_template_filter" title="flask.Blueprint.app_template_filter"><code class="xref py py-meth docutils literal"><span class="pre">app_template_filter()</span></code></a> decorator.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> – the optional name of the filter, otherwise the
function name will be used.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask.Blueprint.add_app_template_global">
<code class="descname">add_app_template_global</code><span class="sig-paren">(</span><em>f</em>, <em>name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Blueprint.add_app_template_global" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a custom template global, available application wide.  Like
<a class="reference internal" href="#flask.Flask.add_template_global" title="flask.Flask.add_template_global"><code class="xref py py-meth docutils literal"><span class="pre">Flask.add_template_global()</span></code></a> but for a blueprint.  Works exactly
like the <a class="reference internal" href="#flask.Blueprint.app_template_global" title="flask.Blueprint.app_template_global"><code class="xref py py-meth docutils literal"><span class="pre">app_template_global()</span></code></a> decorator.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.10.</span></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> – the optional name of the global, otherwise the
function name will be used.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask.Blueprint.add_app_template_test">
<code class="descname">add_app_template_test</code><span class="sig-paren">(</span><em>f</em>, <em>name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Blueprint.add_app_template_test" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a custom template test, available application wide.  Like
<a class="reference internal" href="#flask.Flask.add_template_test" title="flask.Flask.add_template_test"><code class="xref py py-meth docutils literal"><span class="pre">Flask.add_template_test()</span></code></a> but for a blueprint.  Works exactly
like the <a class="reference internal" href="#flask.Blueprint.app_template_test" title="flask.Blueprint.app_template_test"><code class="xref py py-meth docutils literal"><span class="pre">app_template_test()</span></code></a> decorator.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.10.</span></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> – the optional name of the test, otherwise the
function name will be used.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask.Blueprint.add_url_rule">
<code class="descname">add_url_rule</code><span class="sig-paren">(</span><em>rule</em>, <em>endpoint=None</em>, <em>view_func=None</em>, <em>**options</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Blueprint.add_url_rule" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <a class="reference internal" href="#flask.Flask.add_url_rule" title="flask.Flask.add_url_rule"><code class="xref py py-meth docutils literal"><span class="pre">Flask.add_url_rule()</span></code></a> but for a blueprint.  The endpoint for
the <a class="reference internal" href="#flask.url_for" title="flask.url_for"><code class="xref py py-func docutils literal"><span class="pre">url_for()</span></code></a> function is prefixed with the name of the blueprint.</p>
</dd></dl>

<dl class="method">
<dt id="flask.Blueprint.after_app_request">
<code class="descname">after_app_request</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Blueprint.after_app_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <a class="reference internal" href="#flask.Flask.after_request" title="flask.Flask.after_request"><code class="xref py py-meth docutils literal"><span class="pre">Flask.after_request()</span></code></a> but for a blueprint.  Such a function
is executed after each request, even if outside of the blueprint.</p>
</dd></dl>

<dl class="method">
<dt id="flask.Blueprint.after_request">
<code class="descname">after_request</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Blueprint.after_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <a class="reference internal" href="#flask.Flask.after_request" title="flask.Flask.after_request"><code class="xref py py-meth docutils literal"><span class="pre">Flask.after_request()</span></code></a> but for a blueprint.  This function
is only executed after each request that is handled by a function of
that blueprint.</p>
</dd></dl>

<dl class="method">
<dt id="flask.Blueprint.app_context_processor">
<code class="descname">app_context_processor</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Blueprint.app_context_processor" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <a class="reference internal" href="#flask.Flask.context_processor" title="flask.Flask.context_processor"><code class="xref py py-meth docutils literal"><span class="pre">Flask.context_processor()</span></code></a> but for a blueprint.  Such a
function is executed each request, even if outside of the blueprint.</p>
</dd></dl>

<dl class="method">
<dt id="flask.Blueprint.app_errorhandler">
<code class="descname">app_errorhandler</code><span class="sig-paren">(</span><em>code</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Blueprint.app_errorhandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <a class="reference internal" href="#flask.Flask.errorhandler" title="flask.Flask.errorhandler"><code class="xref py py-meth docutils literal"><span class="pre">Flask.errorhandler()</span></code></a> but for a blueprint.  This
handler is used for all requests, even if outside of the blueprint.</p>
</dd></dl>

<dl class="method">
<dt id="flask.Blueprint.app_template_filter">
<code class="descname">app_template_filter</code><span class="sig-paren">(</span><em>name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Blueprint.app_template_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a custom template filter, available application wide.  Like
<a class="reference internal" href="#flask.Flask.template_filter" title="flask.Flask.template_filter"><code class="xref py py-meth docutils literal"><span class="pre">Flask.template_filter()</span></code></a> but for a blueprint.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> – the optional name of the filter, otherwise the
function name will be used.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask.Blueprint.app_template_global">
<code class="descname">app_template_global</code><span class="sig-paren">(</span><em>name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Blueprint.app_template_global" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a custom template global, available application wide.  Like
<a class="reference internal" href="#flask.Flask.template_global" title="flask.Flask.template_global"><code class="xref py py-meth docutils literal"><span class="pre">Flask.template_global()</span></code></a> but for a blueprint.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.10.</span></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> – the optional name of the global, otherwise the
function name will be used.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask.Blueprint.app_template_test">
<code class="descname">app_template_test</code><span class="sig-paren">(</span><em>name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Blueprint.app_template_test" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a custom template test, available application wide.  Like
<a class="reference internal" href="#flask.Flask.template_test" title="flask.Flask.template_test"><code class="xref py py-meth docutils literal"><span class="pre">Flask.template_test()</span></code></a> but for a blueprint.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.10.</span></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> – the optional name of the test, otherwise the
function name will be used.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask.Blueprint.app_url_defaults">
<code class="descname">app_url_defaults</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Blueprint.app_url_defaults" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as <a class="reference internal" href="#flask.Blueprint.url_defaults" title="flask.Blueprint.url_defaults"><code class="xref py py-meth docutils literal"><span class="pre">url_defaults()</span></code></a> but application wide.</p>
</dd></dl>

<dl class="method">
<dt id="flask.Blueprint.app_url_value_preprocessor">
<code class="descname">app_url_value_preprocessor</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Blueprint.app_url_value_preprocessor" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as <a class="reference internal" href="#flask.Blueprint.url_value_preprocessor" title="flask.Blueprint.url_value_preprocessor"><code class="xref py py-meth docutils literal"><span class="pre">url_value_preprocessor()</span></code></a> but application wide.</p>
</dd></dl>

<dl class="method">
<dt id="flask.Blueprint.before_app_first_request">
<code class="descname">before_app_first_request</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Blueprint.before_app_first_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <a class="reference internal" href="#flask.Flask.before_first_request" title="flask.Flask.before_first_request"><code class="xref py py-meth docutils literal"><span class="pre">Flask.before_first_request()</span></code></a>.  Such a function is
executed before the first request to the application.</p>
</dd></dl>

<dl class="method">
<dt id="flask.Blueprint.before_app_request">
<code class="descname">before_app_request</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Blueprint.before_app_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <a class="reference internal" href="#flask.Flask.before_request" title="flask.Flask.before_request"><code class="xref py py-meth docutils literal"><span class="pre">Flask.before_request()</span></code></a>.  Such a function is executed
before each request, even if outside of a blueprint.</p>
</dd></dl>

<dl class="method">
<dt id="flask.Blueprint.before_request">
<code class="descname">before_request</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Blueprint.before_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <a class="reference internal" href="#flask.Flask.before_request" title="flask.Flask.before_request"><code class="xref py py-meth docutils literal"><span class="pre">Flask.before_request()</span></code></a> but for a blueprint.  This function
is only executed before each request that is handled by a function of
that blueprint.</p>
</dd></dl>

<dl class="method">
<dt id="flask.Blueprint.context_processor">
<code class="descname">context_processor</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Blueprint.context_processor" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <a class="reference internal" href="#flask.Flask.context_processor" title="flask.Flask.context_processor"><code class="xref py py-meth docutils literal"><span class="pre">Flask.context_processor()</span></code></a> but for a blueprint.  This
function is only executed for requests handled by a blueprint.</p>
</dd></dl>

<dl class="method">
<dt id="flask.Blueprint.endpoint">
<code class="descname">endpoint</code><span class="sig-paren">(</span><em>endpoint</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Blueprint.endpoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <a class="reference internal" href="#flask.Flask.endpoint" title="flask.Flask.endpoint"><code class="xref py py-meth docutils literal"><span class="pre">Flask.endpoint()</span></code></a> but for a blueprint.  This does not
prefix the endpoint with the blueprint name, this has to be done
explicitly by the user of this method.  If the endpoint is prefixed
with a <cite>.</cite> it will be registered to the current blueprint, otherwise
it’s an application independent endpoint.</p>
</dd></dl>

<dl class="method">
<dt id="flask.Blueprint.errorhandler">
<code class="descname">errorhandler</code><span class="sig-paren">(</span><em>code_or_exception</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Blueprint.errorhandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers an error handler that becomes active for this blueprint
only.  Please be aware that routing does not happen local to a
blueprint so an error handler for 404 usually is not handled by
a blueprint unless it is caused inside a view function.  Another
special case is the 500 internal server error which is always looked
up from the application.</p>
<p>Otherwise works as the <a class="reference internal" href="#flask.Flask.errorhandler" title="flask.Flask.errorhandler"><code class="xref py py-meth docutils literal"><span class="pre">errorhandler()</span></code></a> decorator
of the <a class="reference internal" href="#flask.Flask" title="flask.Flask"><code class="xref py py-class docutils literal"><span class="pre">Flask</span></code></a> object.</p>
</dd></dl>

<dl class="method">
<dt id="flask.Blueprint.get_send_file_max_age">
<code class="descname">get_send_file_max_age</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Blueprint.get_send_file_max_age" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides default cache_timeout for the <a class="reference internal" href="#flask.send_file" title="flask.send_file"><code class="xref py py-func docutils literal"><span class="pre">send_file()</span></code></a> functions.</p>
<p>By default, this function returns <code class="docutils literal"><span class="pre">SEND_FILE_MAX_AGE_DEFAULT</span></code> from
the configuration of <a class="reference internal" href="#flask.current_app" title="flask.current_app"><code class="xref py py-data docutils literal"><span class="pre">current_app</span></code></a>.</p>
<p>Static file functions such as <a class="reference internal" href="#flask.send_from_directory" title="flask.send_from_directory"><code class="xref py py-func docutils literal"><span class="pre">send_from_directory()</span></code></a> use this
function, and <a class="reference internal" href="#flask.send_file" title="flask.send_file"><code class="xref py py-func docutils literal"><span class="pre">send_file()</span></code></a> calls this function on
<a class="reference internal" href="#flask.current_app" title="flask.current_app"><code class="xref py py-data docutils literal"><span class="pre">current_app</span></code></a> when the given cache_timeout is <code class="docutils literal"><span class="pre">None</span></code>. If a
cache_timeout is given in <a class="reference internal" href="#flask.send_file" title="flask.send_file"><code class="xref py py-func docutils literal"><span class="pre">send_file()</span></code></a>, that timeout is used;
otherwise, this method is called.</p>
<p>This allows subclasses to change the behavior when sending files based
on the filename.  For example, to set the cache timeout for .js files
to 60 seconds:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyFlask</span><span class="p">(</span><span class="n">flask</span><span class="o">.</span><span class="n">Flask</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get_send_file_max_age</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;.js&#39;</span><span class="p">):</span>
            <span class="k">return</span> <span class="mi">60</span>
        <span class="k">return</span> <span class="n">flask</span><span class="o">.</span><span class="n">Flask</span><span class="o">.</span><span class="n">get_send_file_max_age</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.9.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask.Blueprint.has_static_folder">
<code class="descname">has_static_folder</code><a class="headerlink" href="#flask.Blueprint.has_static_folder" title="Permalink to this definition">¶</a></dt>
<dd><p>This is <code class="docutils literal"><span class="pre">True</span></code> if the package bound object’s container has a
folder for static files.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.5.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask.Blueprint.jinja_loader">
<code class="descname">jinja_loader</code><a class="headerlink" href="#flask.Blueprint.jinja_loader" title="Permalink to this definition">¶</a></dt>
<dd><p>The Jinja loader for this package bound object.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.5.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="flask.Blueprint.make_setup_state">
<code class="descname">make_setup_state</code><span class="sig-paren">(</span><em>app</em>, <em>options</em>, <em>first_registration=False</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Blueprint.make_setup_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an instance of <a class="reference internal" href="#flask.blueprints.BlueprintSetupState" title="flask.blueprints.BlueprintSetupState"><code class="xref py py-meth docutils literal"><span class="pre">BlueprintSetupState()</span></code></a>
object that is later passed to the register callback functions.
Subclasses can override this to return a subclass of the setup state.</p>
</dd></dl>

<dl class="method">
<dt id="flask.Blueprint.open_resource">
<code class="descname">open_resource</code><span class="sig-paren">(</span><em>resource</em>, <em>mode='rb'</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Blueprint.open_resource" title="Permalink to this definition">¶</a></dt>
<dd><p>Opens a resource from the application’s resource folder.  To see
how this works, consider the following folder structure:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">myapplication</span><span class="o">.</span><span class="n">py</span>
<span class="o">/</span><span class="n">schema</span><span class="o">.</span><span class="n">sql</span>
<span class="o">/</span><span class="n">static</span>
    <span class="o">/</span><span class="n">style</span><span class="o">.</span><span class="n">css</span>
<span class="o">/</span><span class="n">templates</span>
    <span class="o">/</span><span class="n">layout</span><span class="o">.</span><span class="n">html</span>
    <span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">html</span>
</pre></div>
</div>
<p>If you want to open the <code class="file docutils literal"><span class="pre">schema.sql</span></code> file you would do the
following:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">open_resource</span><span class="p">(</span><span class="s1">&#39;schema.sql&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">contents</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="n">do_something_with</span><span class="p">(</span><span class="n">contents</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>resource</strong> – the name of the resource.  To access resources within
subfolders use forward slashes as separator.</li>
<li><strong>mode</strong> – resource file opening mode, default is ‘rb’.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask.Blueprint.record">
<code class="descname">record</code><span class="sig-paren">(</span><em>func</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Blueprint.record" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers a function that is called when the blueprint is
registered on the application.  This function is called with the
state as argument as returned by the <a class="reference internal" href="#flask.Blueprint.make_setup_state" title="flask.Blueprint.make_setup_state"><code class="xref py py-meth docutils literal"><span class="pre">make_setup_state()</span></code></a>
method.</p>
</dd></dl>

<dl class="method">
<dt id="flask.Blueprint.record_once">
<code class="descname">record_once</code><span class="sig-paren">(</span><em>func</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Blueprint.record_once" title="Permalink to this definition">¶</a></dt>
<dd><p>Works like <a class="reference internal" href="#flask.Blueprint.record" title="flask.Blueprint.record"><code class="xref py py-meth docutils literal"><span class="pre">record()</span></code></a> but wraps the function in another
function that will ensure the function is only called once.  If the
blueprint is registered a second time on the application, the
function passed is not called.</p>
</dd></dl>

<dl class="method">
<dt id="flask.Blueprint.register">
<code class="descname">register</code><span class="sig-paren">(</span><em>app</em>, <em>options</em>, <em>first_registration=False</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Blueprint.register" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by <a class="reference internal" href="#flask.Flask.register_blueprint" title="flask.Flask.register_blueprint"><code class="xref py py-meth docutils literal"><span class="pre">Flask.register_blueprint()</span></code></a> to register a blueprint
on the application.  This can be overridden to customize the register
behavior.  Keyword arguments from
<a class="reference internal" href="#flask.Flask.register_blueprint" title="flask.Flask.register_blueprint"><code class="xref py py-func docutils literal"><span class="pre">register_blueprint()</span></code></a> are directly forwarded to this
method in the <cite>options</cite> dictionary.</p>
</dd></dl>

<dl class="method">
<dt id="flask.Blueprint.register_error_handler">
<code class="descname">register_error_handler</code><span class="sig-paren">(</span><em>code_or_exception</em>, <em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Blueprint.register_error_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>Non-decorator version of the <a class="reference internal" href="#flask.Blueprint.errorhandler" title="flask.Blueprint.errorhandler"><code class="xref py py-meth docutils literal"><span class="pre">errorhandler()</span></code></a> error attach
function, akin to the <a class="reference internal" href="#flask.Flask.register_error_handler" title="flask.Flask.register_error_handler"><code class="xref py py-meth docutils literal"><span class="pre">register_error_handler()</span></code></a>
application-wide function of the <a class="reference internal" href="#flask.Flask" title="flask.Flask"><code class="xref py py-class docutils literal"><span class="pre">Flask</span></code></a> object but
for error handlers limited to this blueprint.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.11.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="flask.Blueprint.route">
<code class="descname">route</code><span class="sig-paren">(</span><em>rule</em>, <em>**options</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Blueprint.route" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <a class="reference internal" href="#flask.Flask.route" title="flask.Flask.route"><code class="xref py py-meth docutils literal"><span class="pre">Flask.route()</span></code></a> but for a blueprint.  The endpoint for the
<a class="reference internal" href="#flask.url_for" title="flask.url_for"><code class="xref py py-func docutils literal"><span class="pre">url_for()</span></code></a> function is prefixed with the name of the blueprint.</p>
</dd></dl>

<dl class="method">
<dt id="flask.Blueprint.send_static_file">
<code class="descname">send_static_file</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Blueprint.send_static_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Function used internally to send static files from the static
folder to the browser.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.5.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask.Blueprint.static_folder">
<code class="descname">static_folder</code><a class="headerlink" href="#flask.Blueprint.static_folder" title="Permalink to this definition">¶</a></dt>
<dd><p>The absolute path to the configured static folder.</p>
</dd></dl>

<dl class="method">
<dt id="flask.Blueprint.teardown_app_request">
<code class="descname">teardown_app_request</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Blueprint.teardown_app_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <a class="reference internal" href="#flask.Flask.teardown_request" title="flask.Flask.teardown_request"><code class="xref py py-meth docutils literal"><span class="pre">Flask.teardown_request()</span></code></a> but for a blueprint.  Such a
function is executed when tearing down each request, even if outside of
the blueprint.</p>
</dd></dl>

<dl class="method">
<dt id="flask.Blueprint.teardown_request">
<code class="descname">teardown_request</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Blueprint.teardown_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <a class="reference internal" href="#flask.Flask.teardown_request" title="flask.Flask.teardown_request"><code class="xref py py-meth docutils literal"><span class="pre">Flask.teardown_request()</span></code></a> but for a blueprint.  This
function is only executed when tearing down requests handled by a
function of that blueprint.  Teardown request functions are executed
when the request context is popped, even when no actual request was
performed.</p>
</dd></dl>

<dl class="method">
<dt id="flask.Blueprint.url_defaults">
<code class="descname">url_defaults</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Blueprint.url_defaults" title="Permalink to this definition">¶</a></dt>
<dd><p>Callback function for URL defaults for this blueprint.  It’s called
with the endpoint and values and should update the values passed
in place.</p>
</dd></dl>

<dl class="method">
<dt id="flask.Blueprint.url_value_preprocessor">
<code class="descname">url_value_preprocessor</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Blueprint.url_value_preprocessor" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers a function as URL value preprocessor for this
blueprint.  It’s called before the view functions are called and
can modify the url values provided.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id4">
<h2>传入请求数据<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="flask.Request">
<em class="property">class </em><code class="descclassname">flask.</code><code class="descname">Request</code><span class="sig-paren">(</span><em>environ</em>, <em>populate_request=True</em>, <em>shallow=False</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Request" title="Permalink to this definition">¶</a></dt>
<dd><p>The request object used by default in Flask.  Remembers the
matched endpoint and view arguments.</p>
<p>It is what ends up as <a class="reference internal" href="#flask.request" title="flask.request"><code class="xref py py-class docutils literal"><span class="pre">request</span></code></a>.  If you want to replace
the request object used you can subclass this and set
<a class="reference internal" href="#flask.Flask.request_class" title="flask.Flask.request_class"><code class="xref py py-attr docutils literal"><span class="pre">request_class</span></code></a> to your subclass.</p>
<p>The request object is a <a class="reference external" href="http://werkzeug.pocoo.org/docs/wrappers/#werkzeug.wrappers.Request" title="(in Werkzeug v0.14-dev)"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a> subclass and
provides all of the attributes Werkzeug defines plus a few Flask
specific ones.</p>
<dl class="attribute">
<dt id="flask.Request.form">
<code class="descname">form</code><a class="headerlink" href="#flask.Request.form" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference external" href="http://werkzeug.pocoo.org/docs/datastructures/#werkzeug.datastructures.MultiDict" title="(in Werkzeug v0.14-dev)"><code class="xref py py-class docutils literal"><span class="pre">MultiDict</span></code></a> with the parsed form data from <cite>POST</cite>
or <cite>PUT</cite> requests.  Please keep in mind that file uploads will not
end up here,  but instead in the <a class="reference internal" href="#flask.Request.files" title="flask.Request.files"><code class="xref py py-attr docutils literal"><span class="pre">files</span></code></a> attribute.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.Request.args">
<code class="descname">args</code><a class="headerlink" href="#flask.Request.args" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference external" href="http://werkzeug.pocoo.org/docs/datastructures/#werkzeug.datastructures.MultiDict" title="(in Werkzeug v0.14-dev)"><code class="xref py py-class docutils literal"><span class="pre">MultiDict</span></code></a> with the parsed contents of the query
string.  (The part in the URL after the question mark).</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.Request.values">
<code class="descname">values</code><a class="headerlink" href="#flask.Request.values" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference external" href="http://werkzeug.pocoo.org/docs/datastructures/#werkzeug.datastructures.CombinedMultiDict" title="(in Werkzeug v0.14-dev)"><code class="xref py py-class docutils literal"><span class="pre">CombinedMultiDict</span></code></a> with the contents of both
<a class="reference internal" href="#flask.Request.form" title="flask.Request.form"><code class="xref py py-attr docutils literal"><span class="pre">form</span></code></a> and <a class="reference internal" href="#flask.Request.args" title="flask.Request.args"><code class="xref py py-attr docutils literal"><span class="pre">args</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.Request.cookies">
<code class="descname">cookies</code><a class="headerlink" href="#flask.Request.cookies" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">dict</span></code></a> with the contents of all cookies transmitted with
the request.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.Request.stream">
<code class="descname">stream</code><a class="headerlink" href="#flask.Request.stream" title="Permalink to this definition">¶</a></dt>
<dd><p>If the incoming form data was not encoded with a known mimetype
the data is stored unmodified in this stream for consumption.  Most
of the time it is a better idea to use <a class="reference internal" href="#flask.Request.data" title="flask.Request.data"><code class="xref py py-attr docutils literal"><span class="pre">data</span></code></a> which will give
you that data as a string.  The stream only returns the data once.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.Request.headers">
<code class="descname">headers</code><a class="headerlink" href="#flask.Request.headers" title="Permalink to this definition">¶</a></dt>
<dd><p>The incoming request headers as a dictionary like object.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.Request.data">
<code class="descname">data</code><a class="headerlink" href="#flask.Request.data" title="Permalink to this definition">¶</a></dt>
<dd><p>Contains the incoming request data as string in case it came with
a mimetype Flask does not handle.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.Request.files">
<code class="descname">files</code><a class="headerlink" href="#flask.Request.files" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference external" href="http://werkzeug.pocoo.org/docs/datastructures/#werkzeug.datastructures.MultiDict" title="(in Werkzeug v0.14-dev)"><code class="xref py py-class docutils literal"><span class="pre">MultiDict</span></code></a> with files uploaded as part of a
<cite>POST</cite> or <cite>PUT</cite> request.  Each file is stored as
<a class="reference external" href="http://werkzeug.pocoo.org/docs/datastructures/#werkzeug.datastructures.FileStorage" title="(in Werkzeug v0.14-dev)"><code class="xref py py-class docutils literal"><span class="pre">FileStorage</span></code></a> object.  It basically behaves like a
standard file object you know from Python, with the difference that
it also has a <a class="reference external" href="http://werkzeug.pocoo.org/docs/datastructures/#werkzeug.datastructures.FileStorage.save" title="(in Werkzeug v0.14-dev)"><code class="xref py py-meth docutils literal"><span class="pre">save()</span></code></a> function that can
store the file on the filesystem.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.Request.environ">
<code class="descname">environ</code><a class="headerlink" href="#flask.Request.environ" title="Permalink to this definition">¶</a></dt>
<dd><p>The underlying WSGI environment.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.Request.method">
<code class="descname">method</code><a class="headerlink" href="#flask.Request.method" title="Permalink to this definition">¶</a></dt>
<dd><p>The current request method (<code class="docutils literal"><span class="pre">POST</span></code>, <code class="docutils literal"><span class="pre">GET</span></code> etc.)</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.Request.path">
<code class="descname">path</code><a class="headerlink" href="#flask.Request.path" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="flask.Request.script_root">
<code class="descname">script_root</code><a class="headerlink" href="#flask.Request.script_root" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="flask.Request.url">
<code class="descname">url</code><a class="headerlink" href="#flask.Request.url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="flask.Request.base_url">
<code class="descname">base_url</code><a class="headerlink" href="#flask.Request.base_url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="flask.Request.url_root">
<code class="descname">url_root</code><a class="headerlink" href="#flask.Request.url_root" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides different ways to look at the current URL.  Imagine your
application is listening on the following URL:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">myapplication</span>
</pre></div>
</div>
<p>And a user requests the following URL:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>http://www.example.com/myapplication/page.html?x=y
</pre></div>
</div>
<p>In this case the values of the above mentioned attributes would be
the following:</p>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="81%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><cite>path</cite></td>
<td><code class="docutils literal"><span class="pre">/page.html</span></code></td>
</tr>
<tr class="row-even"><td><cite>script_root</cite></td>
<td><code class="docutils literal"><span class="pre">/myapplication</span></code></td>
</tr>
<tr class="row-odd"><td><cite>base_url</cite></td>
<td><code class="docutils literal"><span class="pre">http://www.example.com/myapplication/page.html</span></code></td>
</tr>
<tr class="row-even"><td><cite>url</cite></td>
<td><code class="docutils literal"><span class="pre">http://www.example.com/myapplication/page.html?x=y</span></code></td>
</tr>
<tr class="row-odd"><td><cite>url_root</cite></td>
<td><code class="docutils literal"><span class="pre">http://www.example.com/myapplication/</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="flask.Request.is_xhr">
<code class="descname">is_xhr</code><a class="headerlink" href="#flask.Request.is_xhr" title="Permalink to this definition">¶</a></dt>
<dd><p><cite>True</cite> if the request was triggered via a JavaScript
<cite>XMLHttpRequest</cite>. This only works with libraries that support the
<code class="docutils literal"><span class="pre">X-Requested-With</span></code> header and set it to <cite>XMLHttpRequest</cite>.
Libraries that do that are prototype, jQuery and Mochikit and
probably some more.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.Request.blueprint">
<code class="descname">blueprint</code><a class="headerlink" href="#flask.Request.blueprint" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the current blueprint</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.Request.endpoint">
<code class="descname">endpoint</code><a class="headerlink" href="#flask.Request.endpoint" title="Permalink to this definition">¶</a></dt>
<dd><p>The endpoint that matched the request.  This in combination with
<a class="reference internal" href="#flask.Request.view_args" title="flask.Request.view_args"><code class="xref py py-attr docutils literal"><span class="pre">view_args</span></code></a> can be used to reconstruct the same or a
modified URL.  If an exception happened when matching, this will
be <code class="docutils literal"><span class="pre">None</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="flask.Request.get_json">
<code class="descname">get_json</code><span class="sig-paren">(</span><em>force=False</em>, <em>silent=False</em>, <em>cache=True</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Request.get_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses the incoming JSON request data and returns it.  By default
this function will return <code class="docutils literal"><span class="pre">None</span></code> if the mimetype is not
<em class="mimetype">application/json</em> but this can be overridden by the
<code class="docutils literal"><span class="pre">force</span></code> parameter. If parsing fails the
<a class="reference internal" href="#flask.Request.on_json_loading_failed" title="flask.Request.on_json_loading_failed"><code class="xref py py-meth docutils literal"><span class="pre">on_json_loading_failed()</span></code></a> method on the request object will be
invoked.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>force</strong> – if set to <code class="docutils literal"><span class="pre">True</span></code> the mimetype is ignored.</li>
<li><strong>silent</strong> – if set to <code class="docutils literal"><span class="pre">True</span></code> this method will fail silently
and return <code class="docutils literal"><span class="pre">None</span></code>.</li>
<li><strong>cache</strong> – if set to <code class="docutils literal"><span class="pre">True</span></code> the parsed JSON data is remembered
on the request.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="flask.Request.is_json">
<code class="descname">is_json</code><a class="headerlink" href="#flask.Request.is_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates if this request is JSON or not.  By default a request
is considered to include JSON data if the mimetype is
<em class="mimetype">application/json</em> or <em class="mimetype">application/*+json</em>.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.11.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask.Request.json">
<code class="descname">json</code><a class="headerlink" href="#flask.Request.json" title="Permalink to this definition">¶</a></dt>
<dd><p>If the mimetype is <em class="mimetype">application/json</em> this will contain the
parsed JSON data.  Otherwise this will be <code class="docutils literal"><span class="pre">None</span></code>.</p>
<p>The <a class="reference internal" href="#flask.Request.get_json" title="flask.Request.get_json"><code class="xref py py-meth docutils literal"><span class="pre">get_json()</span></code></a> method should be used instead.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.Request.max_content_length">
<code class="descname">max_content_length</code><a class="headerlink" href="#flask.Request.max_content_length" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-only view of the <code class="docutils literal"><span class="pre">MAX_CONTENT_LENGTH</span></code> config key.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.Request.module">
<code class="descname">module</code><a class="headerlink" href="#flask.Request.module" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the current module if the request was dispatched
to an actual module.  This is deprecated functionality, use blueprints
instead.</p>
</dd></dl>

<dl class="method">
<dt id="flask.Request.on_json_loading_failed">
<code class="descname">on_json_loading_failed</code><span class="sig-paren">(</span><em>e</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Request.on_json_loading_failed" title="Permalink to this definition">¶</a></dt>
<dd><p>Called if decoding of the JSON data failed.  The return value of
this method is used by <a class="reference internal" href="#flask.Request.get_json" title="flask.Request.get_json"><code class="xref py py-meth docutils literal"><span class="pre">get_json()</span></code></a> when an error occurred.  The
default implementation just raises a <code class="xref py py-class docutils literal"><span class="pre">BadRequest</span></code> exception.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.10: </span>Removed buggy previous behavior of generating a random JSON
response.  If you want that behavior back you can trivially
add it by subclassing.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.8.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask.Request.routing_exception">
<code class="descname">routing_exception</code><em class="property"> = None</em><a class="headerlink" href="#flask.Request.routing_exception" title="Permalink to this definition">¶</a></dt>
<dd><p>If matching the URL failed, this is the exception that will be
raised / was raised as part of the request handling.  This is
usually a <a class="reference external" href="http://werkzeug.pocoo.org/docs/exceptions/#werkzeug.exceptions.NotFound" title="(in Werkzeug v0.14-dev)"><code class="xref py py-exc docutils literal"><span class="pre">NotFound</span></code></a> exception or
something similar.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.Request.url_rule">
<code class="descname">url_rule</code><em class="property"> = None</em><a class="headerlink" href="#flask.Request.url_rule" title="Permalink to this definition">¶</a></dt>
<dd><p>The internal URL rule that matched the request.  This can be
useful to inspect which methods are allowed for the URL from
a before/after handler (<code class="docutils literal"><span class="pre">request.url_rule.methods</span></code>) etc.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.6.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask.Request.view_args">
<code class="descname">view_args</code><em class="property"> = None</em><a class="headerlink" href="#flask.Request.view_args" title="Permalink to this definition">¶</a></dt>
<dd><p>A dict of view arguments that matched the request.  If an exception
happened when matching, this will be <code class="docutils literal"><span class="pre">None</span></code>.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="flask.request">
<em class="property">class </em><code class="descclassname">flask.</code><code class="descname">request</code><a class="headerlink" href="#flask.request" title="Permalink to this definition">¶</a></dt>
<dd><p>To access incoming request data, you can use the global <cite>request</cite>
object.  Flask parses incoming request data for you and gives you
access to it through that global object.  Internally Flask makes
sure that you always get the correct data for the active thread if you
are in a multithreaded environment.</p>
<p>This is a proxy.  See <a class="reference internal" href="reqcontext.html#notes-on-proxies"><span class="std std-ref">代理注意事项</span></a> for more information.</p>
<p>The request object is an instance of a <a class="reference external" href="http://werkzeug.pocoo.org/docs/wrappers/#werkzeug.wrappers.Request" title="(in Werkzeug v0.14-dev)"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a>
subclass and provides all of the attributes Werkzeug defines.  This
just shows a quick overview of the most important ones.</p>
</dd></dl>

</div>
<div class="section" id="id5">
<h2>响应对象<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="flask.Response">
<em class="property">class </em><code class="descclassname">flask.</code><code class="descname">Response</code><span class="sig-paren">(</span><em>response=None</em>, <em>status=None</em>, <em>headers=None</em>, <em>mimetype=None</em>, <em>content_type=None</em>, <em>direct_passthrough=False</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Response" title="Permalink to this definition">¶</a></dt>
<dd><p>The response object that is used by default in Flask.  Works like the
response object from Werkzeug but is set to have an HTML mimetype by
default.  Quite often you don’t have to create this object yourself because
<a class="reference internal" href="#flask.Flask.make_response" title="flask.Flask.make_response"><code class="xref py py-meth docutils literal"><span class="pre">make_response()</span></code></a> will take care of that for you.</p>
<p>If you want to replace the response object used you can subclass this and
set <a class="reference internal" href="#flask.Flask.response_class" title="flask.Flask.response_class"><code class="xref py py-attr docutils literal"><span class="pre">response_class</span></code></a> to your subclass.</p>
<dl class="attribute">
<dt id="flask.Response.headers">
<code class="descname">headers</code><a class="headerlink" href="#flask.Response.headers" title="Permalink to this definition">¶</a></dt>
<dd><p>A <code class="xref py py-class docutils literal"><span class="pre">Headers</span></code> object representing the response headers.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.Response.status">
<code class="descname">status</code><a class="headerlink" href="#flask.Response.status" title="Permalink to this definition">¶</a></dt>
<dd><p>A string with a response status.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.Response.status_code">
<code class="descname">status_code</code><a class="headerlink" href="#flask.Response.status_code" title="Permalink to this definition">¶</a></dt>
<dd><p>The response status as integer.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.Response.data">
<code class="descname">data</code><a class="headerlink" href="#flask.Response.data" title="Permalink to this definition">¶</a></dt>
<dd><p>A descriptor that calls <code class="xref py py-meth docutils literal"><span class="pre">get_data()</span></code> and <code class="xref py py-meth docutils literal"><span class="pre">set_data()</span></code>.  This
should not be used and will eventually get deprecated.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.Response.mimetype">
<code class="descname">mimetype</code><a class="headerlink" href="#flask.Response.mimetype" title="Permalink to this definition">¶</a></dt>
<dd><p>The mimetype (content type without charset etc.)</p>
</dd></dl>

<dl class="method">
<dt id="flask.Response.set_cookie">
<code class="descname">set_cookie</code><span class="sig-paren">(</span><em>key</em>, <em>value=''</em>, <em>max_age=None</em>, <em>expires=None</em>, <em>path='/'</em>, <em>domain=None</em>, <em>secure=False</em>, <em>httponly=False</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Response.set_cookie" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets a cookie. The parameters are the same as in the cookie <cite>Morsel</cite>
object in the Python standard library but it accepts unicode data, too.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>key</strong> – the key (name) of the cookie to be set.</li>
<li><strong>value</strong> – the value of the cookie.</li>
<li><strong>max_age</strong> – should be a number of seconds, or <cite>None</cite> (default) if
the cookie should last only as long as the client’s
browser session.</li>
<li><strong>expires</strong> – should be a <cite>datetime</cite> object or UNIX timestamp.</li>
<li><strong>path</strong> – limits the cookie to a given path, per default it will
span the whole domain.</li>
<li><strong>domain</strong> – if you want to set a cross-domain cookie.  For example,
<code class="docutils literal"><span class="pre">domain=&quot;.example.com&quot;</span></code> will set a cookie that is
readable by the domain <code class="docutils literal"><span class="pre">www.example.com</span></code>,
<code class="docutils literal"><span class="pre">foo.example.com</span></code> etc.  Otherwise, a cookie will only
be readable by the domain that set it.</li>
<li><strong>secure</strong> – If <cite>True</cite>, the cookie will only be available via HTTPS</li>
<li><strong>httponly</strong> – disallow JavaScript to access the cookie.  This is an
extension to the cookie standard and probably not
supported by all browsers.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id6">
<h2>会话<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<p>If you have the <a class="reference internal" href="#flask.Flask.secret_key" title="flask.Flask.secret_key"><code class="xref py py-attr docutils literal"><span class="pre">Flask.secret_key</span></code></a> set you can use sessions in Flask
applications.  A session basically makes it possible to remember
information from one request to another.  The way Flask does this is by
using a signed cookie.  So the user can look at the session contents, but
not modify it unless they know the secret key, so make sure to set that
to something complex and unguessable.</p>
<p>To access the current session you can use the <a class="reference internal" href="#flask.session" title="flask.session"><code class="xref py py-class docutils literal"><span class="pre">session</span></code></a> object:</p>
<dl class="class">
<dt id="flask.session">
<em class="property">class </em><code class="descclassname">flask.</code><code class="descname">session</code><a class="headerlink" href="#flask.session" title="Permalink to this definition">¶</a></dt>
<dd><p>The session object works pretty much like an ordinary dict, with the
difference that it keeps track on modifications.</p>
<p>This is a proxy.  See <a class="reference internal" href="reqcontext.html#notes-on-proxies"><span class="std std-ref">代理注意事项</span></a> for more information.</p>
<p>The following attributes are interesting:</p>
<dl class="attribute">
<dt id="flask.session.new">
<code class="descname">new</code><a class="headerlink" href="#flask.session.new" title="Permalink to this definition">¶</a></dt>
<dd><p><cite>True</cite> if the session is new, <cite>False</cite> otherwise.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.session.modified">
<code class="descname">modified</code><a class="headerlink" href="#flask.session.modified" title="Permalink to this definition">¶</a></dt>
<dd><p><cite>True</cite> if the session object detected a modification.  Be advised
that modifications on mutable structures are not picked up
automatically, in that situation you have to explicitly set the
attribute to <cite>True</cite> yourself.  Here an example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># this change is not picked up because a mutable object (here</span>
<span class="c1"># a list) is changed.</span>
<span class="n">session</span><span class="p">[</span><span class="s1">&#39;objects&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
<span class="c1"># so mark it as modified yourself</span>
<span class="n">session</span><span class="o">.</span><span class="n">modified</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="flask.session.permanent">
<code class="descname">permanent</code><a class="headerlink" href="#flask.session.permanent" title="Permalink to this definition">¶</a></dt>
<dd><p>If set to <cite>True</cite> the session lives for
<a class="reference internal" href="#flask.Flask.permanent_session_lifetime" title="flask.Flask.permanent_session_lifetime"><code class="xref py py-attr docutils literal"><span class="pre">permanent_session_lifetime</span></code></a> seconds.  The
default is 31 days.  If set to <cite>False</cite> (which is the default) the
session will be deleted when the user closes the browser.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id7">
<h2>会话接口<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.8.</span></p>
</div>
<p>The session interface provides a simple way to replace the session
implementation that Flask is using.</p>
<dl class="class">
<dt id="flask.sessions.SessionInterface">
<em class="property">class </em><code class="descclassname">flask.sessions.</code><code class="descname">SessionInterface</code><a class="headerlink" href="#flask.sessions.SessionInterface" title="Permalink to this definition">¶</a></dt>
<dd><p>The basic interface you have to implement in order to replace the
default session interface which uses werkzeug’s securecookie
implementation.  The only methods you have to implement are
<a class="reference internal" href="#flask.sessions.SessionInterface.open_session" title="flask.sessions.SessionInterface.open_session"><code class="xref py py-meth docutils literal"><span class="pre">open_session()</span></code></a> and <a class="reference internal" href="#flask.sessions.SessionInterface.save_session" title="flask.sessions.SessionInterface.save_session"><code class="xref py py-meth docutils literal"><span class="pre">save_session()</span></code></a>, the others have
useful defaults which you don’t need to change.</p>
<p>The session object returned by the <a class="reference internal" href="#flask.sessions.SessionInterface.open_session" title="flask.sessions.SessionInterface.open_session"><code class="xref py py-meth docutils literal"><span class="pre">open_session()</span></code></a> method has to
provide a dictionary like interface plus the properties and methods
from the <a class="reference internal" href="#flask.sessions.SessionMixin" title="flask.sessions.SessionMixin"><code class="xref py py-class docutils literal"><span class="pre">SessionMixin</span></code></a>.  We recommend just subclassing a dict
and adding that mixin:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Session</span><span class="p">(</span><span class="nb">dict</span><span class="p">,</span> <span class="n">SessionMixin</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>If <a class="reference internal" href="#flask.sessions.SessionInterface.open_session" title="flask.sessions.SessionInterface.open_session"><code class="xref py py-meth docutils literal"><span class="pre">open_session()</span></code></a> returns <code class="docutils literal"><span class="pre">None</span></code> Flask will call into
<a class="reference internal" href="#flask.sessions.SessionInterface.make_null_session" title="flask.sessions.SessionInterface.make_null_session"><code class="xref py py-meth docutils literal"><span class="pre">make_null_session()</span></code></a> to create a session that acts as replacement
if the session support cannot work because some requirement is not
fulfilled.  The default <a class="reference internal" href="#flask.sessions.NullSession" title="flask.sessions.NullSession"><code class="xref py py-class docutils literal"><span class="pre">NullSession</span></code></a> class that is created
will complain that the secret key was not set.</p>
<p>To replace the session interface on an application all you have to do
is to assign <a class="reference internal" href="#flask.Flask.session_interface" title="flask.Flask.session_interface"><code class="xref py py-attr docutils literal"><span class="pre">flask.Flask.session_interface</span></code></a>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">session_interface</span> <span class="o">=</span> <span class="n">MySessionInterface</span><span class="p">()</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.8.</span></p>
</div>
<dl class="method">
<dt id="flask.sessions.SessionInterface.get_cookie_domain">
<code class="descname">get_cookie_domain</code><span class="sig-paren">(</span><em>app</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.sessions.SessionInterface.get_cookie_domain" title="Permalink to this definition">¶</a></dt>
<dd><p>Helpful helper method that returns the cookie domain that should
be used for the session cookie if session cookies are used.</p>
</dd></dl>

<dl class="method">
<dt id="flask.sessions.SessionInterface.get_cookie_httponly">
<code class="descname">get_cookie_httponly</code><span class="sig-paren">(</span><em>app</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.sessions.SessionInterface.get_cookie_httponly" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if the session cookie should be httponly.  This
currently just returns the value of the <code class="docutils literal"><span class="pre">SESSION_COOKIE_HTTPONLY</span></code>
config var.</p>
</dd></dl>

<dl class="method">
<dt id="flask.sessions.SessionInterface.get_cookie_path">
<code class="descname">get_cookie_path</code><span class="sig-paren">(</span><em>app</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.sessions.SessionInterface.get_cookie_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the path for which the cookie should be valid.  The
default implementation uses the value from the <code class="docutils literal"><span class="pre">SESSION_COOKIE_PATH</span></code>
config var if it’s set, and falls back to <code class="docutils literal"><span class="pre">APPLICATION_ROOT</span></code> or
uses <code class="docutils literal"><span class="pre">/</span></code> if it’s <code class="docutils literal"><span class="pre">None</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="flask.sessions.SessionInterface.get_cookie_secure">
<code class="descname">get_cookie_secure</code><span class="sig-paren">(</span><em>app</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.sessions.SessionInterface.get_cookie_secure" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if the cookie should be secure.  This currently
just returns the value of the <code class="docutils literal"><span class="pre">SESSION_COOKIE_SECURE</span></code> setting.</p>
</dd></dl>

<dl class="method">
<dt id="flask.sessions.SessionInterface.get_expiration_time">
<code class="descname">get_expiration_time</code><span class="sig-paren">(</span><em>app</em>, <em>session</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.sessions.SessionInterface.get_expiration_time" title="Permalink to this definition">¶</a></dt>
<dd><p>A helper method that returns an expiration date for the session
or <code class="docutils literal"><span class="pre">None</span></code> if the session is linked to the browser session.  The
default implementation returns now + the permanent session
lifetime configured on the application.</p>
</dd></dl>

<dl class="method">
<dt id="flask.sessions.SessionInterface.is_null_session">
<code class="descname">is_null_session</code><span class="sig-paren">(</span><em>obj</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.sessions.SessionInterface.is_null_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if a given object is a null session.  Null sessions are
not asked to be saved.</p>
<p>This checks if the object is an instance of <a class="reference internal" href="#flask.sessions.SessionInterface.null_session_class" title="flask.sessions.SessionInterface.null_session_class"><code class="xref py py-attr docutils literal"><span class="pre">null_session_class</span></code></a>
by default.</p>
</dd></dl>

<dl class="method">
<dt id="flask.sessions.SessionInterface.make_null_session">
<code class="descname">make_null_session</code><span class="sig-paren">(</span><em>app</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.sessions.SessionInterface.make_null_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a null session which acts as a replacement object if the
real session support could not be loaded due to a configuration
error.  This mainly aids the user experience because the job of the
null session is to still support lookup without complaining but
modifications are answered with a helpful error message of what
failed.</p>
<p>This creates an instance of <a class="reference internal" href="#flask.sessions.SessionInterface.null_session_class" title="flask.sessions.SessionInterface.null_session_class"><code class="xref py py-attr docutils literal"><span class="pre">null_session_class</span></code></a> by default.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.sessions.SessionInterface.null_session_class">
<code class="descname">null_session_class</code><a class="headerlink" href="#flask.sessions.SessionInterface.null_session_class" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#flask.sessions.SessionInterface.make_null_session" title="flask.sessions.SessionInterface.make_null_session"><code class="xref py py-meth docutils literal"><span class="pre">make_null_session()</span></code></a> will look here for the class that should
be created when a null session is requested.  Likewise the
<a class="reference internal" href="#flask.sessions.SessionInterface.is_null_session" title="flask.sessions.SessionInterface.is_null_session"><code class="xref py py-meth docutils literal"><span class="pre">is_null_session()</span></code></a> method will perform a typecheck against
this type.</p>
<p>alias of <a class="reference internal" href="#flask.sessions.NullSession" title="flask.sessions.NullSession"><code class="xref py py-class docutils literal"><span class="pre">NullSession</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="flask.sessions.SessionInterface.open_session">
<code class="descname">open_session</code><span class="sig-paren">(</span><em>app</em>, <em>request</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.sessions.SessionInterface.open_session" title="Permalink to this definition">¶</a></dt>
<dd><p>This method has to be implemented and must either return <code class="docutils literal"><span class="pre">None</span></code>
in case the loading failed because of a configuration error or an
instance of a session object which implements a dictionary like
interface + the methods and attributes on <a class="reference internal" href="#flask.sessions.SessionMixin" title="flask.sessions.SessionMixin"><code class="xref py py-class docutils literal"><span class="pre">SessionMixin</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.sessions.SessionInterface.pickle_based">
<code class="descname">pickle_based</code><em class="property"> = False</em><a class="headerlink" href="#flask.sessions.SessionInterface.pickle_based" title="Permalink to this definition">¶</a></dt>
<dd><p>A flag that indicates if the session interface is pickle based.
This can be used by Flask extensions to make a decision in regards
to how to deal with the session object.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.10.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="flask.sessions.SessionInterface.save_session">
<code class="descname">save_session</code><span class="sig-paren">(</span><em>app</em>, <em>session</em>, <em>response</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.sessions.SessionInterface.save_session" title="Permalink to this definition">¶</a></dt>
<dd><p>This is called for actual sessions returned by <a class="reference internal" href="#flask.sessions.SessionInterface.open_session" title="flask.sessions.SessionInterface.open_session"><code class="xref py py-meth docutils literal"><span class="pre">open_session()</span></code></a>
at the end of the request.  This is still called during a request
context so if you absolutely need access to the request you can do
that.</p>
</dd></dl>

<dl class="method">
<dt id="flask.sessions.SessionInterface.should_set_cookie">
<code class="descname">should_set_cookie</code><span class="sig-paren">(</span><em>app</em>, <em>session</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.sessions.SessionInterface.should_set_cookie" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates whether a cookie should be set now or not.  This is
used by session backends to figure out if they should emit a
set-cookie header or not.  The default behavior is controlled by
the <code class="docutils literal"><span class="pre">SESSION_REFRESH_EACH_REQUEST</span></code> config variable.  If
it’s set to <code class="docutils literal"><span class="pre">False</span></code> then a cookie is only set if the session is
modified, if set to <code class="docutils literal"><span class="pre">True</span></code> it’s always set if the session is
permanent.</p>
<p>This check is usually skipped if sessions get deleted.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.11.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="flask.sessions.SecureCookieSessionInterface">
<em class="property">class </em><code class="descclassname">flask.sessions.</code><code class="descname">SecureCookieSessionInterface</code><a class="headerlink" href="#flask.sessions.SecureCookieSessionInterface" title="Permalink to this definition">¶</a></dt>
<dd><p>The default session interface that stores sessions in signed cookies
through the <a class="reference external" href="https://pythonhosted.org/itsdangerous/index.html#module-itsdangerous" title="(in itsdangerous v1.0)"><code class="xref py py-mod docutils literal"><span class="pre">itsdangerous</span></code></a> module.</p>
<dl class="staticmethod">
<dt id="flask.sessions.SecureCookieSessionInterface.digest_method">
<em class="property">static </em><code class="descname">digest_method</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#flask.sessions.SecureCookieSessionInterface.digest_method" title="Permalink to this definition">¶</a></dt>
<dd><p>the hash function to use for the signature.  The default is sha1</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.sessions.SecureCookieSessionInterface.key_derivation">
<code class="descname">key_derivation</code><em class="property"> = 'hmac'</em><a class="headerlink" href="#flask.sessions.SecureCookieSessionInterface.key_derivation" title="Permalink to this definition">¶</a></dt>
<dd><p>the name of the itsdangerous supported key derivation.  The default
is hmac.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.sessions.SecureCookieSessionInterface.salt">
<code class="descname">salt</code><em class="property"> = 'cookie-session'</em><a class="headerlink" href="#flask.sessions.SecureCookieSessionInterface.salt" title="Permalink to this definition">¶</a></dt>
<dd><p>the salt that should be applied on top of the secret key for the
signing of cookie based sessions.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.sessions.SecureCookieSessionInterface.serializer">
<code class="descname">serializer</code><em class="property"> = &lt;flask.sessions.TaggedJSONSerializer object&gt;</em><a class="headerlink" href="#flask.sessions.SecureCookieSessionInterface.serializer" title="Permalink to this definition">¶</a></dt>
<dd><p>A python serializer for the payload.  The default is a compact
JSON derived serializer with support for some extra Python types
such as datetime objects or tuples.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.sessions.SecureCookieSessionInterface.session_class">
<code class="descname">session_class</code><a class="headerlink" href="#flask.sessions.SecureCookieSessionInterface.session_class" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#flask.sessions.SecureCookieSession" title="flask.sessions.SecureCookieSession"><code class="xref py py-class docutils literal"><span class="pre">SecureCookieSession</span></code></a></p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="flask.sessions.SecureCookieSession">
<em class="property">class </em><code class="descclassname">flask.sessions.</code><code class="descname">SecureCookieSession</code><span class="sig-paren">(</span><em>initial=None</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.sessions.SecureCookieSession" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for sessions based on signed cookies.</p>
</dd></dl>

<dl class="class">
<dt id="flask.sessions.NullSession">
<em class="property">class </em><code class="descclassname">flask.sessions.</code><code class="descname">NullSession</code><span class="sig-paren">(</span><em>initial=None</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.sessions.NullSession" title="Permalink to this definition">¶</a></dt>
<dd><p>Class used to generate nicer error messages if sessions are not
available.  Will still allow read-only access to the empty session
but fail on setting.</p>
</dd></dl>

<dl class="class">
<dt id="flask.sessions.SessionMixin">
<em class="property">class </em><code class="descclassname">flask.sessions.</code><code class="descname">SessionMixin</code><a class="headerlink" href="#flask.sessions.SessionMixin" title="Permalink to this definition">¶</a></dt>
<dd><p>Expands a basic dictionary with an accessors that are expected
by Flask extensions and users for the session.</p>
<dl class="attribute">
<dt id="flask.sessions.SessionMixin.modified">
<code class="descname">modified</code><em class="property"> = True</em><a class="headerlink" href="#flask.sessions.SessionMixin.modified" title="Permalink to this definition">¶</a></dt>
<dd><p>for some backends this will always be <code class="docutils literal"><span class="pre">True</span></code>, but some backends will
default this to false and detect changes in the dictionary for as
long as changes do not happen on mutable structures in the session.
The default mixin implementation just hardcodes <code class="docutils literal"><span class="pre">True</span></code> in.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.sessions.SessionMixin.new">
<code class="descname">new</code><em class="property"> = False</em><a class="headerlink" href="#flask.sessions.SessionMixin.new" title="Permalink to this definition">¶</a></dt>
<dd><p>some session backends can tell you if a session is new, but that is
not necessarily guaranteed.  Use with caution.  The default mixin
implementation just hardcodes <code class="docutils literal"><span class="pre">False</span></code> in.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.sessions.SessionMixin.permanent">
<code class="descname">permanent</code><a class="headerlink" href="#flask.sessions.SessionMixin.permanent" title="Permalink to this definition">¶</a></dt>
<dd><p>this reflects the <code class="docutils literal"><span class="pre">'_permanent'</span></code> key in the dict.</p>
</dd></dl>

</dd></dl>

<dl class="data">
<dt id="flask.sessions.session_json_serializer">
<code class="descclassname">flask.sessions.</code><code class="descname">session_json_serializer</code><em class="property"> = &lt;flask.sessions.TaggedJSONSerializer object&gt;</em><a class="headerlink" href="#flask.sessions.session_json_serializer" title="Permalink to this definition">¶</a></dt>
<dd><p>A customized JSON serializer that supports a few extra types that
we take for granted when serializing (tuples, markup objects, datetime).</p>
<p>This object provides dumping and loading methods similar to simplejson
but it also tags certain builtin Python objects that commonly appear in
sessions.  Currently the following extended values are supported in
the JSON it dumps:</p>
<ul class="simple">
<li><code class="xref py py-class docutils literal"><span class="pre">Markup</span></code> objects</li>
<li><a class="reference external" href="https://docs.python.org/3/library/uuid.html#uuid.UUID" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">UUID</span></code></a> objects</li>
<li><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">datetime</span></code></a> objects</li>
<li><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">tuple</span></code></a>s</li>
</ul>
</dd></dl>

<div class="admonition-notice admonition">
<p class="first admonition-title">Notice</p>
<p class="last">The <code class="docutils literal"><span class="pre">PERMANENT_SESSION_LIFETIME</span></code> config key can also be an integer
starting with Flask 0.8.  Either catch this down yourself or use
the <a class="reference internal" href="#flask.Flask.permanent_session_lifetime" title="flask.Flask.permanent_session_lifetime"><code class="xref py py-attr docutils literal"><span class="pre">permanent_session_lifetime</span></code></a> attribute on the
app which converts the result to an integer automatically.</p>
</div>
</div>
<div class="section" id="id8">
<h2>测试客户端<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="flask.testing.FlaskClient">
<em class="property">class </em><code class="descclassname">flask.testing.</code><code class="descname">FlaskClient</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.testing.FlaskClient" title="Permalink to this definition">¶</a></dt>
<dd><p>Works like a regular Werkzeug test client but has some knowledge about
how Flask works to defer the cleanup of the request context stack to the
end of a <code class="docutils literal"><span class="pre">with</span></code> body when used in a <code class="docutils literal"><span class="pre">with</span></code> statement.  For general
information about how to use this class refer to
<a class="reference external" href="http://werkzeug.pocoo.org/docs/test/#werkzeug.test.Client" title="(in Werkzeug v0.14-dev)"><code class="xref py py-class docutils literal"><span class="pre">werkzeug.test.Client</span></code></a>.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.12: </span><cite>app.test_client()</cite> includes preset default environment, which can be
set after instantiation of the <cite>app.test_client()</cite> object in
<cite>client.environ_base</cite>.</p>
</div>
<p>Basic usage is outlined in the <a class="reference internal" href="testing.html#testing"><span class="std std-ref">测试 Flask 应用</span></a> chapter.</p>
<dl class="method">
<dt id="flask.testing.FlaskClient.session_transaction">
<code class="descname">session_transaction</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.testing.FlaskClient.session_transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>When used in combination with a <code class="docutils literal"><span class="pre">with</span></code> statement this opens a
session transaction.  This can be used to modify the session that
the test client uses.  Once the <code class="docutils literal"><span class="pre">with</span></code> block is left the session is
stored back.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">client</span><span class="o">.</span><span class="n">session_transaction</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
    <span class="n">session</span><span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">42</span>
</pre></div>
</div>
<p>Internally this is implemented by going through a temporary test
request context and since session handling could depend on
request variables this function accepts the same arguments as
<a class="reference internal" href="#flask.Flask.test_request_context" title="flask.Flask.test_request_context"><code class="xref py py-meth docutils literal"><span class="pre">test_request_context()</span></code></a> which are directly
passed through.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id9">
<h2>应用全局变量<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h2>
<p>To share data that is valid for one request only from one function to
another, a global variable is not good enough because it would break in
threaded environments.  Flask provides you with a special object that
ensures it is only valid for the active request and that will return
different values for each request.  In a nutshell: it does the right
thing, like it does for <a class="reference internal" href="#flask.request" title="flask.request"><code class="xref py py-class docutils literal"><span class="pre">request</span></code></a> and <a class="reference internal" href="#flask.session" title="flask.session"><code class="xref py py-class docutils literal"><span class="pre">session</span></code></a>.</p>
<dl class="data">
<dt id="flask.g">
<code class="descclassname">flask.</code><code class="descname">g</code><a class="headerlink" href="#flask.g" title="Permalink to this definition">¶</a></dt>
<dd><p>Just store on this whatever you want.  For example a database
connection or the user that is currently logged in.</p>
<p>Starting with Flask 0.10 this is stored on the application context and
no longer on the request context which means it becomes available if
only the application context is bound and not yet a request.  This
is especially useful when combined with the <span class="xref std std-ref">faking-resources</span>
pattern for testing.</p>
<p>Additionally as of 0.10 you can use the <code class="xref py py-meth docutils literal"><span class="pre">get()</span></code> method to
get an attribute or <cite>None</cite> (or the second argument) if it’s not set.
These two usages are now equivalent:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">user</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">flask</span><span class="o">.</span><span class="n">g</span><span class="p">,</span> <span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<span class="n">user</span> <span class="o">=</span> <span class="n">flask</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
<p>It’s now also possible to use the <code class="docutils literal"><span class="pre">in</span></code> operator on it to see if an
attribute is defined and it yields all keys on iteration.</p>
<p>This is a proxy.  See <a class="reference internal" href="reqcontext.html#notes-on-proxies"><span class="std std-ref">代理注意事项</span></a> for more information.</p>
</dd></dl>

</div>
<div class="section" id="id10">
<h2>有用的函数和类<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h2>
<dl class="data">
<dt id="flask.current_app">
<code class="descclassname">flask.</code><code class="descname">current_app</code><a class="headerlink" href="#flask.current_app" title="Permalink to this definition">¶</a></dt>
<dd><p>Points to the application handling the request.  This is useful for
extensions that want to support multiple applications running side
by side.  This is powered by the application context and not by the
request context, so you can change the value of this proxy by
using the <a class="reference internal" href="#flask.Flask.app_context" title="flask.Flask.app_context"><code class="xref py py-meth docutils literal"><span class="pre">app_context()</span></code></a> method.</p>
<p>This is a proxy.  See <a class="reference internal" href="reqcontext.html#notes-on-proxies"><span class="std std-ref">代理注意事项</span></a> for more information.</p>
</dd></dl>

<dl class="function">
<dt id="flask.has_request_context">
<code class="descclassname">flask.</code><code class="descname">has_request_context</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#flask.has_request_context" title="Permalink to this definition">¶</a></dt>
<dd><p>If you have code that wants to test if a request context is there or
not this function can be used.  For instance, you may want to take advantage
of request information if the request object is available, but fail
silently if it is unavailable.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">remote_addr</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">username</span> <span class="o">=</span> <span class="n">username</span>
        <span class="k">if</span> <span class="n">remote_addr</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">has_request_context</span><span class="p">():</span>
            <span class="n">remote_addr</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">remote_addr</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remote_addr</span> <span class="o">=</span> <span class="n">remote_addr</span>
</pre></div>
</div>
<p>Alternatively you can also just test any of the context bound objects
(such as <a class="reference internal" href="#flask.request" title="flask.request"><code class="xref py py-class docutils literal"><span class="pre">request</span></code></a> or <a class="reference internal" href="#flask.g" title="flask.g"><code class="xref py py-class docutils literal"><span class="pre">g</span></code></a> for truthness):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">remote_addr</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">username</span> <span class="o">=</span> <span class="n">username</span>
        <span class="k">if</span> <span class="n">remote_addr</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">request</span><span class="p">:</span>
            <span class="n">remote_addr</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">remote_addr</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remote_addr</span> <span class="o">=</span> <span class="n">remote_addr</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.7.</span></p>
</div>
</dd></dl>

<dl class="function">
<dt id="flask.copy_current_request_context">
<code class="descclassname">flask.</code><code class="descname">copy_current_request_context</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.copy_current_request_context" title="Permalink to this definition">¶</a></dt>
<dd><p>A helper function that decorates a function to retain the current
request context.  This is useful when working with greenlets.  The moment
the function is decorated a copy of the request context is created and
then pushed when the function is called.</p>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">gevent</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="k">import</span> <span class="n">copy_current_request_context</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="nd">@copy_current_request_context</span>
    <span class="k">def</span> <span class="nf">do_some_work</span><span class="p">():</span>
        <span class="c1"># do some work here, it can access flask.request like you</span>
        <span class="c1"># would otherwise in the view function.</span>
        <span class="o">...</span>
    <span class="n">gevent</span><span class="o">.</span><span class="n">spawn</span><span class="p">(</span><span class="n">do_some_work</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;Regular response&#39;</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.10.</span></p>
</div>
</dd></dl>

<dl class="function">
<dt id="flask.has_app_context">
<code class="descclassname">flask.</code><code class="descname">has_app_context</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#flask.has_app_context" title="Permalink to this definition">¶</a></dt>
<dd><p>Works like <a class="reference internal" href="#flask.has_request_context" title="flask.has_request_context"><code class="xref py py-func docutils literal"><span class="pre">has_request_context()</span></code></a> but for the application
context.  You can also just do a boolean check on the
<a class="reference internal" href="#flask.current_app" title="flask.current_app"><code class="xref py py-data docutils literal"><span class="pre">current_app</span></code></a> object instead.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.9.</span></p>
</div>
</dd></dl>

<dl class="function">
<dt id="flask.url_for">
<code class="descclassname">flask.</code><code class="descname">url_for</code><span class="sig-paren">(</span><em>endpoint</em>, <em>**values</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.url_for" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a URL to the given endpoint with the method provided.</p>
<p>Variable arguments that are unknown to the target endpoint are appended
to the generated URL as query arguments.  If the value of a query argument
is <code class="docutils literal"><span class="pre">None</span></code>, the whole pair is skipped.  In case blueprints are active
you can shortcut references to the same blueprint by prefixing the
local endpoint with a dot (<code class="docutils literal"><span class="pre">.</span></code>).</p>
<p>This will reference the index function local to the current blueprint:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;.index&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>For more information, head over to the <a class="reference internal" href="quickstart.html#url-building"><span class="std std-ref">Quickstart</span></a>.</p>
<p>To integrate applications, <a class="reference internal" href="#flask.Flask" title="flask.Flask"><code class="xref py py-class docutils literal"><span class="pre">Flask</span></code></a> has a hook to intercept URL build
errors through <a class="reference internal" href="#flask.Flask.url_build_error_handlers" title="flask.Flask.url_build_error_handlers"><code class="xref py py-attr docutils literal"><span class="pre">Flask.url_build_error_handlers</span></code></a>.  The <cite>url_for</cite>
function results in a <code class="xref py py-exc docutils literal"><span class="pre">BuildError</span></code> when the current
app does not have a URL for the given endpoint and values.  When it does, the
<a class="reference internal" href="#flask.current_app" title="flask.current_app"><code class="xref py py-data docutils literal"><span class="pre">current_app</span></code></a> calls its <a class="reference internal" href="#flask.Flask.url_build_error_handlers" title="flask.Flask.url_build_error_handlers"><code class="xref py py-attr docutils literal"><span class="pre">url_build_error_handlers</span></code></a> if
it is not <code class="docutils literal"><span class="pre">None</span></code>, which can return a string to use as the result of
<cite>url_for</cite> (instead of <cite>url_for</cite>’s default to raise the
<code class="xref py py-exc docutils literal"><span class="pre">BuildError</span></code> exception) or re-raise the exception.
An example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">external_url_handler</span><span class="p">(</span><span class="n">error</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
    <span class="s2">&quot;Looks up an external URL when `url_for` cannot build a URL.&quot;</span>
    <span class="c1"># This is an example of hooking the build_error_handler.</span>
    <span class="c1"># Here, lookup_url is some utility function you&#39;ve built</span>
    <span class="c1"># which looks up the endpoint in some external URL registry.</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">lookup_url</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="o">**</span><span class="n">values</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">url</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># External lookup did not have a URL.</span>
        <span class="c1"># Re-raise the BuildError, in context of original traceback.</span>
        <span class="n">exc_type</span><span class="p">,</span> <span class="n">exc_value</span><span class="p">,</span> <span class="n">tb</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">exc_value</span> <span class="ow">is</span> <span class="n">error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">exc_type</span><span class="p">,</span> <span class="n">exc_value</span><span class="p">,</span> <span class="n">tb</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">error</span>
    <span class="c1"># url_for will use this result, instead of raising BuildError.</span>
    <span class="k">return</span> <span class="n">url</span>

<span class="n">app</span><span class="o">.</span><span class="n">url_build_error_handlers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">external_url_handler</span><span class="p">)</span>
</pre></div>
</div>
<p>Here, <cite>error</cite> is the instance of <code class="xref py py-exc docutils literal"><span class="pre">BuildError</span></code>, and
<cite>endpoint</cite> and <cite>values</cite> are the arguments passed into <cite>url_for</cite>.  Note
that this is for building URLs outside the current application, and not for
handling 404 NotFound errors.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.10: </span>The <cite>_scheme</cite> parameter was added.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.9: </span>The <cite>_anchor</cite> and <cite>_method</cite> parameters were added.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.9: </span>Calls <code class="xref py py-meth docutils literal"><span class="pre">Flask.handle_build_error()</span></code> on
<code class="xref py py-exc docutils literal"><span class="pre">BuildError</span></code>.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>endpoint</strong> – the endpoint of the URL (name of the function)</li>
<li><strong>values</strong> – the variable arguments of the URL rule</li>
<li><strong>_external</strong> – if set to <code class="docutils literal"><span class="pre">True</span></code>, an absolute URL is generated. Server
address can be changed via <code class="docutils literal"><span class="pre">SERVER_NAME</span></code> configuration variable which
defaults to <cite>localhost</cite>.</li>
<li><strong>_scheme</strong> – a string specifying the desired URL scheme. The <cite>_external</cite>
parameter must be set to <code class="docutils literal"><span class="pre">True</span></code> or a <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.6)"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code></a> is raised. The default
behavior uses the same scheme as the current request, or
<code class="docutils literal"><span class="pre">PREFERRED_URL_SCHEME</span></code> from the <a class="reference internal" href="config.html#config"><span class="std std-ref">app configuration</span></a> if no
request context is available. As of Werkzeug 0.10, this also can be set
to an empty string to build protocol-relative URLs.</li>
<li><strong>_anchor</strong> – if provided this is added as anchor to the URL.</li>
<li><strong>_method</strong> – if provided this explicitly specifies an HTTP method.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="flask.abort">
<code class="descclassname">flask.</code><code class="descname">abort</code><span class="sig-paren">(</span><em>code</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.abort" title="Permalink to this definition">¶</a></dt>
<dd><p>Raises an <a class="reference external" href="http://werkzeug.pocoo.org/docs/exceptions/#werkzeug.exceptions.HTTPException" title="(in Werkzeug v0.14-dev)"><code class="xref py py-exc docutils literal"><span class="pre">HTTPException</span></code></a> for the given
status code.  For example to abort request handling with a page not
found exception, you would call <code class="docutils literal"><span class="pre">abort(404)</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>code</strong> – the HTTP error code.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="flask.redirect">
<code class="descclassname">flask.</code><code class="descname">redirect</code><span class="sig-paren">(</span><em>location</em>, <em>code=302</em>, <em>Response=None</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.redirect" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a response object (a WSGI application) that, if called,
redirects the client to the target location.  Supported codes are 301,
302, 303, 305, and 307.  300 is not supported because it’s not a real
redirect and 304 because it’s the answer for a request with a request
with defined If-Modified-Since headers.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.6: </span>The location can now be a unicode string that is encoded using
the <code class="xref py py-func docutils literal"><span class="pre">iri_to_uri()</span></code> function.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.10: </span>The class used for the Response object can now be passed in.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>location</strong> – the location the response should redirect to.</li>
<li><strong>code</strong> – the redirect status code. defaults to 302.</li>
<li><strong>Response</strong> (<em>class</em>) – a Response class to use when instantiating a
response. The default is <a class="reference external" href="http://werkzeug.pocoo.org/docs/wrappers/#werkzeug.wrappers.Response" title="(in Werkzeug v0.14-dev)"><code class="xref py py-class docutils literal"><span class="pre">werkzeug.wrappers.Response</span></code></a> if
unspecified.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="flask.make_response">
<code class="descclassname">flask.</code><code class="descname">make_response</code><span class="sig-paren">(</span><em>*args</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.make_response" title="Permalink to this definition">¶</a></dt>
<dd><p>Sometimes it is necessary to set additional headers in a view.  Because
views do not have to return response objects but can return a value that
is converted into a response object by Flask itself, it becomes tricky to
add headers to it.  This function can be called instead of using a return
and you will get a response object which you can use to attach headers.</p>
<p>If view looked like this and you want to add a new header:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;index.html&#39;</span><span class="p">,</span> <span class="n">foo</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
</pre></div>
</div>
<p>You can now do something like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">make_response</span><span class="p">(</span><span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;index.html&#39;</span><span class="p">,</span> <span class="n">foo</span><span class="o">=</span><span class="mi">42</span><span class="p">))</span>
    <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s1">&#39;X-Parachutes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;parachutes are cool&#39;</span>
    <span class="k">return</span> <span class="n">response</span>
</pre></div>
</div>
<p>This function accepts the very same arguments you can return from a
view function.  This for example creates a response with a 404 error
code:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">response</span> <span class="o">=</span> <span class="n">make_response</span><span class="p">(</span><span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;not_found.html&#39;</span><span class="p">),</span> <span class="mi">404</span><span class="p">)</span>
</pre></div>
</div>
<p>The other use case of this function is to force the return value of a
view function into a response which is helpful with view
decorators:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">response</span> <span class="o">=</span> <span class="n">make_response</span><span class="p">(</span><span class="n">view_function</span><span class="p">())</span>
<span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s1">&#39;X-Parachutes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;parachutes are cool&#39;</span>
</pre></div>
</div>
<p>Internally this function does the following things:</p>
<ul class="simple">
<li>if no arguments are passed, it creates a new response argument</li>
<li>if one argument is passed, <a class="reference internal" href="#flask.Flask.make_response" title="flask.Flask.make_response"><code class="xref py py-meth docutils literal"><span class="pre">flask.Flask.make_response()</span></code></a>
is invoked with it.</li>
<li>if more than one argument is passed, the arguments are passed
to the <a class="reference internal" href="#flask.Flask.make_response" title="flask.Flask.make_response"><code class="xref py py-meth docutils literal"><span class="pre">flask.Flask.make_response()</span></code></a> function as tuple.</li>
</ul>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.6.</span></p>
</div>
</dd></dl>

<dl class="function">
<dt id="flask.after_this_request">
<code class="descclassname">flask.</code><code class="descname">after_this_request</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.after_this_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes a function after this request.  This is useful to modify
response objects.  The function is passed the response object and has
to return the same or a new one.</p>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="nd">@after_this_request</span>
    <span class="k">def</span> <span class="nf">add_header</span><span class="p">(</span><span class="n">response</span><span class="p">):</span>
        <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s1">&#39;X-Foo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Parachute&#39;</span>
        <span class="k">return</span> <span class="n">response</span>
    <span class="k">return</span> <span class="s1">&#39;Hello World!&#39;</span>
</pre></div>
</div>
<p>This is more useful if a function other than the view function wants to
modify a response.  For instance think of a decorator that wants to add
some headers without converting the return value into a response object.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.9.</span></p>
</div>
</dd></dl>

<dl class="function">
<dt id="flask.send_file">
<code class="descclassname">flask.</code><code class="descname">send_file</code><span class="sig-paren">(</span><em>filename_or_fp</em>, <em>mimetype=None</em>, <em>as_attachment=False</em>, <em>attachment_filename=None</em>, <em>add_etags=True</em>, <em>cache_timeout=None</em>, <em>conditional=False</em>, <em>last_modified=None</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.send_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends the contents of a file to the client.  This will use the
most efficient method available and configured.  By default it will
try to use the WSGI server’s file_wrapper support.  Alternatively
you can set the application’s <a class="reference internal" href="#flask.Flask.use_x_sendfile" title="flask.Flask.use_x_sendfile"><code class="xref py py-attr docutils literal"><span class="pre">use_x_sendfile</span></code></a> attribute
to <code class="docutils literal"><span class="pre">True</span></code> to directly emit an <code class="docutils literal"><span class="pre">X-Sendfile</span></code> header.  This however
requires support of the underlying webserver for <code class="docutils literal"><span class="pre">X-Sendfile</span></code>.</p>
<p>By default it will try to guess the mimetype for you, but you can
also explicitly provide one.  For extra security you probably want
to send certain files as attachment (HTML for instance).  The mimetype
guessing requires a <cite>filename</cite> or an <cite>attachment_filename</cite> to be
provided.</p>
<p>ETags will also be attached automatically if a <cite>filename</cite> is provided. You
can turn this off by setting <cite>add_etags=False</cite>.</p>
<p>If <cite>conditional=True</cite> and <cite>filename</cite> is provided, this method will try to
upgrade the response stream to support range requests.  This will allow
the request to be answered with partial content response.</p>
<p>Please never pass filenames to this function from user sources;
you should use <a class="reference internal" href="#flask.send_from_directory" title="flask.send_from_directory"><code class="xref py py-func docutils literal"><span class="pre">send_from_directory()</span></code></a> instead.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.2.</span></p>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.5: </span>The <cite>add_etags</cite>, <cite>cache_timeout</cite> and <cite>conditional</cite> parameters were
added.  The default behavior is now to attach etags.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.7: </span>mimetype guessing and etag support for file objects was
deprecated because it was unreliable.  Pass a filename if you are
able to, otherwise attach an etag yourself.  This functionality
will be removed in Flask 1.0</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.9: </span>cache_timeout pulls its default from application config, when None.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.12: </span>The filename is no longer automatically inferred from file objects. If
you want to use automatic mimetype and etag support, pass a filepath via
<cite>filename_or_fp</cite> or <cite>attachment_filename</cite>.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.12: </span>The <cite>attachment_filename</cite> is preferred over <cite>filename</cite> for MIME-type
detection.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>filename_or_fp</strong> – the filename of the file to send in <cite>latin-1</cite>.
This is relative to the <code class="xref py py-attr docutils literal"><span class="pre">root_path</span></code>
if a relative path is specified.
Alternatively a file object might be provided in
which case <code class="docutils literal"><span class="pre">X-Sendfile</span></code> might not work and fall
back to the traditional method.  Make sure that the
file pointer is positioned at the start of data to
send before calling <a class="reference internal" href="#flask.send_file" title="flask.send_file"><code class="xref py py-func docutils literal"><span class="pre">send_file()</span></code></a>.</li>
<li><strong>mimetype</strong> – the mimetype of the file if provided. If a file path is
given, auto detection happens as fallback, otherwise an
error will be raised.</li>
<li><strong>as_attachment</strong> – set to <code class="docutils literal"><span class="pre">True</span></code> if you want to send this file with
a <code class="docutils literal"><span class="pre">Content-Disposition:</span> <span class="pre">attachment</span></code> header.</li>
<li><strong>attachment_filename</strong> – the filename for the attachment if it
differs from the file’s filename.</li>
<li><strong>add_etags</strong> – set to <code class="docutils literal"><span class="pre">False</span></code> to disable attaching of etags.</li>
<li><strong>conditional</strong> – set to <code class="docutils literal"><span class="pre">True</span></code> to enable conditional responses.</li>
<li><strong>cache_timeout</strong> – the timeout in seconds for the headers. When <code class="docutils literal"><span class="pre">None</span></code>
(default), this value is set by
<a class="reference internal" href="#flask.Flask.get_send_file_max_age" title="flask.Flask.get_send_file_max_age"><code class="xref py py-meth docutils literal"><span class="pre">get_send_file_max_age()</span></code></a> of
<a class="reference internal" href="#flask.current_app" title="flask.current_app"><code class="xref py py-data docutils literal"><span class="pre">current_app</span></code></a>.</li>
<li><strong>last_modified</strong> – set the <code class="docutils literal"><span class="pre">Last-Modified</span></code> header to this value,
a <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">datetime</span></code></a> or timestamp.
If a file was passed, this overrides its mtime.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="flask.send_from_directory">
<code class="descclassname">flask.</code><code class="descname">send_from_directory</code><span class="sig-paren">(</span><em>directory</em>, <em>filename</em>, <em>**options</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.send_from_directory" title="Permalink to this definition">¶</a></dt>
<dd><p>Send a file from a given directory with <a class="reference internal" href="#flask.send_file" title="flask.send_file"><code class="xref py py-func docutils literal"><span class="pre">send_file()</span></code></a>.  This
is a secure way to quickly expose static files from an upload folder
or something similar.</p>
<p>Example usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/uploads/&lt;path:filename&gt;&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">download_file</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">send_from_directory</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;UPLOAD_FOLDER&#39;</span><span class="p">],</span>
                               <span class="n">filename</span><span class="p">,</span> <span class="n">as_attachment</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition-sending-files-and-performance admonition">
<p class="first admonition-title">Sending files and Performance</p>
<p class="last">It is strongly recommended to activate either <code class="docutils literal"><span class="pre">X-Sendfile</span></code> support in
your webserver or (if no authentication happens) to tell the webserver
to serve files for the given path on its own without calling into the
web application for improved performance.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.5.</span></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>directory</strong> – the directory where all the files are stored.</li>
<li><strong>filename</strong> – the filename relative to that directory to
download.</li>
<li><strong>options</strong> – optional keyword arguments that are directly
forwarded to <a class="reference internal" href="#flask.send_file" title="flask.send_file"><code class="xref py py-func docutils literal"><span class="pre">send_file()</span></code></a>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="flask.safe_join">
<code class="descclassname">flask.</code><code class="descname">safe_join</code><span class="sig-paren">(</span><em>directory</em>, <em>*pathnames</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.safe_join" title="Permalink to this definition">¶</a></dt>
<dd><p>Safely join <cite>directory</cite> and zero or more untrusted <cite>pathnames</cite>
components.</p>
<p>Example usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/wiki/&lt;path:filename&gt;&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">wiki_page</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">safe_join</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;WIKI_FOLDER&#39;</span><span class="p">],</span> <span class="n">filename</span><span class="p">)</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fd</span><span class="p">:</span>
        <span class="n">content</span> <span class="o">=</span> <span class="n">fd</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>  <span class="c1"># Read and process the file content...</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>directory</strong> – the trusted base directory.</li>
<li><strong>pathnames</strong> – the untrusted pathnames relative to that directory.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><a class="reference external" href="http://werkzeug.pocoo.org/docs/exceptions/#werkzeug.exceptions.NotFound" title="(in Werkzeug v0.14-dev)"><code class="xref py py-class docutils literal"><span class="pre">NotFound</span></code></a> if one or more passed
paths fall out of its boundaries.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="flask.escape">
<code class="descclassname">flask.</code><code class="descname">escape</code><span class="sig-paren">(</span><em>s</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.escape" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the characters &amp;, &lt;, &gt;, ‘ and ” in string s to HTML-safe
sequences.  Use this if you need to display text that might contain
such characters in HTML.  Marks return value as markup string.</p>
</dd></dl>

<dl class="class">
<dt id="flask.Markup">
<em class="property">class </em><code class="descclassname">flask.</code><code class="descname">Markup</code><a class="headerlink" href="#flask.Markup" title="Permalink to this definition">¶</a></dt>
<dd><p>Marks a string as being safe for inclusion in HTML/XML output without
needing to be escaped.  This implements the <cite>__html__</cite> interface a couple
of frameworks and web applications use.  <a class="reference internal" href="#flask.Markup" title="flask.Markup"><code class="xref py py-class docutils literal"><span class="pre">Markup</span></code></a> is a direct
subclass of <cite>unicode</cite> and provides all the methods of <cite>unicode</cite> just that
it escapes arguments passed and always returns <cite>Markup</cite>.</p>
<p>The <cite>escape</cite> function returns markup objects so that double escaping can’t
happen.</p>
<p>The constructor of the <a class="reference internal" href="#flask.Markup" title="flask.Markup"><code class="xref py py-class docutils literal"><span class="pre">Markup</span></code></a> class can be used for three
different things:  When passed an unicode object it’s assumed to be safe,
when passed an object with an HTML representation (has an <cite>__html__</cite>
method) that representation is used, otherwise the object passed is
converted into a unicode string and then assumed to be safe:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Markup</span><span class="p">(</span><span class="s2">&quot;Hello &lt;em&gt;World&lt;/em&gt;!&quot;</span><span class="p">)</span>
<span class="go">Markup(u&#39;Hello &lt;em&gt;World&lt;/em&gt;!&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="gp">... </span> <span class="k">def</span> <span class="nf">__html__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>  <span class="k">return</span> <span class="s1">&#39;&lt;a href=&quot;#&quot;&gt;foo&lt;/a&gt;&#39;</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Markup</span><span class="p">(</span><span class="n">Foo</span><span class="p">())</span>
<span class="go">Markup(u&#39;&lt;a href=&quot;#&quot;&gt;foo&lt;/a&gt;&#39;)</span>
</pre></div>
</div>
<p>If you want object passed being always treated as unsafe you can use the
<a class="reference internal" href="#flask.escape" title="flask.escape"><code class="xref py py-meth docutils literal"><span class="pre">escape()</span></code></a> classmethod to create a <a class="reference internal" href="#flask.Markup" title="flask.Markup"><code class="xref py py-class docutils literal"><span class="pre">Markup</span></code></a> object:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Markup</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="s2">&quot;Hello &lt;em&gt;World&lt;/em&gt;!&quot;</span><span class="p">)</span>
<span class="go">Markup(u&#39;Hello &amp;lt;em&amp;gt;World&amp;lt;/em&amp;gt;!&#39;)</span>
</pre></div>
</div>
<p>Operations on a markup string are markup aware which means that all
arguments are passed through the <a class="reference internal" href="#flask.escape" title="flask.escape"><code class="xref py py-func docutils literal"><span class="pre">escape()</span></code></a> function:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">em</span> <span class="o">=</span> <span class="n">Markup</span><span class="p">(</span><span class="s2">&quot;&lt;em&gt;</span><span class="si">%s</span><span class="s2">&lt;/em&gt;&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">em</span> <span class="o">%</span> <span class="s2">&quot;foo &amp; bar&quot;</span>
<span class="go">Markup(u&#39;&lt;em&gt;foo &amp;amp; bar&lt;/em&gt;&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">strong</span> <span class="o">=</span> <span class="n">Markup</span><span class="p">(</span><span class="s2">&quot;&lt;strong&gt;</span><span class="si">%(text)s</span><span class="s2">&lt;/strong&gt;&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">strong</span> <span class="o">%</span> <span class="p">{</span><span class="s1">&#39;text&#39;</span><span class="p">:</span> <span class="s1">&#39;&lt;blink&gt;hacker here&lt;/blink&gt;&#39;</span><span class="p">}</span>
<span class="go">Markup(u&#39;&lt;strong&gt;&amp;lt;blink&amp;gt;hacker here&amp;lt;/blink&amp;gt;&lt;/strong&gt;&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Markup</span><span class="p">(</span><span class="s2">&quot;&lt;em&gt;Hello&lt;/em&gt; &quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&lt;foo&gt;&quot;</span>
<span class="go">Markup(u&#39;&lt;em&gt;Hello&lt;/em&gt; &amp;lt;foo&amp;gt;&#39;)</span>
</pre></div>
</div>
<dl class="classmethod">
<dt id="flask.Markup.escape">
<em class="property">classmethod </em><code class="descname">escape</code><span class="sig-paren">(</span><em>s</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Markup.escape" title="Permalink to this definition">¶</a></dt>
<dd><p>Escape the string.  Works like <a class="reference internal" href="#flask.escape" title="flask.escape"><code class="xref py py-func docutils literal"><span class="pre">escape()</span></code></a> with the difference
that for subclasses of <a class="reference internal" href="#flask.Markup" title="flask.Markup"><code class="xref py py-class docutils literal"><span class="pre">Markup</span></code></a> this function would return the
correct subclass.</p>
</dd></dl>

<dl class="method">
<dt id="flask.Markup.striptags">
<code class="descname">striptags</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#flask.Markup.striptags" title="Permalink to this definition">¶</a></dt>
<dd><p>Unescape markup into an text_type string and strip all tags.  This
also resolves known HTML4 and XHTML entities.  Whitespace is
normalized to one:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Markup</span><span class="p">(</span><span class="s2">&quot;Main &amp;raquo;  &lt;em&gt;About&lt;/em&gt;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">striptags</span><span class="p">()</span>
<span class="go">u&#39;Main \xbb About&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="flask.Markup.unescape">
<code class="descname">unescape</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#flask.Markup.unescape" title="Permalink to this definition">¶</a></dt>
<dd><p>Unescape markup again into an text_type string.  This also resolves
known HTML4 and XHTML entities:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Markup</span><span class="p">(</span><span class="s2">&quot;Main &amp;raquo; &lt;em&gt;About&lt;/em&gt;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">unescape</span><span class="p">()</span>
<span class="go">u&#39;Main \xbb &lt;em&gt;About&lt;/em&gt;&#39;</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id11">
<h2>消息闪现<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="flask.flash">
<code class="descclassname">flask.</code><code class="descname">flash</code><span class="sig-paren">(</span><em>message</em>, <em>category='message'</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.flash" title="Permalink to this definition">¶</a></dt>
<dd><p>Flashes a message to the next request.  In order to remove the
flashed message from the session and to display it to the user,
the template has to call <a class="reference internal" href="#flask.get_flashed_messages" title="flask.get_flashed_messages"><code class="xref py py-func docutils literal"><span class="pre">get_flashed_messages()</span></code></a>.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.3: </span><cite>category</cite> parameter added.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>message</strong> – the message to be flashed.</li>
<li><strong>category</strong> – the category for the message.  The following values
are recommended: <code class="docutils literal"><span class="pre">'message'</span></code> for any kind of message,
<code class="docutils literal"><span class="pre">'error'</span></code> for errors, <code class="docutils literal"><span class="pre">'info'</span></code> for information
messages and <code class="docutils literal"><span class="pre">'warning'</span></code> for warnings.  However any
kind of string can be used as category.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="flask.get_flashed_messages">
<code class="descclassname">flask.</code><code class="descname">get_flashed_messages</code><span class="sig-paren">(</span><em>with_categories=False</em>, <em>category_filter=[]</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.get_flashed_messages" title="Permalink to this definition">¶</a></dt>
<dd><p>Pulls all flashed messages from the session and returns them.
Further calls in the same request to the function will return
the same messages.  By default just the messages are returned,
but when <cite>with_categories</cite> is set to <code class="docutils literal"><span class="pre">True</span></code>, the return value will
be a list of tuples in the form <code class="docutils literal"><span class="pre">(category,</span> <span class="pre">message)</span></code> instead.</p>
<p>Filter the flashed messages to one or more categories by providing those
categories in <cite>category_filter</cite>.  This allows rendering categories in
separate html blocks.  The <cite>with_categories</cite> and <cite>category_filter</cite>
arguments are distinct:</p>
<ul class="simple">
<li><cite>with_categories</cite> controls whether categories are returned with message
text (<code class="docutils literal"><span class="pre">True</span></code> gives a tuple, where <code class="docutils literal"><span class="pre">False</span></code> gives just the message text).</li>
<li><cite>category_filter</cite> filters the messages down to only those matching the
provided categories.</li>
</ul>
<p>See <a class="reference internal" href="patterns/flashing.html#message-flashing-pattern"><span class="std std-ref">消息闪现</span></a> for examples.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.3: </span><cite>with_categories</cite> parameter added.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.9: </span><cite>category_filter</cite> parameter added.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>with_categories</strong> – set to <code class="docutils literal"><span class="pre">True</span></code> to also receive categories.</li>
<li><strong>category_filter</strong> – whitelist of categories to limit return values</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-flask.json">
<span id="json"></span><h2>JSON 支持<a class="headerlink" href="#module-flask.json" title="Permalink to this headline">¶</a></h2>
<p>Flask uses <code class="docutils literal"><span class="pre">simplejson</span></code> for the JSON implementation.  Since simplejson
is provided both by the standard library as well as extension Flask will
try simplejson first and then fall back to the stdlib json module.  On top
of that it will delegate access to the current application’s JSOn encoders
and decoders for easier customization.</p>
<p>So for starters instead of doing:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">simplejson</span> <span class="k">as</span> <span class="nn">json</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">json</span>
</pre></div>
</div>
<p>You can instead just do this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="k">import</span> <span class="n">json</span>
</pre></div>
</div>
<p>For usage examples, read the <a class="reference external" href="https://docs.python.org/3/library/json.html#module-json" title="(in Python v3.6)"><code class="xref py py-mod docutils literal"><span class="pre">json</span></code></a> documentation in the standard
lirbary.  The following extensions are by default applied to the stdlib’s
JSON module:</p>
<ol class="arabic simple">
<li><code class="docutils literal"><span class="pre">datetime</span></code> objects are serialized as <span class="target" id="index-0"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc822.html"><strong>RFC 822</strong></a> strings.</li>
<li>Any object with an <code class="docutils literal"><span class="pre">__html__</span></code> method (like <a class="reference internal" href="#flask.Markup" title="flask.Markup"><code class="xref py py-class docutils literal"><span class="pre">Markup</span></code></a>)
will ahve that method called and then the return value is serialized
as string.</li>
</ol>
<p>The <code class="xref py py-func docutils literal"><span class="pre">htmlsafe_dumps()</span></code> function of this json module is also available
as filter called <code class="docutils literal"><span class="pre">|tojson</span></code> in Jinja2.  Note that inside <cite>script</cite>
tags no escaping must take place, so make sure to disable escaping
with <code class="docutils literal"><span class="pre">|safe</span></code> if you intend to use it inside <cite>script</cite> tags unless
you are using Flask 0.10 which implies that:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">text/javascript</span><span class="p">&gt;</span>
    <span class="nx">doSomethingWith</span><span class="p">(</span><span class="cp">{{</span> <span class="nv">user.username</span><span class="o">|</span><span class="nf">tojson</span><span class="o">|</span><span class="nf">safe</span> <span class="cp">}}</span><span class="p">);</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
<dl class="function">
<dt id="flask.json.jsonify">
<code class="descclassname">flask.json.</code><code class="descname">jsonify</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.json.jsonify" title="Permalink to this definition">¶</a></dt>
<dd><p>This function wraps <a class="reference internal" href="#flask.json.dumps" title="flask.json.dumps"><code class="xref py py-func docutils literal"><span class="pre">dumps()</span></code></a> to add a few enhancements that make
life easier.  It turns the JSON output into a <a class="reference internal" href="#flask.Response" title="flask.Response"><code class="xref py py-class docutils literal"><span class="pre">Response</span></code></a>
object with the <em class="mimetype">application/json</em> mimetype.  For convenience, it
also converts multiple arguments into an array or multiple keyword arguments
into a dict.  This means that both <code class="docutils literal"><span class="pre">jsonify(1,2,3)</span></code> and
<code class="docutils literal"><span class="pre">jsonify([1,2,3])</span></code> serialize to <code class="docutils literal"><span class="pre">[1,2,3]</span></code>.</p>
<p>For clarity, the JSON serialization behavior has the following differences
from <a class="reference internal" href="#flask.json.dumps" title="flask.json.dumps"><code class="xref py py-func docutils literal"><span class="pre">dumps()</span></code></a>:</p>
<ol class="arabic simple">
<li>Single argument: Passed straight through to <a class="reference internal" href="#flask.json.dumps" title="flask.json.dumps"><code class="xref py py-func docutils literal"><span class="pre">dumps()</span></code></a>.</li>
<li>Multiple arguments: Converted to an array before being passed to
<a class="reference internal" href="#flask.json.dumps" title="flask.json.dumps"><code class="xref py py-func docutils literal"><span class="pre">dumps()</span></code></a>.</li>
<li>Multiple keyword arguments: Converted to a dict before being passed to
<a class="reference internal" href="#flask.json.dumps" title="flask.json.dumps"><code class="xref py py-func docutils literal"><span class="pre">dumps()</span></code></a>.</li>
<li>Both args and kwargs: Behavior undefined and will throw an exception.</li>
</ol>
<p>Example usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="k">import</span> <span class="n">jsonify</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/_get_current_user&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">get_current_user</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">g</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">username</span><span class="p">,</span>
                   <span class="n">email</span><span class="o">=</span><span class="n">g</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">email</span><span class="p">,</span>
                   <span class="nb">id</span><span class="o">=</span><span class="n">g</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</pre></div>
</div>
<p>This will send a JSON response like this to the browser:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;admin@localhost&quot;</span><span class="p">,</span>
    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">42</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.11: </span>Added support for serializing top-level arrays. This introduces a
security risk in ancient browsers. See <a class="reference internal" href="security.html#json-security"><span class="std std-ref">JSON 安全</span></a> for details.</p>
</div>
<p>This function’s response will be pretty printed if it was not requested
with <code class="docutils literal"><span class="pre">X-Requested-With:</span> <span class="pre">XMLHttpRequest</span></code> to simplify debugging unless
the <code class="docutils literal"><span class="pre">JSONIFY_PRETTYPRINT_REGULAR</span></code> config parameter is set to false.
Compressed (not pretty) formatting currently means no indents and no
spaces after separators.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.2.</span></p>
</div>
</dd></dl>

<dl class="function">
<dt id="flask.json.dumps">
<code class="descclassname">flask.json.</code><code class="descname">dumps</code><span class="sig-paren">(</span><em>obj</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.json.dumps" title="Permalink to this definition">¶</a></dt>
<dd><p>Serialize <code class="docutils literal"><span class="pre">obj</span></code> to a JSON formatted <code class="docutils literal"><span class="pre">str</span></code> by using the application’s
configured encoder (<a class="reference internal" href="#flask.Flask.json_encoder" title="flask.Flask.json_encoder"><code class="xref py py-attr docutils literal"><span class="pre">json_encoder</span></code></a>) if there is an
application on the stack.</p>
<p>This function can return <code class="docutils literal"><span class="pre">unicode</span></code> strings or ascii-only bytestrings by
default which coerce into unicode strings automatically.  That behavior by
default is controlled by the <code class="docutils literal"><span class="pre">JSON_AS_ASCII</span></code> configuration variable
and can be overridden by the simplejson <code class="docutils literal"><span class="pre">ensure_ascii</span></code> parameter.</p>
</dd></dl>

<dl class="function">
<dt id="flask.json.dump">
<code class="descclassname">flask.json.</code><code class="descname">dump</code><span class="sig-paren">(</span><em>obj</em>, <em>fp</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.json.dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <a class="reference internal" href="#flask.json.dumps" title="flask.json.dumps"><code class="xref py py-func docutils literal"><span class="pre">dumps()</span></code></a> but writes into a file object.</p>
</dd></dl>

<dl class="function">
<dt id="flask.json.loads">
<code class="descclassname">flask.json.</code><code class="descname">loads</code><span class="sig-paren">(</span><em>s</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.json.loads" title="Permalink to this definition">¶</a></dt>
<dd><p>Unserialize a JSON object from a string <code class="docutils literal"><span class="pre">s</span></code> by using the application’s
configured decoder (<a class="reference internal" href="#flask.Flask.json_decoder" title="flask.Flask.json_decoder"><code class="xref py py-attr docutils literal"><span class="pre">json_decoder</span></code></a>) if there is an
application on the stack.</p>
</dd></dl>

<dl class="function">
<dt id="flask.json.load">
<code class="descclassname">flask.json.</code><code class="descname">load</code><span class="sig-paren">(</span><em>fp</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.json.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <a class="reference internal" href="#flask.json.loads" title="flask.json.loads"><code class="xref py py-func docutils literal"><span class="pre">loads()</span></code></a> but reads from a file object.</p>
</dd></dl>

<dl class="class">
<dt id="flask.json.JSONEncoder">
<em class="property">class </em><code class="descclassname">flask.json.</code><code class="descname">JSONEncoder</code><span class="sig-paren">(</span><em>*</em>, <em>skipkeys=False</em>, <em>ensure_ascii=True</em>, <em>check_circular=True</em>, <em>allow_nan=True</em>, <em>sort_keys=False</em>, <em>indent=None</em>, <em>separators=None</em>, <em>default=None</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.json.JSONEncoder" title="Permalink to this definition">¶</a></dt>
<dd><p>The default Flask JSON encoder.  This one extends the default simplejson
encoder by also supporting <code class="docutils literal"><span class="pre">datetime</span></code> objects, <code class="docutils literal"><span class="pre">UUID</span></code> as well as
<code class="docutils literal"><span class="pre">Markup</span></code> objects which are serialized as RFC 822 datetime strings (same
as the HTTP date format).  In order to support more data types override the
<a class="reference internal" href="#flask.json.JSONEncoder.default" title="flask.json.JSONEncoder.default"><code class="xref py py-meth docutils literal"><span class="pre">default()</span></code></a> method.</p>
<dl class="method">
<dt id="flask.json.JSONEncoder.default">
<code class="descname">default</code><span class="sig-paren">(</span><em>o</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.json.JSONEncoder.default" title="Permalink to this definition">¶</a></dt>
<dd><p>Implement this method in a subclass such that it returns a
serializable object for <code class="docutils literal"><span class="pre">o</span></code>, or calls the base implementation (to
raise a <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.6)"><code class="xref py py-exc docutils literal"><span class="pre">TypeError</span></code></a>).</p>
<p>For example, to support arbitrary iterators, you could implement
default like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">o</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">iterable</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">JSONEncoder</span><span class="o">.</span><span class="n">default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">o</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="flask.json.JSONDecoder">
<em class="property">class </em><code class="descclassname">flask.json.</code><code class="descname">JSONDecoder</code><span class="sig-paren">(</span><em>*</em>, <em>object_hook=None</em>, <em>parse_float=None</em>, <em>parse_int=None</em>, <em>parse_constant=None</em>, <em>strict=True</em>, <em>object_pairs_hook=None</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.json.JSONDecoder" title="Permalink to this definition">¶</a></dt>
<dd><p>The default JSON decoder.  This one does not change the behavior from
the default simplejson decoder.  Consult the <a class="reference external" href="https://docs.python.org/3/library/json.html#module-json" title="(in Python v3.6)"><code class="xref py py-mod docutils literal"><span class="pre">json</span></code></a> documentation
for more information.  This decoder is not only used for the load
functions of this module but also <a class="reference internal" href="#flask.Request" title="flask.Request"><code class="xref py py-attr docutils literal"><span class="pre">Request</span></code></a>.</p>
</dd></dl>

</div>
<div class="section" id="id12">
<h2>渲染模版<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="flask.render_template">
<code class="descclassname">flask.</code><code class="descname">render_template</code><span class="sig-paren">(</span><em>template_name_or_list</em>, <em>**context</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.render_template" title="Permalink to this definition">¶</a></dt>
<dd><p>Renders a template from the template folder with the given
context.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>template_name_or_list</strong> – the name of the template to be
rendered, or an iterable with template names
the first one existing will be rendered</li>
<li><strong>context</strong> – the variables that should be available in the
context of the template.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="flask.render_template_string">
<code class="descclassname">flask.</code><code class="descname">render_template_string</code><span class="sig-paren">(</span><em>source</em>, <em>**context</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.render_template_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Renders a template from the given template source string
with the given context. Template variables will be autoescaped.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>source</strong> – the source code of the template to be
rendered</li>
<li><strong>context</strong> – the variables that should be available in the
context of the template.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="flask.get_template_attribute">
<code class="descclassname">flask.</code><code class="descname">get_template_attribute</code><span class="sig-paren">(</span><em>template_name</em>, <em>attribute</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.get_template_attribute" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads a macro (or variable) a template exports.  This can be used to
invoke a macro from within Python code.  If you for example have a
template named <code class="file docutils literal"><span class="pre">_cider.html</span></code> with the following contents:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">macro</span> <span class="nv">hello</span><span class="o">(</span><span class="nv">name</span><span class="o">)</span> <span class="cp">%}</span>Hello <span class="cp">{{</span> <span class="nv">name</span> <span class="cp">}}</span>!<span class="cp">{%</span> <span class="k">endmacro</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>You can access this from Python code like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">hello</span> <span class="o">=</span> <span class="n">get_template_attribute</span><span class="p">(</span><span class="s1">&#39;_cider.html&#39;</span><span class="p">,</span> <span class="s1">&#39;hello&#39;</span><span class="p">)</span>
<span class="k">return</span> <span class="n">hello</span><span class="p">(</span><span class="s1">&#39;World&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.2.</span></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>template_name</strong> – the name of the template</li>
<li><strong>attribute</strong> – the name of the variable of macro to access</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id13">
<h2>配置<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="flask.Config">
<em class="property">class </em><code class="descclassname">flask.</code><code class="descname">Config</code><span class="sig-paren">(</span><em>root_path</em>, <em>defaults=None</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Config" title="Permalink to this definition">¶</a></dt>
<dd><p>Works exactly like a dict but provides ways to fill it from files
or special dictionaries.  There are two common patterns to populate the
config.</p>
<p>Either you can fill the config from a config file:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">from_pyfile</span><span class="p">(</span><span class="s1">&#39;yourconfig.cfg&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Or alternatively you can define the configuration options in the
module that calls <a class="reference internal" href="#flask.Config.from_object" title="flask.Config.from_object"><code class="xref py py-meth docutils literal"><span class="pre">from_object()</span></code></a> or provide an import path to
a module that should be loaded.  It is also possible to tell it to
use the same module and with that provide the configuration values
just before the call:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">DEBUG</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="s1">&#39;development key&#39;</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">from_object</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
</pre></div>
</div>
<p>In both cases (loading from any Python file or loading from modules),
only uppercase keys are added to the config.  This makes it possible to use
lowercase values in the config file for temporary values that are not added
to the config or to define the config keys in the same file that implements
the application.</p>
<p>Probably the most interesting way to load configurations is from an
environment variable pointing to a file:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">from_envvar</span><span class="p">(</span><span class="s1">&#39;YOURAPPLICATION_SETTINGS&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>In this case before launching the application you have to set this
environment variable to the file you want to use.  On Linux and OS X
use the export statement:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">YOURAPPLICATION_SETTINGS</span><span class="o">=</span><span class="s1">&#39;/path/to/config/file&#39;</span>
</pre></div>
</div>
<p>On windows use <cite>set</cite> instead.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>root_path</strong> – path to which files are read relative from.  When the
config object is created by the application, this is
the application’s <code class="xref py py-attr docutils literal"><span class="pre">root_path</span></code>.</li>
<li><strong>defaults</strong> – an optional dictionary of default values</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="flask.Config.from_envvar">
<code class="descname">from_envvar</code><span class="sig-paren">(</span><em>variable_name</em>, <em>silent=False</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Config.from_envvar" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads a configuration from an environment variable pointing to
a configuration file.  This is basically just a shortcut with nicer
error messages for this line of code:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">from_pyfile</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;YOURAPPLICATION_SETTINGS&#39;</span><span class="p">])</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>variable_name</strong> – name of the environment variable</li>
<li><strong>silent</strong> – set to <code class="docutils literal"><span class="pre">True</span></code> if you want silent failure for missing
files.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">bool. <code class="docutils literal"><span class="pre">True</span></code> if able to load config, <code class="docutils literal"><span class="pre">False</span></code> otherwise.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask.Config.from_json">
<code class="descname">from_json</code><span class="sig-paren">(</span><em>filename</em>, <em>silent=False</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Config.from_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates the values in the config from a JSON file. This function
behaves as if the JSON object was a dictionary and passed to the
<a class="reference internal" href="#flask.Config.from_mapping" title="flask.Config.from_mapping"><code class="xref py py-meth docutils literal"><span class="pre">from_mapping()</span></code></a> function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>filename</strong> – the filename of the JSON file.  This can either be an
absolute filename or a filename relative to the
root path.</li>
<li><strong>silent</strong> – set to <code class="docutils literal"><span class="pre">True</span></code> if you want silent failure for missing
files.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.11.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="flask.Config.from_mapping">
<code class="descname">from_mapping</code><span class="sig-paren">(</span><em>*mapping</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Config.from_mapping" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates the config like <code class="xref py py-meth docutils literal"><span class="pre">update()</span></code> ignoring items with non-upper
keys.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.11.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="flask.Config.from_object">
<code class="descname">from_object</code><span class="sig-paren">(</span><em>obj</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Config.from_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates the values from the given object.  An object can be of one
of the following two types:</p>
<ul class="simple">
<li>a string: in this case the object with that name will be imported</li>
<li>an actual object reference: that object is used directly</li>
</ul>
<p>Objects are usually either modules or classes. <a class="reference internal" href="#flask.Config.from_object" title="flask.Config.from_object"><code class="xref py py-meth docutils literal"><span class="pre">from_object()</span></code></a>
loads only the uppercase attributes of the module/class. A <code class="docutils literal"><span class="pre">dict</span></code>
object will not work with <a class="reference internal" href="#flask.Config.from_object" title="flask.Config.from_object"><code class="xref py py-meth docutils literal"><span class="pre">from_object()</span></code></a> because the keys of a
<code class="docutils literal"><span class="pre">dict</span></code> are not attributes of the <code class="docutils literal"><span class="pre">dict</span></code> class.</p>
<p>Example of module-based configuration:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">from_object</span><span class="p">(</span><span class="s1">&#39;yourapplication.default_config&#39;</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">yourapplication</span> <span class="k">import</span> <span class="n">default_config</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">from_object</span><span class="p">(</span><span class="n">default_config</span><span class="p">)</span>
</pre></div>
</div>
<p>You should not use this function to load the actual configuration but
rather configuration defaults.  The actual config should be loaded
with <a class="reference internal" href="#flask.Config.from_pyfile" title="flask.Config.from_pyfile"><code class="xref py py-meth docutils literal"><span class="pre">from_pyfile()</span></code></a> and ideally from a location not within the
package because the package might be installed system wide.</p>
<p>See <span class="xref std std-ref">config-dev-prod</span> for an example of class-based configuration
using <a class="reference internal" href="#flask.Config.from_object" title="flask.Config.from_object"><code class="xref py py-meth docutils literal"><span class="pre">from_object()</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>obj</strong> – an import name or object</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flask.Config.from_pyfile">
<code class="descname">from_pyfile</code><span class="sig-paren">(</span><em>filename</em>, <em>silent=False</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Config.from_pyfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates the values in the config from a Python file.  This function
behaves as if the file was imported as module with the
<a class="reference internal" href="#flask.Config.from_object" title="flask.Config.from_object"><code class="xref py py-meth docutils literal"><span class="pre">from_object()</span></code></a> function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>filename</strong> – the filename of the config.  This can either be an
absolute filename or a filename relative to the
root path.</li>
<li><strong>silent</strong> – set to <code class="docutils literal"><span class="pre">True</span></code> if you want silent failure for missing
files.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.7: </span><cite>silent</cite> parameter.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="flask.Config.get_namespace">
<code class="descname">get_namespace</code><span class="sig-paren">(</span><em>namespace</em>, <em>lowercase=True</em>, <em>trim_namespace=True</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.Config.get_namespace" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dictionary containing a subset of configuration options
that match the specified namespace/prefix. Example usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;IMAGE_STORE_TYPE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;fs&#39;</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;IMAGE_STORE_PATH&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;/var/app/images&#39;</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;IMAGE_STORE_BASE_URL&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;http://img.website.com&#39;</span>
<span class="n">image_store_config</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get_namespace</span><span class="p">(</span><span class="s1">&#39;IMAGE_STORE_&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The resulting dictionary <cite>image_store_config</cite> would look like:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;fs&#39;</span><span class="p">,</span>
    <span class="s1">&#39;path&#39;</span><span class="p">:</span> <span class="s1">&#39;/var/app/images&#39;</span><span class="p">,</span>
    <span class="s1">&#39;base_url&#39;</span><span class="p">:</span> <span class="s1">&#39;http://img.website.com&#39;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This is often useful when configuration options map directly to
keyword arguments in functions or class constructors.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>namespace</strong> – a configuration namespace</li>
<li><strong>lowercase</strong> – a flag indicating if the keys of the resulting
dictionary should be lowercase</li>
<li><strong>trim_namespace</strong> – a flag indicating if the keys of the resulting
dictionary should not include the namespace</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.11.</span></p>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id14">
<h2>扩展<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h2>
<dl class="data">
<dt id="flask.flask.ext">
<code class="descclassname">flask.</code><code class="descname">ext</code><a class="headerlink" href="#flask.flask.ext" title="Permalink to this definition">¶</a></dt>
<dd><p>This module acts as redirect import module to Flask extensions.  It was
added in 0.8 as the canonical way to import Flask extensions and makes
it possible for us to have more flexibility in how we distribute
extensions.</p>
<p>If you want to use an extension named “Flask-Foo” you would import it
from <a class="reference internal" href="#flask.flask.ext" title="flask.flask.ext"><code class="xref py py-data docutils literal"><span class="pre">ext</span></code></a> as follows:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask.ext</span> <span class="k">import</span> <span class="n">foo</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.8.</span></p>
</div>
</dd></dl>

</div>
<div class="section" id="id15">
<h2>流辅助函数<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="flask.stream_with_context">
<code class="descclassname">flask.</code><code class="descname">stream_with_context</code><span class="sig-paren">(</span><em>generator_or_function</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.stream_with_context" title="Permalink to this definition">¶</a></dt>
<dd><p>Request contexts disappear when the response is started on the server.
This is done for efficiency reasons and to make it less likely to encounter
memory leaks with badly written WSGI middlewares.  The downside is that if
you are using streamed responses, the generator cannot access request bound
information any more.</p>
<p>This function however can help you keep the context around for longer:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="k">import</span> <span class="n">stream_with_context</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">Response</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/stream&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">streamed_response</span><span class="p">():</span>
    <span class="nd">@stream_with_context</span>
    <span class="k">def</span> <span class="nf">generate</span><span class="p">():</span>
        <span class="k">yield</span> <span class="s1">&#39;Hello &#39;</span>
        <span class="k">yield</span> <span class="n">request</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
        <span class="k">yield</span> <span class="s1">&#39;!&#39;</span>
    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">generate</span><span class="p">())</span>
</pre></div>
</div>
<p>Alternatively it can also be used around a specific generator:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="k">import</span> <span class="n">stream_with_context</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">Response</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/stream&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">streamed_response</span><span class="p">():</span>
    <span class="k">def</span> <span class="nf">generate</span><span class="p">():</span>
        <span class="k">yield</span> <span class="s1">&#39;Hello &#39;</span>
        <span class="k">yield</span> <span class="n">request</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
        <span class="k">yield</span> <span class="s1">&#39;!&#39;</span>
    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">stream_with_context</span><span class="p">(</span><span class="n">generate</span><span class="p">()))</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.9.</span></p>
</div>
</dd></dl>

</div>
<div class="section" id="id16">
<h2>有用的内部函数<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="flask.ctx.RequestContext">
<em class="property">class </em><code class="descclassname">flask.ctx.</code><code class="descname">RequestContext</code><span class="sig-paren">(</span><em>app</em>, <em>environ</em>, <em>request=None</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.ctx.RequestContext" title="Permalink to this definition">¶</a></dt>
<dd><p>The request context contains all request relevant information.  It is
created at the beginning of the request and pushed to the
<cite>_request_ctx_stack</cite> and removed at the end of it.  It will create the
URL adapter and request object for the WSGI environment provided.</p>
<p>Do not attempt to use this class directly, instead use
<a class="reference internal" href="#flask.Flask.test_request_context" title="flask.Flask.test_request_context"><code class="xref py py-meth docutils literal"><span class="pre">test_request_context()</span></code></a> and
<a class="reference internal" href="#flask.Flask.request_context" title="flask.Flask.request_context"><code class="xref py py-meth docutils literal"><span class="pre">request_context()</span></code></a> to create this object.</p>
<p>When the request context is popped, it will evaluate all the
functions registered on the application for teardown execution
(<a class="reference internal" href="#flask.Flask.teardown_request" title="flask.Flask.teardown_request"><code class="xref py py-meth docutils literal"><span class="pre">teardown_request()</span></code></a>).</p>
<p>The request context is automatically popped at the end of the request
for you.  In debug mode the request context is kept around if
exceptions happen so that interactive debuggers have a chance to
introspect the data.  With 0.4 this can also be forced for requests
that did not fail and outside of <code class="docutils literal"><span class="pre">DEBUG</span></code> mode.  By setting
<code class="docutils literal"><span class="pre">'flask._preserve_context'</span></code> to <code class="docutils literal"><span class="pre">True</span></code> on the WSGI environment the
context will not pop itself at the end of the request.  This is used by
the <a class="reference internal" href="#flask.Flask.test_client" title="flask.Flask.test_client"><code class="xref py py-meth docutils literal"><span class="pre">test_client()</span></code></a> for example to implement the
deferred cleanup functionality.</p>
<p>You might find this helpful for unittests where you need the
information from the context local around for a little longer.  Make
sure to properly <code class="xref py py-meth docutils literal"><span class="pre">pop()</span></code> the stack yourself in
that situation, otherwise your unittests will leak memory.</p>
<dl class="method">
<dt id="flask.ctx.RequestContext.copy">
<code class="descname">copy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#flask.ctx.RequestContext.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a copy of this request context with the same request object.
This can be used to move a request context to a different greenlet.
Because the actual request object is the same this cannot be used to
move a request context to a different thread unless access to the
request object is locked.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.10.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="flask.ctx.RequestContext.match_request">
<code class="descname">match_request</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#flask.ctx.RequestContext.match_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Can be overridden by a subclass to hook into the matching
of the request.</p>
</dd></dl>

<dl class="method">
<dt id="flask.ctx.RequestContext.pop">
<code class="descname">pop</code><span class="sig-paren">(</span><em>exc=&lt;object object&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.ctx.RequestContext.pop" title="Permalink to this definition">¶</a></dt>
<dd><p>Pops the request context and unbinds it by doing that.  This will
also trigger the execution of functions registered by the
<a class="reference internal" href="#flask.Flask.teardown_request" title="flask.Flask.teardown_request"><code class="xref py py-meth docutils literal"><span class="pre">teardown_request()</span></code></a> decorator.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.9: </span>Added the <cite>exc</cite> argument.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="flask.ctx.RequestContext.push">
<code class="descname">push</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#flask.ctx.RequestContext.push" title="Permalink to this definition">¶</a></dt>
<dd><p>Binds the request context to the current context.</p>
</dd></dl>

</dd></dl>

<dl class="data">
<dt id="flask._request_ctx_stack">
<code class="descclassname">flask.</code><code class="descname">_request_ctx_stack</code><a class="headerlink" href="#flask._request_ctx_stack" title="Permalink to this definition">¶</a></dt>
<dd><p>The internal <a class="reference external" href="http://werkzeug.pocoo.org/docs/local/#werkzeug.local.LocalStack" title="(in Werkzeug v0.14-dev)"><code class="xref py py-class docutils literal"><span class="pre">LocalStack</span></code></a> that is used to implement
all the context local objects used in Flask.  This is a documented
instance and can be used by extensions and application code but the
use is discouraged in general.</p>
<p>The following attributes are always present on each layer of the
stack:</p>
<dl class="docutils">
<dt><cite>app</cite></dt>
<dd>the active Flask application.</dd>
<dt><cite>url_adapter</cite></dt>
<dd>the URL adapter that was used to match the request.</dd>
<dt><cite>request</cite></dt>
<dd>the current request object.</dd>
<dt><cite>session</cite></dt>
<dd>the active session object.</dd>
<dt><cite>g</cite></dt>
<dd>an object with all the attributes of the <a class="reference internal" href="#flask.g" title="flask.g"><code class="xref py py-data docutils literal"><span class="pre">flask.g</span></code></a> object.</dd>
<dt><cite>flashes</cite></dt>
<dd>an internal cache for the flashed messages.</dd>
</dl>
<p>Example usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="k">import</span> <span class="n">_request_ctx_stack</span>

<span class="k">def</span> <span class="nf">get_session</span><span class="p">():</span>
    <span class="n">ctx</span> <span class="o">=</span> <span class="n">_request_ctx_stack</span><span class="o">.</span><span class="n">top</span>
    <span class="k">if</span> <span class="n">ctx</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">ctx</span><span class="o">.</span><span class="n">session</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="flask.ctx.AppContext">
<em class="property">class </em><code class="descclassname">flask.ctx.</code><code class="descname">AppContext</code><span class="sig-paren">(</span><em>app</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.ctx.AppContext" title="Permalink to this definition">¶</a></dt>
<dd><p>The application context binds an application object implicitly
to the current thread or greenlet, similar to how the
<a class="reference internal" href="#flask.ctx.RequestContext" title="flask.ctx.RequestContext"><code class="xref py py-class docutils literal"><span class="pre">RequestContext</span></code></a> binds request information.  The application
context is also implicitly created if a request context is created
but the application is not on top of the individual application
context.</p>
<dl class="method">
<dt id="flask.ctx.AppContext.pop">
<code class="descname">pop</code><span class="sig-paren">(</span><em>exc=&lt;object object&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.ctx.AppContext.pop" title="Permalink to this definition">¶</a></dt>
<dd><p>Pops the app context.</p>
</dd></dl>

<dl class="method">
<dt id="flask.ctx.AppContext.push">
<code class="descname">push</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#flask.ctx.AppContext.push" title="Permalink to this definition">¶</a></dt>
<dd><p>Binds the app context to the current context.</p>
</dd></dl>

</dd></dl>

<dl class="data">
<dt id="flask._app_ctx_stack">
<code class="descclassname">flask.</code><code class="descname">_app_ctx_stack</code><a class="headerlink" href="#flask._app_ctx_stack" title="Permalink to this definition">¶</a></dt>
<dd><p>Works similar to the request context but only binds the application.
This is mainly there for extensions to store data.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.9.</span></p>
</div>
</dd></dl>

<dl class="class">
<dt id="flask.blueprints.BlueprintSetupState">
<em class="property">class </em><code class="descclassname">flask.blueprints.</code><code class="descname">BlueprintSetupState</code><span class="sig-paren">(</span><em>blueprint</em>, <em>app</em>, <em>options</em>, <em>first_registration</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.blueprints.BlueprintSetupState" title="Permalink to this definition">¶</a></dt>
<dd><p>Temporary holder object for registering a blueprint with the
application.  An instance of this class is created by the
<a class="reference internal" href="#flask.Blueprint.make_setup_state" title="flask.Blueprint.make_setup_state"><code class="xref py py-meth docutils literal"><span class="pre">make_setup_state()</span></code></a> method and later passed
to all register callback functions.</p>
<dl class="method">
<dt id="flask.blueprints.BlueprintSetupState.add_url_rule">
<code class="descname">add_url_rule</code><span class="sig-paren">(</span><em>rule</em>, <em>endpoint=None</em>, <em>view_func=None</em>, <em>**options</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.blueprints.BlueprintSetupState.add_url_rule" title="Permalink to this definition">¶</a></dt>
<dd><p>A helper method to register a rule (and optionally a view function)
to the application.  The endpoint is automatically prefixed with the
blueprint’s name.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.blueprints.BlueprintSetupState.app">
<code class="descname">app</code><em class="property"> = None</em><a class="headerlink" href="#flask.blueprints.BlueprintSetupState.app" title="Permalink to this definition">¶</a></dt>
<dd><p>a reference to the current application</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.blueprints.BlueprintSetupState.blueprint">
<code class="descname">blueprint</code><em class="property"> = None</em><a class="headerlink" href="#flask.blueprints.BlueprintSetupState.blueprint" title="Permalink to this definition">¶</a></dt>
<dd><p>a reference to the blueprint that created this setup state.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.blueprints.BlueprintSetupState.first_registration">
<code class="descname">first_registration</code><em class="property"> = None</em><a class="headerlink" href="#flask.blueprints.BlueprintSetupState.first_registration" title="Permalink to this definition">¶</a></dt>
<dd><p>as blueprints can be registered multiple times with the
application and not everything wants to be registered
multiple times on it, this attribute can be used to figure
out if the blueprint was registered in the past already.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.blueprints.BlueprintSetupState.options">
<code class="descname">options</code><em class="property"> = None</em><a class="headerlink" href="#flask.blueprints.BlueprintSetupState.options" title="Permalink to this definition">¶</a></dt>
<dd><p>a dictionary with all options that were passed to the
<a class="reference internal" href="#flask.Flask.register_blueprint" title="flask.Flask.register_blueprint"><code class="xref py py-meth docutils literal"><span class="pre">register_blueprint()</span></code></a> method.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.blueprints.BlueprintSetupState.subdomain">
<code class="descname">subdomain</code><em class="property"> = None</em><a class="headerlink" href="#flask.blueprints.BlueprintSetupState.subdomain" title="Permalink to this definition">¶</a></dt>
<dd><p>The subdomain that the blueprint should be active for, <code class="docutils literal"><span class="pre">None</span></code>
otherwise.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.blueprints.BlueprintSetupState.url_defaults">
<code class="descname">url_defaults</code><em class="property"> = None</em><a class="headerlink" href="#flask.blueprints.BlueprintSetupState.url_defaults" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary with URL defaults that is added to each and every
URL that was defined with the blueprint.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.blueprints.BlueprintSetupState.url_prefix">
<code class="descname">url_prefix</code><em class="property"> = None</em><a class="headerlink" href="#flask.blueprints.BlueprintSetupState.url_prefix" title="Permalink to this definition">¶</a></dt>
<dd><p>The prefix that should be used for all URLs defined on the
blueprint.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id17">
<h2>信号<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.6.</span></p>
</div>
<dl class="data">
<dt id="flask.signals_available">
<code class="descclassname">flask.</code><code class="descname">signals_available</code><a class="headerlink" href="#flask.signals_available" title="Permalink to this definition">¶</a></dt>
<dd><p><cite>True</cite> if the signalling system is available.  This is the case
when <a class="reference external" href="http://pypi.python.org/pypi/blinker">blinker</a> is installed.</p>
</dd></dl>

<dl class="data">
<dt id="flask.template_rendered">
<code class="descclassname">flask.</code><code class="descname">template_rendered</code><a class="headerlink" href="#flask.template_rendered" title="Permalink to this definition">¶</a></dt>
<dd><p>This signal is sent when a template was successfully rendered.  The
signal is invoked with the instance of the template as <cite>template</cite>
and the context as dictionary (named <cite>context</cite>).</p>
</dd></dl>

<dl class="data">
<dt id="flask.request_started">
<code class="descclassname">flask.</code><code class="descname">request_started</code><a class="headerlink" href="#flask.request_started" title="Permalink to this definition">¶</a></dt>
<dd><p>This signal is sent before any request processing started but when the
request context was set up.  Because the request context is already
bound, the subscriber can access the request with the standard global
proxies such as <a class="reference internal" href="#flask.request" title="flask.request"><code class="xref py py-class docutils literal"><span class="pre">request</span></code></a>.</p>
</dd></dl>

<dl class="data">
<dt id="flask.request_finished">
<code class="descclassname">flask.</code><code class="descname">request_finished</code><a class="headerlink" href="#flask.request_finished" title="Permalink to this definition">¶</a></dt>
<dd><p>This signal is sent right before the response is sent to the client.
It is passed the response to be sent named <cite>response</cite>.</p>
</dd></dl>

<dl class="data">
<dt id="flask.got_request_exception">
<code class="descclassname">flask.</code><code class="descname">got_request_exception</code><a class="headerlink" href="#flask.got_request_exception" title="Permalink to this definition">¶</a></dt>
<dd><p>This signal is sent when an exception happens during request processing.
It is sent <em>before</em> the standard exception handling kicks in and even
in debug mode, where no exception handling happens.  The exception
itself is passed to the subscriber as <cite>exception</cite>.</p>
</dd></dl>

<dl class="data">
<dt id="flask.request_tearing_down">
<code class="descclassname">flask.</code><code class="descname">request_tearing_down</code><a class="headerlink" href="#flask.request_tearing_down" title="Permalink to this definition">¶</a></dt>
<dd><p>This signal is sent when the application is tearing down the request.
This is always called, even if an error happened.  An <cite>exc</cite> keyword
argument is passed with the exception that caused the teardown.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.9: </span>The <cite>exc</cite> parameter was added.</p>
</div>
</dd></dl>

<dl class="data">
<dt id="flask.appcontext_tearing_down">
<code class="descclassname">flask.</code><code class="descname">appcontext_tearing_down</code><a class="headerlink" href="#flask.appcontext_tearing_down" title="Permalink to this definition">¶</a></dt>
<dd><p>This signal is sent when the application is tearing down the
application context.  This is always called, even if an error happened.
An <cite>exc</cite> keyword argument is passed with the exception that caused the
teardown.  The sender is the application.</p>
</dd></dl>

<dl class="data">
<dt id="flask.appcontext_pushed">
<code class="descclassname">flask.</code><code class="descname">appcontext_pushed</code><a class="headerlink" href="#flask.appcontext_pushed" title="Permalink to this definition">¶</a></dt>
<dd><p>This signal is sent when an application context is pushed.  The sender
is the application.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.10.</span></p>
</div>
</dd></dl>

<dl class="data">
<dt id="flask.appcontext_popped">
<code class="descclassname">flask.</code><code class="descname">appcontext_popped</code><a class="headerlink" href="#flask.appcontext_popped" title="Permalink to this definition">¶</a></dt>
<dd><p>This signal is sent when an application context is popped.  The sender
is the application.  This usually falls in line with the
<a class="reference internal" href="#flask.appcontext_tearing_down" title="flask.appcontext_tearing_down"><code class="xref py py-data docutils literal"><span class="pre">appcontext_tearing_down</span></code></a> signal.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.10.</span></p>
</div>
</dd></dl>

<dl class="data">
<dt id="flask.message_flashed">
<code class="descclassname">flask.</code><code class="descname">message_flashed</code><a class="headerlink" href="#flask.message_flashed" title="Permalink to this definition">¶</a></dt>
<dd><p>This signal is sent when the application is flashing a message.  The
messages is sent as <cite>message</cite> keyword argument and the category as
<cite>category</cite>.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.10.</span></p>
</div>
</dd></dl>

<dl class="class">
<dt id="flask.signals.Namespace">
<em class="property">class </em><code class="descclassname">flask.signals.</code><code class="descname">Namespace</code><a class="headerlink" href="#flask.signals.Namespace" title="Permalink to this definition">¶</a></dt>
<dd><p>An alias for <a class="reference external" href="https://pythonhosted.org/blinker/index.html#blinker.base.Namespace" title="(in Blinker v1.4)"><code class="xref py py-class docutils literal"><span class="pre">blinker.base.Namespace</span></code></a> if blinker is available,
otherwise a dummy class that creates fake signals.  This class is
available for Flask extensions that want to provide the same fallback
system as Flask itself.</p>
<dl class="method">
<dt id="flask.signals.Namespace.signal">
<code class="descname">signal</code><span class="sig-paren">(</span><em>name</em>, <em>doc=None</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.signals.Namespace.signal" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a new signal for this namespace if blinker is available,
otherwise returns a fake signal that has a send method that will
do nothing but will fail with a <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.6)"><code class="xref py py-exc docutils literal"><span class="pre">RuntimeError</span></code></a> for all other
operations, including connecting.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id18">
<h2>基于类的视图<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.7.</span></p>
</div>
<dl class="class">
<dt id="flask.views.View">
<em class="property">class </em><code class="descclassname">flask.views.</code><code class="descname">View</code><a class="headerlink" href="#flask.views.View" title="Permalink to this definition">¶</a></dt>
<dd><p>Alternative way to use view functions.  A subclass has to implement
<a class="reference internal" href="#flask.views.View.dispatch_request" title="flask.views.View.dispatch_request"><code class="xref py py-meth docutils literal"><span class="pre">dispatch_request()</span></code></a> which is called with the view arguments from
the URL routing system.  If <a class="reference internal" href="#flask.views.View.methods" title="flask.views.View.methods"><code class="xref py py-attr docutils literal"><span class="pre">methods</span></code></a> is provided the methods
do not have to be passed to the <a class="reference internal" href="#flask.Flask.add_url_rule" title="flask.Flask.add_url_rule"><code class="xref py py-meth docutils literal"><span class="pre">add_url_rule()</span></code></a>
method explicitly:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyView</span><span class="p">(</span><span class="n">View</span><span class="p">):</span>
    <span class="n">methods</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">dispatch_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;Hello </span><span class="si">%s</span><span class="s1">!&#39;</span> <span class="o">%</span> <span class="n">name</span>

<span class="n">app</span><span class="o">.</span><span class="n">add_url_rule</span><span class="p">(</span><span class="s1">&#39;/hello/&lt;name&gt;&#39;</span><span class="p">,</span> <span class="n">view_func</span><span class="o">=</span><span class="n">MyView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(</span><span class="s1">&#39;myview&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>When you want to decorate a pluggable view you will have to either do that
when the view function is created (by wrapping the return value of
<a class="reference internal" href="#flask.views.View.as_view" title="flask.views.View.as_view"><code class="xref py py-meth docutils literal"><span class="pre">as_view()</span></code></a>) or you can use the <a class="reference internal" href="#flask.views.View.decorators" title="flask.views.View.decorators"><code class="xref py py-attr docutils literal"><span class="pre">decorators</span></code></a> attribute:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">SecretView</span><span class="p">(</span><span class="n">View</span><span class="p">):</span>
    <span class="n">methods</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">]</span>
    <span class="n">decorators</span> <span class="o">=</span> <span class="p">[</span><span class="n">superuser_required</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">dispatch_request</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>
</pre></div>
</div>
<p>The decorators stored in the decorators list are applied one after another
when the view function is created.  Note that you can <em>not</em> use the class
based decorators since those would decorate the view class and not the
generated view function!</p>
<dl class="classmethod">
<dt id="flask.views.View.as_view">
<em class="property">classmethod </em><code class="descname">as_view</code><span class="sig-paren">(</span><em>name</em>, <em>*class_args</em>, <em>**class_kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#flask.views.View.as_view" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts the class into an actual view function that can be used
with the routing system.  Internally this generates a function on the
fly which will instantiate the <a class="reference internal" href="#flask.views.View" title="flask.views.View"><code class="xref py py-class docutils literal"><span class="pre">View</span></code></a> on each request and call
the <a class="reference internal" href="#flask.views.View.dispatch_request" title="flask.views.View.dispatch_request"><code class="xref py py-meth docutils literal"><span class="pre">dispatch_request()</span></code></a> method on it.</p>
<p>The arguments passed to <a class="reference internal" href="#flask.views.View.as_view" title="flask.views.View.as_view"><code class="xref py py-meth docutils literal"><span class="pre">as_view()</span></code></a> are forwarded to the
constructor of the class.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.views.View.decorators">
<code class="descname">decorators</code><em class="property"> = ()</em><a class="headerlink" href="#flask.views.View.decorators" title="Permalink to this definition">¶</a></dt>
<dd><p>The canonical way to decorate class-based views is to decorate the
return value of as_view().  However since this moves parts of the
logic from the class declaration to the place where it’s hooked
into the routing system.</p>
<p>You can place one or more decorators in this list and whenever the
view function is created the result is automatically decorated.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.8.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="flask.views.View.dispatch_request">
<code class="descname">dispatch_request</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#flask.views.View.dispatch_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Subclasses have to override this method to implement the
actual view function code.  This method is called with all
the arguments from the URL rule.</p>
</dd></dl>

<dl class="attribute">
<dt id="flask.views.View.methods">
<code class="descname">methods</code><em class="property"> = None</em><a class="headerlink" href="#flask.views.View.methods" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of methods this view can handle.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="flask.views.MethodView">
<em class="property">class </em><code class="descclassname">flask.views.</code><code class="descname">MethodView</code><a class="headerlink" href="#flask.views.MethodView" title="Permalink to this definition">¶</a></dt>
<dd><p>Like a regular class-based view but that dispatches requests to
particular methods.  For instance if you implement a method called
<code class="xref py py-meth docutils literal"><span class="pre">get()</span></code> it means it will respond to <code class="docutils literal"><span class="pre">'GET'</span></code> requests and
the <code class="xref py py-meth docutils literal"><span class="pre">dispatch_request()</span></code> implementation will automatically
forward your request to that.  Also <code class="xref py py-attr docutils literal"><span class="pre">options</span></code> is set for you
automatically:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">CounterAPI</span><span class="p">(</span><span class="n">MethodView</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;counter&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">session</span><span class="p">[</span><span class="s1">&#39;counter&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;counter&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="s1">&#39;OK&#39;</span>

<span class="n">app</span><span class="o">.</span><span class="n">add_url_rule</span><span class="p">(</span><span class="s1">&#39;/counter&#39;</span><span class="p">,</span> <span class="n">view_func</span><span class="o">=</span><span class="n">CounterAPI</span><span class="o">.</span><span class="n">as_view</span><span class="p">(</span><span class="s1">&#39;counter&#39;</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="url">
<span id="url-route-registrations"></span><h2>URL 路由注册<a class="headerlink" href="#url" title="Permalink to this headline">¶</a></h2>
<p>Generally there are three ways to define rules for the routing system:</p>
<ol class="arabic simple">
<li>You can use the <a class="reference internal" href="#flask.Flask.route" title="flask.Flask.route"><code class="xref py py-meth docutils literal"><span class="pre">flask.Flask.route()</span></code></a> decorator.</li>
<li>You can use the <a class="reference internal" href="#flask.Flask.add_url_rule" title="flask.Flask.add_url_rule"><code class="xref py py-meth docutils literal"><span class="pre">flask.Flask.add_url_rule()</span></code></a> function.</li>
<li>You can directly access the underlying Werkzeug routing system
which is exposed as <a class="reference internal" href="#flask.Flask.url_map" title="flask.Flask.url_map"><code class="xref py py-attr docutils literal"><span class="pre">flask.Flask.url_map</span></code></a>.</li>
</ol>
<p>Variable parts in the route can be specified with angular brackets
(<code class="docutils literal"><span class="pre">/user/&lt;username&gt;</span></code>).  By default a variable part in the URL accepts any
string without a slash however a different converter can be specified as
well by using <code class="docutils literal"><span class="pre">&lt;converter:name&gt;</span></code>.</p>
<p>Variable parts are passed to the view function as keyword arguments.</p>
<p>The following converters are available:</p>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="81%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><cite>string</cite></td>
<td>accepts any text without a slash (the default)</td>
</tr>
<tr class="row-even"><td><cite>int</cite></td>
<td>accepts integers</td>
</tr>
<tr class="row-odd"><td><cite>float</cite></td>
<td>like <cite>int</cite> but for floating point values</td>
</tr>
<tr class="row-even"><td><cite>path</cite></td>
<td>like the default but also accepts slashes</td>
</tr>
</tbody>
</table>
<p>Here are some examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">pass</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&lt;username&gt;&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">show_user</span><span class="p">(</span><span class="n">username</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/post/&lt;int:post_id&gt;&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">show_post</span><span class="p">(</span><span class="n">post_id</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>An important detail to keep in mind is how Flask deals with trailing
slashes.  The idea is to keep each URL unique so the following rules
apply:</p>
<ol class="arabic simple">
<li>If a rule ends with a slash and is requested without a slash by the
user, the user is automatically redirected to the same page with a
trailing slash attached.</li>
<li>If a rule does not end with a trailing slash and the user requests the
page with a trailing slash, a 404 not found is raised.</li>
</ol>
<p>This is consistent with how web servers deal with static files.  This
also makes it possible to use relative link targets safely.</p>
<p>You can also define multiple rules for the same function.  They have to be
unique however.  Defaults can also be specified.  Here for example is a
definition for a URL that accepts an optional page:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/users/&#39;</span><span class="p">,</span> <span class="n">defaults</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;page&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/users/page/&lt;int:page&gt;&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">show_users</span><span class="p">(</span><span class="n">page</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>This specifies that <code class="docutils literal"><span class="pre">/users/</span></code> will be the URL for page one and
<code class="docutils literal"><span class="pre">/users/page/N</span></code> will be the URL for page <cite>N</cite>.</p>
<p>Here are the parameters that <a class="reference internal" href="#flask.Flask.route" title="flask.Flask.route"><code class="xref py py-meth docutils literal"><span class="pre">route()</span></code></a> and
<a class="reference internal" href="#flask.Flask.add_url_rule" title="flask.Flask.add_url_rule"><code class="xref py py-meth docutils literal"><span class="pre">add_url_rule()</span></code></a> accept.  The only difference is that
with the route parameter the view function is defined with the decorator
instead of the <cite>view_func</cite> parameter.</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><cite>rule</cite></td>
<td>the URL rule as string</td>
</tr>
<tr class="row-even"><td><cite>endpoint</cite></td>
<td>the endpoint for the registered URL rule.  Flask itself
assumes that the name of the view function is the name
of the endpoint if not explicitly stated.</td>
</tr>
<tr class="row-odd"><td><cite>view_func</cite></td>
<td>the function to call when serving a request to the
provided endpoint.  If this is not provided one can
specify the function later by storing it in the
<a class="reference internal" href="#flask.Flask.view_functions" title="flask.Flask.view_functions"><code class="xref py py-attr docutils literal"><span class="pre">view_functions</span></code></a> dictionary with the
endpoint as key.</td>
</tr>
<tr class="row-even"><td><cite>defaults</cite></td>
<td>A dictionary with defaults for this rule.  See the
example above for how defaults work.</td>
</tr>
<tr class="row-odd"><td><cite>subdomain</cite></td>
<td>specifies the rule for the subdomain in case subdomain
matching is in use.  If not specified the default
subdomain is assumed.</td>
</tr>
<tr class="row-even"><td><cite>**options</cite></td>
<td>the options to be forwarded to the underlying
<a class="reference external" href="http://werkzeug.pocoo.org/docs/routing/#werkzeug.routing.Rule" title="(in Werkzeug v0.14-dev)"><code class="xref py py-class docutils literal"><span class="pre">Rule</span></code></a> object.  A change to
Werkzeug is handling of method options.  methods is a list
of methods this rule should be limited to (<cite>GET</cite>, <cite>POST</cite>
etc.).  By default a rule just listens for <cite>GET</cite> (and
implicitly <cite>HEAD</cite>).  Starting with Flask 0.6, <cite>OPTIONS</cite> is
implicitly added and handled by the standard request
handling.  They have to be specified as keyword arguments.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="view-func-options">
<span id="id19"></span><h2>视图函数选项<a class="headerlink" href="#view-func-options" title="Permalink to this headline">¶</a></h2>
<p>For internal usage the view functions can have some attributes attached to
customize behavior the view function would normally not have control over.
The following attributes can be provided optionally to either override
some defaults to <a class="reference internal" href="#flask.Flask.add_url_rule" title="flask.Flask.add_url_rule"><code class="xref py py-meth docutils literal"><span class="pre">add_url_rule()</span></code></a> or general behavior:</p>
<ul class="simple">
<li><cite>__name__</cite>: The name of a function is by default used as endpoint.  If
endpoint is provided explicitly this value is used.  Additionally this
will be prefixed with the name of the blueprint by default which
cannot be customized from the function itself.</li>
<li><cite>methods</cite>: If methods are not provided when the URL rule is added,
Flask will look on the view function object itself is an <cite>methods</cite>
attribute exists.  If it does, it will pull the information for the
methods from there.</li>
<li><cite>provide_automatic_options</cite>: if this attribute is set Flask will
either force enable or disable the automatic implementation of the
HTTP <cite>OPTIONS</cite> response.  This can be useful when working with
decorators that want to customize the <cite>OPTIONS</cite> response on a per-view
basis.</li>
<li><cite>required_methods</cite>: if this attribute is set, Flask will always add
these methods when registering a URL rule even if the methods were
explicitly overriden in the <code class="docutils literal"><span class="pre">route()</span></code> call.</li>
</ul>
<p>Full example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;OPTIONS&#39;</span><span class="p">:</span>
        <span class="c1"># custom options handling here</span>
        <span class="o">...</span>
    <span class="k">return</span> <span class="s1">&#39;Hello World!&#39;</span>
<span class="n">index</span><span class="o">.</span><span class="n">provide_automatic_options</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">index</span><span class="o">.</span><span class="n">methods</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;OPTIONS&#39;</span><span class="p">]</span>

<span class="n">app</span><span class="o">.</span><span class="n">add_url_rule</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.8: </span>The <cite>provide_automatic_options</cite> functionality was added.</p>
<p>The <cite>provide_automatic_options</cite> functionality was added.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><p class="logo"><a href="index.html">
  <img class="logo" src="_static/flask.png" alt="Logo"/>
</a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">API</a><ul>
<li><a class="reference internal" href="#id2">应用对象</a></li>
<li><a class="reference internal" href="#id3">蓝图对象</a></li>
<li><a class="reference internal" href="#id4">传入请求数据</a></li>
<li><a class="reference internal" href="#id5">响应对象</a></li>
<li><a class="reference internal" href="#id6">会话</a></li>
<li><a class="reference internal" href="#id7">会话接口</a></li>
<li><a class="reference internal" href="#id8">测试客户端</a></li>
<li><a class="reference internal" href="#id9">应用全局变量</a></li>
<li><a class="reference internal" href="#id10">有用的函数和类</a></li>
<li><a class="reference internal" href="#id11">消息闪现</a></li>
<li><a class="reference internal" href="#module-flask.json">JSON 支持</a></li>
<li><a class="reference internal" href="#id12">渲染模版</a></li>
<li><a class="reference internal" href="#id13">配置</a></li>
<li><a class="reference internal" href="#id14">扩展</a></li>
<li><a class="reference internal" href="#id15">流辅助函数</a></li>
<li><a class="reference internal" href="#id16">有用的内部函数</a></li>
<li><a class="reference internal" href="#id17">信号</a></li>
<li><a class="reference internal" href="#id18">基于类的视图</a></li>
<li><a class="reference internal" href="#url">URL 路由注册</a></li>
<li><a class="reference internal" href="#view-func-options">视图函数选项</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="becomingbig.html" title="previous chapter">大型应用</a></li>
      <li>Next: <a href="design.html" title="next chapter">Flask 中的设计决策</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/api.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2010 - 2018, Armin Ronacher.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="_sources/api.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>